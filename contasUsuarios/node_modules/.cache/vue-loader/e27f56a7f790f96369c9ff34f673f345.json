{"remainingRequest":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\src\\views\\Cadastro\\UsuarioForm.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\src\\views\\Cadastro\\UsuarioForm.vue","mtime":1615666202670},{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios\\contasUsuarios\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNyb3cgew0KICBtYXJnaW4tdG9wOiAtMTVweDsNCn0NCg0KI3JvdzIgew0KICBtYXJnaW4tdG9wOiAtMjBweDsNCn0NCg=="},{"version":3,"sources":["UsuarioForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAk6BA;AACA;AACA;;AAEA;AACA;AACA","file":"UsuarioForm.vue","sourceRoot":"src/views/Cadastro","sourcesContent":["<template>\r\n  <v-content style=\"margin: 10px\">\r\n    <v-snackbar\r\n      v-model=\"snackbar\"\r\n      :color=\"colorBorder\"\r\n      shaped\r\n      timeout=\"3000\"\r\n      :vertical=\"vertical\"\r\n    >\r\n      <b>{{ text }}</b>\r\n      <template v-slot:action=\"{ attrs }\">\r\n        <v-btn v-bind=\"attrs\" @click=\"snackbar = false\" icon dark small>\r\n          <v-icon>mdi-close</v-icon>\r\n        </v-btn>\r\n      </template>\r\n    </v-snackbar>\r\n\r\n    <k-loading title=\"Carregando\" :dialog=\"dialogLoading\"></k-loading>\r\n\r\n    <k-dialog\r\n      @fecharDialog=\"fecharDialogMessage\"\r\n      :dialog=\"dialogMessage\"\r\n      title=\"Mensagem\"\r\n      :text=\"textError\"\r\n    ></k-dialog>\r\n\r\n    <k-dialog\r\n      :dialog=\"dialogDeleteUsuario\"\r\n      title=\"Remover Endereço?\"\r\n      text=\"O endereço selecionado será removido. Deseja Continuar?\"\r\n    >\r\n      <template v-slot:buttoes>\r\n        <v-btn\r\n          @click=\"cancelaRemoverEndereco()\"\r\n          width=\"100\"\r\n          text\r\n          dark\r\n          color=\"red darken-2\"\r\n          >Cancelar</v-btn\r\n        >\r\n        <v-btn\r\n          @click=\"removerEndereco()\"\r\n          width=\"100\"\r\n          text\r\n          dark\r\n          color=\"green darken-2\"\r\n          >Sim</v-btn\r\n        >\r\n      </template>\r\n    </k-dialog>\r\n\r\n    <!-- ADD ENDERECO-->\r\n    <v-dialog v-model=\"dialogAddEndereco\" scrollable width=\"1200\">\r\n      <v-card>\r\n        <v-card-title style=\"background-color: #1867c0\">\r\n          <span style=\"color: white\" class=\"headline\">\r\n            Endereço do Usuário\r\n          </span>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <v-container>\r\n            <v-row>\r\n              <v-col cols=\"12\" sm=\"12\">\r\n                <span>\r\n                  <b>Dados do Endereço</b>\r\n                </span>\r\n              </v-col>\r\n            </v-row>\r\n\r\n            <v-row>\r\n              <v-col cols=\"12\" sm=\"3\">\r\n                <v-row>\r\n                  <v-col cols=\"12\" sm=\"11\">\r\n                    <v-text-field\r\n                      outlined\r\n                      v-model=\"endereco.cep\"\r\n                      label=\"CEP *\"\r\n                      placeholder=\"Consulta Automatica de CEP\"\r\n                      maxl\r\n                      dense\r\n                      counter=\"9\"\r\n                      maxlength=\"9\"\r\n                      v-mask=\"maskCep\"\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" sm=\"1\">\r\n                    <v-btn\r\n                      v-if=\"!isMobile\"\r\n                      color=\"primary\"\r\n                      fab\r\n                      dark\r\n                      small\r\n                      title=\"Consulta de CEP (Correios Brasil)\"\r\n                      @click=\"consultaCEP()\"\r\n                    >\r\n                      <v-icon dark>mdi-map-marker</v-icon>\r\n                    </v-btn>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"9\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.logradouro\"\r\n                  label=\"Endereço *\"\r\n                  placeholder=\"Nome da Rua / Avenida / Logradouro\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"80\"\r\n                  maxlength=\"80\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"3\">\r\n                <v-select\r\n                  outlined\r\n                  :items=\"itensTipoEndereco\"\r\n                  v-model=\"endereco.tipo\"\r\n                  label=\"Tipo de Endereço *\"\r\n                  placeholder=\"Selecione o Tipo\"\r\n                  dense\r\n                ></v-select>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"10\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.bairro\"\r\n                  label=\"Bairro *\"\r\n                  placeholder=\"Bairro\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"80\"\r\n                  maxlength=\"80\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"2\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.numero\"\r\n                  label=\"Número (ou S/N)*\"\r\n                  placeholder=\"Número\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"5\"\r\n                  maxlength=\"5\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"7\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.complemento\"\r\n                  label=\"Complemento \"\r\n                  placeholder=\"Complemento do Endereço\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"50\"\r\n                  maxlength=\"50\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"3\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.localidade\"\r\n                  label=\"Cidade *\"\r\n                  placeholder=\"Cidade\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"50\"\r\n                  maxlength=\"50\"\r\n                ></v-text-field>\r\n              </v-col>\r\n\r\n              <v-col cols=\"12\" sm=\"2\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"endereco.uf\"\r\n                  label=\"UF *\"\r\n                  placeholder=\"UF\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"2\"\r\n                  maxlength=\"2\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n\r\n            <v-row id=\"row\">\r\n              <v-spacer></v-spacer>\r\n              <div>\r\n                <b style=\"font-size: 12px\"\r\n                  >Campos obrigatórios identificados com um asterísco *</b\r\n                >\r\n              </div>\r\n            </v-row>\r\n          </v-container>\r\n        </v-card-text>\r\n        <v-divider></v-divider>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            color=\"#7BC6FF\"\r\n            width=\"150\"\r\n            @click=\"cancelaAddEndereco\"\r\n            dark\r\n            large\r\n            >Cancelar</v-btn\r\n          >\r\n          <v-btn color=\"primary\" width=\"150\" dark large @click=\"addEndereco()\"\r\n            >Adicionar</v-btn\r\n          >\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n    <v-container>\r\n      <v-row ref=\"form\">\r\n        <v-col cols=\"12\" sm=\"12\" v-if=\"!idUsuario\">\r\n          <h3>\r\n            <b>Novo Usuário</b>\r\n          </h3>\r\n          <span>\r\n            <b>Criando um novo usuário no sistema</b>\r\n          </span>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" v-if=\"idUsuario\">\r\n          <h3>\r\n            <b>Editando Usuário</b>\r\n          </h3>\r\n          <span>\r\n            <b>Alterando dados do Usuário no sistema</b>\r\n          </span>\r\n        </v-col>\r\n\r\n        <!-- DADOS DO USUARIO -->\r\n        <v-row>\r\n          <v-col cols=\"12\" sm=\"12\">\r\n            <v-row>\r\n              <v-col cols=\"12\" sm=\"12\">\r\n                <div>Dados do Usuário</div>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row>\r\n              <v-col cols=\"12\" sm=\"12\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.nome\"\r\n                  label=\"Nome *\"\r\n                  placeholder=\"Informe o nome\"\r\n                  maxl\r\n                  dense\r\n                  counter=\"100\"\r\n                  maxlength=\"100\"\r\n                  :disabled=\"disabledNome\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"2\">\r\n                <v-menu\r\n                  ref=\"menu1\"\r\n                  v-model=\"menu1\"\r\n                  :close-on-content-click=\"false\"\r\n                  transition=\"scale-transition\"\r\n                  offset-y\r\n                  max-width=\"290px\"\r\n                  min-width=\"290px\"\r\n                >\r\n                  <template v-slot:activator=\"{ on, attrs }\">\r\n                    <v-text-field\r\n                      v-model=\"dateFormatted\"\r\n                      label=\"Data de Nascimento \"\r\n                      placeholder=\"Data de Nascimento\"\r\n                      persistent-hint\r\n                      v-bind=\"attrs\"\r\n                      @blur=\"date = parseDate(dateFormatted)\"\r\n                      v-on=\"on\"\r\n                      outlined\r\n                      dense\r\n                      v-mask=\"maskDatas\"\r\n                      :disabled=\"disabledcampos\"\r\n                    ></v-text-field>\r\n                  </template>\r\n                  <v-date-picker\r\n                    v-model=\"date\"\r\n                    no-title\r\n                    @input=\"menu1 = false\"\r\n                  ></v-date-picker>\r\n                </v-menu>\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"4\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.cpf\"\r\n                  label=\"CPF \"\r\n                  placeholder=\"Informe o CPF\"\r\n                  dense\r\n                  v-mask=\"maskCPF\"\r\n                  counter=\"14\"\r\n                  required\r\n                  maxlength=\"14\"\r\n                  :disabled=\"disabledcampos\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"6\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.email\"\r\n                  label=\"E-mail *\"\r\n                  placeholder=\"Informe o e-mail\"\r\n                  counter=\"50\"\r\n                  dense\r\n                  required\r\n                  maxlength=\"50\"\r\n                  :disabled=\"disabledcampos\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.confirmeEmail\"\r\n                  label=\"Confirmação de e-mail *\"\r\n                  placeholder=\"Redigite o e-mail\"\r\n                  counter=\"50\"\r\n                  dense\r\n                  required\r\n                  maxlength=\"50\"\r\n                  :disabled=\"disabledcampos\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n            <v-row id=\"row\">\r\n              <v-col cols=\"12\" sm=\"6\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.senha\"\r\n                  label=\"Senha de Acesso *\"\r\n                  placeholder=\"Informe uma senha de acesso\"\r\n                  counter=\"50\"\r\n                  dense\r\n                  required\r\n                  maxlength=\"50\"\r\n                  type=\"password\"\r\n                  :disabled=\"disabledcampos\"\r\n                ></v-text-field>\r\n              </v-col>\r\n\r\n              <v-col cols=\"12\" sm=\"6\">\r\n                <v-text-field\r\n                  outlined\r\n                  v-model=\"usuario.confirmaSenha\"\r\n                  label=\"Confirme a Senha *\"\r\n                  placeholder=\"Redigite a senha\"\r\n                  counter=\"50\"\r\n                  dense\r\n                  required\r\n                  maxlength=\"50\"\r\n                  type=\"password\"\r\n                  :disabled=\"disabledcampos\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n            <v-col cols=\"12\" sm=\"12\">\r\n              <v-row id=\"row\">\r\n                <v-spacer></v-spacer>\r\n                <div>\r\n                  <b style=\"font-size: 12px\"\r\n                    >Campos obrigatórios identificados com um asterísco *</b\r\n                  >\r\n                </div>\r\n              </v-row>\r\n            </v-col>\r\n            <v-divider></v-divider>\r\n          </v-col>\r\n          <v-col cols=\"12\" sm=\"12\">\r\n            <!-- DADOS DO ENDEREÇO -->\r\n            <v-row id=\"row2\">\r\n              <v-col cols=\"12\" sm=\"9\">\r\n                <div>Endereços</div>\r\n              </v-col>\r\n\r\n              <v-col cols=\"12\" sm=\"3\">\r\n                <v-btn\r\n                  v-if=\"!isMobile\"\r\n                  color=\"#7BC6FF\"\r\n                  large\r\n                  dark\r\n                  @click=\"modalAddEndereco()\"\r\n                  style=\"float: right\"\r\n                  :disabled=\"disabledcampos\"\r\n                >\r\n                  <v-icon dark>mdi-plus</v-icon>Novo Endereço\r\n                </v-btn>\r\n              </v-col>\r\n            </v-row>\r\n          </v-col>\r\n\r\n          <v-col cols=\"12\" sm=\"12\">\r\n            <k-data-list\r\n              orientation=\"Horizontal\"\r\n              mobileIconAdd=\"mdi-plus-circle\"\r\n              mobileFunctionAdd=\"addSolicitacao\"\r\n              :headers=\"headers\"\r\n              :itens=\"usuario.endereco\"\r\n            >\r\n              <template v-slot:dados=\"{ item }\">\r\n                {{\r\n                  \"Endereço: \" +\r\n                  item.logradouro +\r\n                  \", Bairro: \" +\r\n                  item.bairro +\r\n                  \", Nº: \" +\r\n                  item.numero\r\n                }}\r\n              </template>\r\n              <template v-slot:acao=\"{ item }\">\r\n                <v-icon title=\"Remover endereço selecionado\" color=\"red\" :disabled=\"disabledcampos\" @click=\"deleteItem(item)\" dark\r\n                  >mdi-delete</v-icon\r\n                >\r\n              </template>\r\n            </k-data-list>\r\n          </v-col>\r\n\r\n          <v-col cols=\"12\" sm=\"12\">\r\n            <v-card-actions>\r\n              <v-spacer></v-spacer>\r\n              <v-btn\r\n                color=\"#7BC6FF\"\r\n                @click=\"retornaListaUsuarios()\"\r\n                large\r\n                dark\r\n                width=\"150\"\r\n                >{{this.$route.params.tipo == '2' ? 'Voltar' : 'Cancelar'}}</v-btn\r\n              >\r\n\r\n              <v-btn\r\n                v-if=\"!isMobile && idUsuario && this.$route.params.tipo == '1'\"\r\n                color=\"primary\"\r\n                large\r\n                dark\r\n                width=\"150\"\r\n                @click=\"updateUsuario()\"\r\n                >Salvar</v-btn\r\n              >\r\n\r\n              <v-btn\r\n                v-if=\"!isMobile && !idUsuario\"\r\n                color=\"primary\"\r\n                large\r\n                dark\r\n                width=\"150\"\r\n                @click=\"saveUsuario()\"\r\n                >Salvar</v-btn\r\n              >\r\n\r\n              <v-btn\r\n                v-else-if=\"isMobile && !idUsuario\"\r\n                color=\"primary\"\r\n                large\r\n                dark\r\n                width=\"150\"\r\n                @click=\"saveUsuario()\"\r\n                >Salvar</v-btn\r\n              >\r\n            </v-card-actions>\r\n          </v-col>\r\n        </v-row>\r\n      </v-row>\r\n    </v-container>\r\n  </v-content>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Vue from \"vue\";\r\n\r\nimport KLoading from \"../../components/KLoading.vue\";\r\nimport KDialog from \"../../components/KDialog.vue\";\r\nimport KDataList from \"../../components/KDataList.vue\";\r\n\r\nimport Component from \"vue-class-component\";\r\nimport { Watch } from \"vue-property-decorator\";\r\n\r\nimport { Display } from \"../../configuration/display\";\r\nimport { Storage } from \"../../configuration/storage\";\r\n\r\nimport { Header, HeaderIcon, HeaderAction } from \"../../models/header\";\r\nimport { Headers } from \"../../models/headers\";\r\n\r\nimport {\r\n  IUsuarioFormView,\r\n  IUsuarioFormController,\r\n} from \"../../contracts/Cadastro/UsuarioFormContract\";\r\nimport { UsuarioFormController } from \"../../controllers/Cadastro/UsuarioFormController\";\r\n\r\n@Component({\r\n  components: {\r\n    KLoading,\r\n    KDialog,\r\n    KDataList,\r\n  },\r\n})\r\nexport default class UsuarioForm extends Vue implements IUsuarioFormView {\r\n  _controller?: IUsuarioFormController;\r\n\r\n  //validate form\r\n  valid = true;\r\n  lazy = false;\r\n\r\n  isMobile = false;\r\n\r\n  isSucesso = false;\r\n\r\n  dialogLoading = false;\r\n  dialogDeleteUsuario = false;\r\n  dialogMessage = false;\r\n  textError = \"\";\r\n\r\n  disabledcampos = false;\r\n   disabledNome = false;\r\n\r\n  maskDatas = \"##/##/####\";\r\n  maskCPF = \"###.###.###-##\";\r\n  maskTel = \"(##)#####-####\";\r\n  maskCep = \"#####-###\";\r\n  date = new Date().toISOString().substr(0, 10);\r\n  dateFormatted = this.formatDate(new Date().toISOString().substr(0, 10));\r\n  menu1 = false;\r\n\r\n  idUsuario = \"\";\r\n\r\n  dialogAddEndereco = false;\r\n\r\n  endereco: any = {\r\n    bairro: \"\",\r\n    cep: \"\",\r\n    complemento: \"\",\r\n    ddd: \"\",\r\n    gia: \"\",\r\n    ibge: \"\",\r\n    localidade: \"\",\r\n    logradouro: \"\",\r\n    siafi: \"\",\r\n    uf: \"\",\r\n    tipo: \"\",\r\n    numero: \"\",\r\n  };\r\n\r\n  itensEndereco: any = [];\r\n  usuario = {\r\n    nome: \"\",\r\n    email: \"\",\r\n    confirmeEmail: \"\",\r\n    senha: \"\",\r\n    confirmaSenha: \"\",\r\n    dataNascimento: \"\",\r\n    cpf: \"\",\r\n    deletado: \"N\",\r\n    dataCadastro: new Date(),\r\n    endereco: this.itensEndereco,\r\n  };\r\n\r\n  //SNACKBAR\r\n  snackbar = false;\r\n  text = \"\";\r\n  vertical = true;\r\n  color = \"\";\r\n  colorBorder = \"\";\r\n\r\n  itensTipoEndereco = [\"RESIDENCIAL\", \"COMERCIAL\", \"CORRESPONDÊNCIAS\"];\r\n\r\n  headers = new Headers([\r\n    new Header(\"Tipo de Endereço\", \"tipo\", false, false, \"center\", true, \"100\"),\r\n    new Header(\"CEP\", \"cep\", false, false, \"center\", true, \"100\"),\r\n    new Header(\"Dados do Endereço\", \"dados\", false, false, \"left\", true, \"200\"),\r\n    new Header(\"Ações\", \"acao\", true, false, \"center\", false, \"80\"),\r\n  ]);\r\n\r\n  limparCamposEndereco() {\r\n    this.endereco = {\r\n      bairro: \"\",\r\n      cep: \"\",\r\n      complemento: \"\",\r\n      ddd: \"\",\r\n      gia: \"\",\r\n      ibge: \"\",\r\n      localidade: \"\",\r\n      logradouro: \"\",\r\n      siafi: \"\",\r\n      uf: \"\",\r\n      tipo: \"\",\r\n    };\r\n  }\r\n\r\n  itemEnderecoDelete: any = [];\r\n\r\n  deleteItem(item: any) {\r\n    this.itemEnderecoDelete = item;\r\n    this.dialogDeleteUsuario = true;\r\n  }\r\n\r\n  cancelaRemoverEndereco() {\r\n    this.itemEnderecoDelete = [];\r\n    this.dialogDeleteUsuario = false;\r\n  }\r\n\r\n  removerEndereco() {\r\n    this.usuario.endereco = this.usuario.endereco.filter((t: any) => {\r\n      return t != this.itemEnderecoDelete;\r\n    });\r\n    this.itemEnderecoDelete = [];\r\n    this.dialogDeleteUsuario = false;\r\n  }\r\n\r\n  consultaCEP() {\r\n    if (this.validateCep()) {\r\n    } else {\r\n      let cep = this.endereco.cep;\r\n      cep = cep.replace(/[^\\d]+/g, \"\");\r\n      this.endereco.cep = cep;\r\n      this._controller!.cosultarEndereco(this.endereco.cep);\r\n    }\r\n  }\r\n\r\n  carregaEndereco(endereco: any): void {\r\n    this.endereco = endereco;\r\n\r\n    if (endereco.logradouro == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O CEP consultado é inválido.\";\r\n      this.snackbar = true;\r\n      return;\r\n    }\r\n  }\r\n\r\n  addEndereco() {\r\n    if (this.validateEndereco()) {\r\n    } else {\r\n      this.usuario.endereco.push(this.endereco);\r\n      this.dialogAddEndereco = false;\r\n    }\r\n\r\n    console.log(this.usuario.endereco);\r\n  }\r\n\r\n  modalAddEndereco() {\r\n    this.limparCamposEndereco();\r\n    this.dialogAddEndereco = true;\r\n  }\r\n\r\n  cancelaAddEndereco() {\r\n    this.dialogAddEndereco = false;\r\n    this.endereco = [];\r\n  }\r\n\r\n  formatDate(date: string) {\r\n    if (!date) return null;\r\n\r\n    const [year, month, day] = date.split(\"-\");\r\n    return `${day}/${month}/${year}`;\r\n  }\r\n\r\n  parseDate(date: string) {\r\n    if (!date) return null;\r\n    const [day, month, year] = date.split(\"/\");\r\n    return `${year}-${month.padStart(2, \"0\")}-${day.padStart(2, \"0\")}`;\r\n  }\r\n\r\n  validaCPF(cpf: any): boolean {\r\n    let numeros, digitos, soma, i, resultado, digitosIguais;\r\n    digitosIguais = 1;\r\n    if (cpf.length < 11) return false;\r\n    for (i = 0; i < cpf.length - 1; i++)\r\n      if (cpf.charAt(i) != cpf.charAt(i + 1)) {\r\n        digitosIguais = 0;\r\n        break;\r\n      }\r\n    if (!digitosIguais) {\r\n      numeros = cpf.substring(0, 9);\r\n      digitos = cpf.substring(9);\r\n      soma = 0;\r\n      for (i = 10; i > 1; i--) soma += numeros.charAt(10 - i) * i;\r\n      resultado = soma % 11 < 2 ? 0 : 11 - (soma % 11);\r\n      if (resultado != digitos.charAt(0)) return false;\r\n      numeros = cpf.substring(0, 10);\r\n      soma = 0;\r\n      for (i = 11; i > 1; i--) soma += numeros.charAt(11 - i) * i;\r\n      resultado = soma % 11 < 2 ? 0 : 11 - (soma % 11);\r\n      if (resultado != digitos.charAt(1)) return false;\r\n      return true;\r\n    } else return false;\r\n  }\r\n\r\n  loading(visible: boolean): void {\r\n    this.dialogLoading = visible;\r\n  }\r\n\r\n  fecharDialogMessage() {\r\n    this.dialogMessage = false;\r\n    if (this.isSucesso) {\r\n      this.$router.push(\"/Usuarios\");\r\n    }\r\n  }\r\n\r\n  retornaListaUsuarios() {\r\n    this.$router.push(\"/Usuarios\");\r\n  }\r\n\r\n  showMsg(msg: string, modo: number): void {\r\n    this.textError = msg;\r\n    if (modo == 1) {\r\n      this.isSucesso = true;\r\n    }\r\n    this.dialogMessage = true;\r\n  }\r\n\r\n  validateEndereco() {\r\n    if (this.endereco.cep == \"\" || this.endereco.cep.length < 0) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"Informe o CEP para realziar a consulta do endereço.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.logradouro == \"\" || this.endereco.logradouro.length < 0) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O Endereço está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.tipo == \"\" || this.endereco.tipo == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"Selecione o Tipo de Enderço.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.bairro == \"\" || this.endereco.bairro == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo Bairro está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.numero == \"\" || this.endereco.numero == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo Número está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.localidade == \"\" || this.endereco.localidade == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo Cidade está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.endereco.uf == \"\" || this.endereco.uf == null) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo UF está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  validate() {\r\n    if (this.usuario.nome == \"\" || this.usuario.nome.length > 100) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo Nome está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.usuario.email == \"\" || this.usuario.email.length > 50) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo e-mail do Usuario está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    } else if (this.usuario.email !== this.usuario.confirmeEmail) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"Os e-mails informados não correspondem.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.usuario.senha == \"\" || this.usuario.senha.length > 50) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo Senha do Usuario está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    } else if (this.usuario.senha !== this.usuario.confirmaSenha) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"As senhas informadas não correspondem.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    if (this.usuario.cpf != \"\" && this.usuario.cpf.length > 0) {\r\n      let cpf = this.usuario.cpf;\r\n      cpf = cpf.replace(/[^\\d]+/g, \"\");\r\n\r\n      if (!this.validaCPF(cpf)) {\r\n        this.colorBorder = \"error\";\r\n        this.color = \"error\";\r\n        this.text = \"O CPF informador é inválido. Digite um CPF válido.\";\r\n        this.snackbar = true;\r\n        return true;\r\n      }\r\n    }\r\n\r\n    if (this.usuario.endereco.length == 0) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"É necessário informar ao menos um endereço para o usuário.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  validateCep() {\r\n    if (this.endereco.cep == \"\" || this.endereco.cep.length < 9) {\r\n      this.colorBorder = \"error\";\r\n      this.color = \"error\";\r\n      this.text = \"O campo CEP está vazio ou inválido.\";\r\n      this.snackbar = true;\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  saveUsuario() {\r\n    if (this.validate()) {\r\n    } else {\r\n      let cpf = this.usuario.cpf;\r\n      cpf = cpf.replace(/[^\\d]+/g, \"\");\r\n      this.usuario.cpf = cpf;\r\n\r\n      this.usuario.dataNascimento = this.date;\r\n      this._controller!.salvar(this.usuario);\r\n    }\r\n  }\r\n\r\n  updateUsuario() {\r\n    if (this.validate()) {\r\n    } else {\r\n      let cpf = this.usuario.cpf;\r\n      cpf = cpf.replace(/[^\\d]+/g, \"\");\r\n      this.usuario.cpf = cpf;\r\n      this._controller!.update(this.idUsuario, this.usuario);\r\n    }\r\n  }\r\n\r\n  carregarDtos(): void {\r\n    this.idUsuario = this.$route.params.id;\r\n    if (this.$route.params.tipo == \"1\") {\r\n      this.disabledcampos = false;\r\n      \r\n    } \r\n    \r\n    if (this.$route.params.tipo == \"2\"){\r\n      this.disabledcampos = true;\r\n     \r\n    }\r\n\r\n    if (this.$route.params.tipo == undefined){\r\n      this.disabledcampos = false;\r\n      \r\n    }\r\n\r\n  }\r\n\r\n  showUsuarioForEditar(item: any) {\r\n    this.disabledNome = true;\r\n    this.usuario = item;\r\n    this.usuario.confirmeEmail = item.email;\r\n    this.usuario.confirmaSenha = item.senha;\r\n\r\n    if (item.cpf != null || item.cpf !== \"\") {\r\n      this.usuario.cpf =\r\n        item.cpf.substring(0, 3) +\r\n        \".\" +\r\n        item.cpf.substring(3, 6) +\r\n        \".\" +\r\n        item.cpf.substring(6, 9) +\r\n        \"-\" +\r\n        item.cpf.substring(9, 13);\r\n    }\r\n  }\r\n\r\n  created() {\r\n    this._controller = new UsuarioFormController(this);\r\n    this._controller.carregarDtos(this.$route.params.id);\r\n    this.carregarDtos();\r\n    this.isMobile = Display.isMobile();\r\n  }\r\n\r\n  @Watch(\"date\")\r\n  onDatasChanged(val: string) {\r\n    this.dateFormatted = this.formatDate(this.date);\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#row {\r\n  margin-top: -15px;\r\n}\r\n\r\n#row2 {\r\n  margin-top: -20px;\r\n}\r\n</style>\r\n\r\n\r\n"]}]}