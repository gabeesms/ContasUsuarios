{"remainingRequest":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\LoginController.ts","dependencies":[{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\LoginController.ts","mtime":1615581031825},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovd2FtcDY0L3d3dy9Db250YXNVc3Vhcmlvc19Nb2RlbG9UZXN0ZS9zbWFydHBvaW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IGF4aW9zIGZyb20gIi4uL3BsdWdpbnMvYXhpb3MiOwppbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSAiLi4vY29uZmlndXJhdGlvbi9zdG9yYWdlIjsKZXhwb3J0IHZhciBMb2dpbkNvbnRyb2xsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcih2aWV3KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW5Db250cm9sbGVyKTsKCiAgICB0aGlzLl92aWV3ID0gdmlldzsKICAgIFN0b3JhZ2Uuc2FsdmFyKCJMb2dhZG8iLCAiZmFsc2UiKTsKICAgIFN0b3JhZ2Uuc2FsdmFyKCJTZXNzaW9uIiwgIiIpOwogICAgU3RvcmFnZS5zYWx2YXIoIlVzZXIiLCAiIik7CiAgICBTdG9yYWdlLnNhbHZhcigiQ29sYWJvcmFkb3IiLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgIGNvZGlnbzogIiIKICAgIH0pKTsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2dpbkNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvZ2luID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKG1hdHJpY3VsYSwgc2VuaGEpIHsKICAgICAgICB2YXIgbG9naW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5fdmlldy5sb2FkaW5nKHRydWUpOyAvL1Byb2Nlc3NhbWVudG8KCgogICAgICAgICAgICAgICAgbG9naW4gPSBuZXcgTG9naW4obWF0cmljdWxhLCBzZW5oYSk7IC8vICBhd2FpdCBheGlvcy5wb3N0KCdMb2dpbicsIGxvZ2luKS50aGVuKGFzeW5jIChyZXNwb25zZTogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKQogICAgICAgICAgICAgICAgLy8gICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Vzc28gPT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgLy8gICAgICAgU3RvcmFnZS5zYWx2YXIoIkxvZ2FkbyIsICJ0cnVlIikKICAgICAgICAgICAgICAgIC8vICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJTZXNzaW9uIiwgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKQogICAgICAgICAgICAgICAgLy8gICAgICAgU3RvcmFnZS5zYWx2YXIoIlVzZXIiLCByZXNwb25zZS5kYXRhLnRSZXRvcm5vLm1hdHJpY3VsYSkKICAgICAgICAgICAgICAgIC8vICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJDb2xhYm9yYWRvciIsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEudFJldG9ybm8pKQogICAgICAgICAgICAgICAgLy8gICAgICAgYXdhaXQgdGhpcy5jYXJyZWdhVXN1YXJpb1Blcm1pc3NvZXNBY2Vzc29zKG1hdHJpY3VsYSk7CiAgICAgICAgICAgICAgICAvLyAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLlBvcnRhbENvbXByYXNTZXNzaW9uID0KICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICdQcmltZWlybyBhY2Vzc28uJyl7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGhpcy5fdmlldy5wdXNoQWx0ZXJhY2FvU2VuaGEobWF0cmljdWxhKTsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgdGhpcy5fdmlldy5wdXNoTWFpbigpOwogICAgICAgICAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vICAgICAgIHRoaXMuX3ZpZXcuc2hvd01zZyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICB9KS5jYXRjaCgoZTogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKQogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuX3ZpZXcuc2hvd01zZyhlKQogICAgICAgICAgICAgICAgLy8gICB9KQoKICAgICAgICAgICAgICAgIGlmIChsb2dpbi5tYXRyaWN1bGEgPT0gIk1vbmlxdWUiICYmIGxvZ2luLnNlbmhhID09ICIxMjMiKSB7CiAgICAgICAgICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJMb2dhZG8iLCAidHJ1ZSIpOwogICAgICAgICAgICAgICAgICBTdG9yYWdlLnNhbHZhcigiU2Vzc2lvbiIsICIxMjMiKTsKICAgICAgICAgICAgICAgICAgU3RvcmFnZS5zYWx2YXIoIlVzZXIiLCAiMTIzIik7CiAgICAgICAgICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJDb2xhYm9yYWRvciIsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICBpc1N1cGVyOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG5vbWU6ICJNb25pcXVlIgogICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuUG9ydGFsQ29tcHJhc1Nlc3Npb24gPSAiMTIzIjsKCiAgICAgICAgICAgICAgICAgIHRoaXMuX3ZpZXcucHVzaE1haW4oKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gbG9naW4oX3gsIF94MikgewogICAgICAgIHJldHVybiBfbG9naW4uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvZ2luOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY2FycmVnYVVzdWFyaW9QZXJtaXNzb2VzQWNlc3NvcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NhcnJlZ2FVc3VhcmlvUGVybWlzc29lc0FjZXNzb3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKG1hdHJpY3VsYSkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLl92aWV3LmxvYWRpbmcodHJ1ZSk7IC8vQ0FSUkVHQSBFRElUQVIKCgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCgiVXN1YXJpby91c3VhcmlvUGVybWlzc2FvQWNlc3Nvcy8iICsgbWF0cmljdWxhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBTdG9yYWdlLnNhbHZhcigiQWNlc3NvcyIsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwoKICAgICAgICAgICAgICAgICAgX3RoaXMuX3ZpZXcuc2hvd01zZyhlKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjYXJyZWdhVXN1YXJpb1Blcm1pc3NvZXNBY2Vzc29zKF94MykgewogICAgICAgIHJldHVybiBfY2FycmVnYVVzdWFyaW9QZXJtaXNzb2VzQWNlc3Nvcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY2FycmVnYVVzdWFyaW9QZXJtaXNzb2VzQWNlc3NvczsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIExvZ2luQ29udHJvbGxlcjsKfSgpOwoKdmFyIExvZ2luID0gZnVuY3Rpb24gTG9naW4obWF0cmljdWxhLCBzZW5oYSkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dpbik7CgogIHRoaXMubWF0cmljdWxhID0gbWF0cmljdWxhOwogIHRoaXMuc2VuaGEgPSBzZW5oYTsKfTs="},{"version":3,"sources":["C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\LoginController.ts"],"names":[],"mappings":";;;;AACA,OAAO,KAAP,MAAkB,kBAAlB;AACA,SAAS,OAAT,QAAwB,0BAAxB;AACA,WAAa,eAAb;AAGE,2BAAY,IAAZ,EAA4B;AAAA;;AAC1B,SAAK,KAAL,GAAa,IAAb;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,OAAzB;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,EAA1B;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,MAAf,EAAuB,EAAvB;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,aAAf,EAA8B,IAAI,CAAC,SAAL,CAAe;AAAE,MAAA,MAAM,EAAE;AAAV,KAAf,CAA9B;AACD;;AATH;AAAA;AAAA;AAAA,4FAWc,SAXd,EAWiC,KAXjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAYI,qBAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,EAZJ,CAcI;;;AACI,gBAAA,KAfR,GAegB,IAAI,KAAJ,CAAU,SAAV,EAAqB,KAArB,CAfhB,EAiBE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE,oBAAI,KAAK,CAAC,SAAN,IAAmB,SAAnB,IAAgC,KAAK,CAAC,KAAN,IAAe,KAAnD,EAA0D;AACxD,kBAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,MAAzB;AACA,kBAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,KAA1B;AACA,kBAAA,OAAO,CAAC,MAAR,CAAe,MAAf,EAAuB,KAAvB;AACA,kBAAA,OAAO,CAAC,MAAR,CACE,aADF,EAEE,IAAI,CAAC,SAAL,CAAe;AAAE,oBAAA,OAAO,EAAE,IAAX;AAAiB,oBAAA,IAAI,EAAE;AAAvB,mBAAf,CAFF;AAIA,kBAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,oBAAvB,GAA8C,KAA9C;;AACA,uBAAK,KAAL,CAAW,QAAX;AACD;;AAED,qBAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AAzDJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uHA4DwC,SA5DxC;AAAA;;AAAA;AAAA;AAAA;AAAA;AA8DI,qBAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,EA9DJ,CA+DI;;;AA/DJ;AAAA,uBAgEU,KAAK,CACR,GADG,CACC,qCAAqC,SADtC,EAEH,IAFG,CAEE,UAAC,QAAD,EAAkB;AAEtB,kBAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,IAAI,CAAC,SAAL,CAAe,QAAQ,CAAC,IAAxB,CAA1B;AAED,iBANG,EAOH,KAPG,CAOG,UAAC,CAAD,EAAW;AAChB,kBAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;;AACE,kBAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB;AACH,iBAVG,CAhEV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;IA+EM,K,GAGJ,eAAY,SAAZ,EAA+B,KAA/B,EAA4C;AAAA;;AAC1C,OAAK,SAAL,GAAiB,SAAjB;AACA,OAAK,KAAL,GAAa,KAAb;AACD,C","sourcesContent":["import { ILoginView, ILoginController } from \"../contracts/LoginContract\";\r\nimport axios from \"../plugins/axios\";\r\nimport { Storage } from \"../configuration/storage\";\r\nexport class LoginController implements ILoginController {\r\n  _view: ILoginView;\r\n\r\n  constructor(view: ILoginView) {\r\n    this._view = view;\r\n    Storage.salvar(\"Logado\", \"false\");\r\n    Storage.salvar(\"Session\", \"\");\r\n    Storage.salvar(\"User\", \"\");\r\n    Storage.salvar(\"Colaborador\", JSON.stringify({ codigo: \"\" }));\r\n  }\r\n\r\n  async login(matricula: string, senha: string) {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha);\r\n\r\n  //  await axios.post('Login', login).then(async (response: any) => {\r\n  //     this._view.loading(false)\r\n  //     if (response.data.sucesso == true) {\r\n  //       Storage.salvar(\"Logado\", \"true\")\r\n  //       Storage.salvar(\"Session\", response.data.message)\r\n  //       Storage.salvar(\"User\", response.data.tRetorno.matricula)\r\n  //       Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n  //       await this.carregaUsuarioPermissoesAcessos(matricula);\r\n  //       axios.defaults.headers.PortalComprasSession =\r\n  //         response.data.message;\r\n\r\n  //         if (response.data.message == 'Primeiro acesso.'){\r\n  //           this._view.pushAlteracaoSenha(matricula);\r\n\r\n  //         }else{\r\n  //           this._view.pushMain();\r\n  //         }\r\n          \r\n          \r\n\r\n  //     } else {\r\n  //       this._view.showMsg(response.data.message)\r\n  //     }\r\n  //   }).catch((e: any) => {\r\n  //     this._view.loading(false)\r\n  //     this._view.showMsg(e)\r\n  //   })\r\n\r\n    if (login.matricula == \"Monique\" && login.senha == \"123\") {\r\n      Storage.salvar(\"Logado\", \"true\");\r\n      Storage.salvar(\"Session\", \"123\");\r\n      Storage.salvar(\"User\", \"123\");\r\n      Storage.salvar(\r\n        \"Colaborador\",\r\n        JSON.stringify({ isSuper: true, nome: \"Monique\" })\r\n      );\r\n      axios.defaults.headers.PortalComprasSession = \"123\";\r\n      this._view.pushMain();\r\n    }\r\n\r\n    this._view.loading(false);\r\n  }\r\n\r\n  async carregaUsuarioPermissoesAcessos(matricula: string){\r\n\r\n    this._view.loading(true);\r\n    //CARREGA EDITAR\r\n    await axios\r\n      .get(\"Usuario/usuarioPermissaoAcessos/\" + matricula)\r\n      .then((response: any) => {\r\n        \r\n        Storage.salvar(\"Acessos\", JSON.stringify(response.data))\r\n        \r\n      })\r\n      .catch((e: any) => {\r\n        console.log(e);\r\n          this._view.showMsg(e);\r\n      });\r\n\r\n  }\r\n}\r\n\r\nclass Login {\r\n  matricula: string;\r\n  senha: string;\r\n  constructor(matricula: string, senha: string) {\r\n    this.matricula = matricula;\r\n    this.senha = senha;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}