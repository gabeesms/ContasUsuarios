{"remainingRequest":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts","dependencies":[{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts","mtime":1595176753888},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IGF4aW9zIGZyb20gIi4uL3BsdWdpbnMvYXhpb3MiOwppbXBvcnQgeyBTdG9yYWdlIH0gZnJvbSAiLi4vY29uZmlndXJhdGlvbi9zdG9yYWdlIjsKZXhwb3J0IHZhciBBbHRlcmFjYW9TZW5oYUNvbnRyb2xsZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEFsdGVyYWNhb1NlbmhhQ29udHJvbGxlcih2aWV3KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQWx0ZXJhY2FvU2VuaGFDb250cm9sbGVyKTsKCiAgICB0aGlzLl92aWV3ID0gdmlldzsKICB9CgogIF9jcmVhdGVDbGFzcyhBbHRlcmFjYW9TZW5oYUNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICJsb2dpbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW4obWF0cmljdWxhLCBzZW5oYSwgbm92YVNlbmhhKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcodHJ1ZSk7IC8vUHJvY2Vzc2FtZW50bwoKCiAgICAgIHZhciBsb2dpbiA9IG5ldyBMb2dpbihtYXRyaWN1bGEsIHNlbmhhLCBub3ZhU2VuaGEpOwogICAgICBheGlvcy5wb3N0KCdMb2dpbicsIGxvZ2luKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNlc3NvID09IHRydWUpIHsKICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJMb2dhZG8iLCAidHJ1ZSIpOwogICAgICAgICAgU3RvcmFnZS5zYWx2YXIoIlNlc3Npb24iLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpOyAvL1N0b3JhZ2Uuc2FsdmFyKCJVc2VyIiwgcmVzcG9uc2UuZGF0YS50UmV0b3Juby5jb2RpZ28pCiAgICAgICAgICAvL1N0b3JhZ2Uuc2FsdmFyKCJDb2xhYm9yYWRvciIsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEudFJldG9ybm8pKQoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gJ1ByaW1laXJvIGFjZXNzby4nKSB7CiAgICAgICAgICAgIF90aGlzLmFsdGVyYXJTZW5oYUxvZ2luKG1hdHJpY3VsYSwgc2VuaGEsIG5vdmFTZW5oYSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAnRnVuY2lvbmFyaW8gY29tIHBlcm1pc3NhbyBkZSBhY2Vzc28uJykgewogICAgICAgICAgICBfdGhpcy5hbHRlcmFyU2VuaGFMb2dpbihtYXRyaWN1bGEsIHNlbmhhLCBub3ZhU2VuaGEpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBfdGhpcy5fdmlldy5zaG93TXNnKGUpOwogICAgICB9KTsKCiAgICAgIHRoaXMuX3ZpZXcubG9hZGluZyhmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWx0ZXJhclNlbmhhTG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFsdGVyYXJTZW5oYUxvZ2luKG1hdHJpY3VsYSwgc2VuaGEsIG5vdmFTZW5oYSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuX3ZpZXcubG9hZGluZyh0cnVlKTsgLy9Qcm9jZXNzYW1lbnRvCgoKICAgICAgdmFyIGxvZ2luID0gbmV3IExvZ2luKG1hdHJpY3VsYSwgc2VuaGEsIG5vdmFTZW5oYSk7CiAgICAgIGF4aW9zLnB1dCgnTG9naW4vYWx0ZXJhY2Fvc2VuaGEnLCBsb2dpbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIuX3ZpZXcubG9hZGluZyhmYWxzZSk7CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Vzc28gPT0gdHJ1ZSkgewogICAgICAgICAgU3RvcmFnZS5zYWx2YXIoIkxvZ2FkbyIsICJ0cnVlIik7CiAgICAgICAgICBTdG9yYWdlLnNhbHZhcigiU2Vzc2lvbiIsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7IC8vU3RvcmFnZS5zYWx2YXIoIlVzZXIiLCByZXNwb25zZS5kYXRhLnRSZXRvcm5vLmNvZGlnbykKICAgICAgICAgIC8vU3RvcmFnZS5zYWx2YXIoIkNvbGFib3JhZG9yIiwgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS50UmV0b3JubykpCgogICAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2cocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKCiAgICAgICAgICBfdGhpczIuX3ZpZXcucHVzaE1haW4oKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2cocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMyLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBfdGhpczIuX3ZpZXcuc2hvd01zZyhlKTsKICAgICAgfSk7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEFsdGVyYWNhb1NlbmhhQ29udHJvbGxlcjsKfSgpOwoKdmFyIExvZ2luID0gZnVuY3Rpb24gTG9naW4obWF0cmljdWxhLCBzZW5oYSwgbm92YVNlbmhhKSB7CiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvZ2luKTsKCiAgdGhpcy5tYXRyaWN1bGEgPSBtYXRyaWN1bGE7CiAgdGhpcy5zZW5oYSA9IHNlbmhhOwogIHRoaXMubm92YVNlbmhhID0gbm92YVNlbmhhOwp9Ow=="},{"version":3,"sources":["C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts"],"names":[],"mappings":"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","sourcesContent":["import { IAlteracaoSenhaView, IAlteracaoSenhaController } from \"../contracts/AlteracaoSenhaContract\";\r\nimport axios from \"../plugins/axios\";\r\nimport { Storage } from \"../configuration/storage\";\r\nexport class AlteracaoSenhaController implements IAlteracaoSenhaController {\r\n  _view: IAlteracaoSenhaView;\r\n\r\n  constructor(view: IAlteracaoSenhaView) {\r\n    this._view = view;\r\n\r\n  }\r\n\r\n  login(matricula: string, senha: string, novaSenha: string): void {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha, novaSenha);\r\n\r\n    axios.post('Login', login).then((response: any) => {\r\n      this._view.loading(false)\r\n      if (response.data.sucesso == true) {\r\n        Storage.salvar(\"Logado\", \"true\")\r\n        Storage.salvar(\"Session\", response.data.message)\r\n        //Storage.salvar(\"User\", response.data.tRetorno.codigo)\r\n        //Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n        \r\n        if (response.data.message == 'Primeiro acesso.') {\r\n          this.alterarSenhaLogin(matricula, senha, novaSenha);\r\n        }\r\n\r\n        if (response.data.message == 'Funcionario com permissao de acesso.') {\r\n          this.alterarSenhaLogin(matricula, senha, novaSenha);\r\n        }\r\n\r\n      } else {\r\n        this._view.showMsg(response.data.message)\r\n      }\r\n    }).catch((e: any) => {\r\n      this._view.loading(false)\r\n      this._view.showMsg(e)\r\n    })\r\n    this._view.loading(false);\r\n  }\r\n\r\n  alterarSenhaLogin(matricula: string, senha: string, novaSenha: string): void {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha, novaSenha);\r\n\r\n    axios.put('Login/alteracaosenha', login).then((response: any) => {\r\n      this._view.loading(false)\r\n      if (response.data.sucesso == true) {\r\n        Storage.salvar(\"Logado\", \"true\")\r\n        Storage.salvar(\"Session\", response.data.message)\r\n        //Storage.salvar(\"User\", response.data.tRetorno.codigo)\r\n        //Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n        this._view.showMsg(response.data.message)\r\n        this._view.pushMain();\r\n      } else {\r\n        this._view.showMsg(response.data.message)\r\n      }\r\n    }).catch((e: any) => {\r\n      this._view.loading(false)\r\n      this._view.showMsg(e)\r\n    })\r\n    this._view.loading(false);\r\n  }\r\n}\r\n\r\nclass Login {\r\n  matricula: string;\r\n  senha: string;\r\n  novaSenha: string;\r\n  constructor(matricula: string, senha: string, novaSenha: string) {\r\n    this.matricula = matricula;\r\n    this.senha = senha;\r\n    this.novaSenha = novaSenha;\r\n  }\r\n\r\n}\r\n\r\n"],"sourceRoot":""}]}