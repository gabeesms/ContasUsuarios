{"remainingRequest":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\LoginController.ts","dependencies":[{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\LoginController.ts","mtime":1595176753888},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L3NtYXJ0cG9pbnQvc21hcnRwb2ludC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L3dhbXA2NC93d3cvc21hcnRwb2ludC9zbWFydHBvaW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICIuLi9wbHVnaW5zL2F4aW9zIjsKaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gIi4uL2NvbmZpZ3VyYXRpb24vc3RvcmFnZSI7CmV4cG9ydCB2YXIgTG9naW5Db250cm9sbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBMb2dpbkNvbnRyb2xsZXIodmlldykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvZ2luQ29udHJvbGxlcik7CgogICAgdGhpcy5fdmlldyA9IHZpZXc7CiAgICBTdG9yYWdlLnNhbHZhcigiTG9nYWRvIiwgImZhbHNlIik7CiAgICBTdG9yYWdlLnNhbHZhcigiU2Vzc2lvbiIsICIiKTsKICAgIFN0b3JhZ2Uuc2FsdmFyKCJVc2VyIiwgIiIpOwogICAgU3RvcmFnZS5zYWx2YXIoIkNvbGFib3JhZG9yIiwgSlNPTi5zdHJpbmdpZnkoewogICAgICBjb2RpZ286ICIiCiAgICB9KSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTG9naW5Db250cm9sbGVyLCBbewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luKG1hdHJpY3VsYSwgc2VuaGEpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuX3ZpZXcubG9hZGluZyh0cnVlKTsgLy9Qcm9jZXNzYW1lbnRvCgoKICAgICAgdmFyIGxvZ2luID0gbmV3IExvZ2luKG1hdHJpY3VsYSwgc2VuaGEpOwogICAgICBheGlvcy5wb3N0KCdMb2dpbicsIGxvZ2luKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNlc3NvID09IHRydWUpIHsKICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJMb2dhZG8iLCAidHJ1ZSIpOwogICAgICAgICAgU3RvcmFnZS5zYWx2YXIoIlNlc3Npb24iLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpOyAvL1N0b3JhZ2Uuc2FsdmFyKCJVc2VyIiwgcmVzcG9uc2UuZGF0YS50UmV0b3Juby5jb2RpZ28pCiAgICAgICAgICAvL1N0b3JhZ2Uuc2FsdmFyKCJDb2xhYm9yYWRvciIsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEudFJldG9ybm8pKQoKICAgICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuUG9ydGFsQ29tcHJhc1Nlc3Npb24gPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CgogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSAnUHJpbWVpcm8gYWNlc3NvLicpIHsKICAgICAgICAgICAgX3RoaXMuX3ZpZXcucHVzaEFsdGVyYWNhb1NlbmhhKG1hdHJpY3VsYSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fdmlldy5wdXNoTWFpbigpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBfdGhpcy5fdmlldy5zaG93TXNnKGUpOwogICAgICB9KTsgLy8gaWYgKGxvZ2luLm1hdHJpY3VsYSA9PSAiTW9uaXF1ZSIgJiYgbG9naW4uc2VuaGEgPT0gIjEyMyIpIHsKICAgICAgLy8gICBTdG9yYWdlLnNhbHZhcigiTG9nYWRvIiwgInRydWUiKTsKICAgICAgLy8gICBTdG9yYWdlLnNhbHZhcigiU2Vzc2lvbiIsICIxMjMiKTsKICAgICAgLy8gICBTdG9yYWdlLnNhbHZhcigiVXNlciIsICIxMjMiKTsKICAgICAgLy8gICBTdG9yYWdlLnNhbHZhcigKICAgICAgLy8gICAgICJDb2xhYm9yYWRvciIsCiAgICAgIC8vICAgICBKU09OLnN0cmluZ2lmeSh7IGlzU3VwZXI6IHRydWUsIG5vbWU6ICJNb25pcXVlIiB9KQogICAgICAvLyAgICk7CiAgICAgIC8vICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5Qb3J0YWxDb21wcmFzU2Vzc2lvbiA9ICIxMjMiOwogICAgICAvLyAgIHRoaXMuX3ZpZXcucHVzaE1haW4oKTsKICAgICAgLy8gfQoKICAgICAgdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBMb2dpbkNvbnRyb2xsZXI7Cn0oKTsKCnZhciBMb2dpbiA9IGZ1bmN0aW9uIExvZ2luKG1hdHJpY3VsYSwgc2VuaGEpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW4pOwoKICB0aGlzLm1hdHJpY3VsYSA9IG1hdHJpY3VsYTsKICB0aGlzLnNlbmhhID0gc2VuaGE7Cn07"},{"version":3,"sources":["C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\LoginController.ts"],"names":[],"mappings":";;AACA,OAAO,KAAP,MAAkB,kBAAlB;AACA,SAAS,OAAT,QAAwB,0BAAxB;AACA,WAAa,eAAb;AAGE,2BAAY,IAAZ,EAA4B;AAAA;;AAC1B,SAAK,KAAL,GAAa,IAAb;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,OAAzB;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,EAA1B;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,MAAf,EAAuB,EAAvB;AACA,IAAA,OAAO,CAAC,MAAR,CAAe,aAAf,EAA8B,IAAI,CAAC,SAAL,CAAe;AAAE,MAAA,MAAM,EAAE;AAAV,KAAf,CAA9B;AACD;;AATH;AAAA;AAAA,0BAWQ,SAXR,EAW2B,KAX3B,EAWwC;AAAA;;AACpC,WAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB,EADoC,CAGpC;;;AACA,UAAI,KAAK,GAAG,IAAI,KAAJ,CAAU,SAAV,EAAqB,KAArB,CAAZ;AAEA,MAAA,KAAK,CAAC,IAAN,CAAW,OAAX,EAAoB,KAApB,EAA2B,IAA3B,CAAgC,UAAC,QAAD,EAAkB;AAChD,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAd,IAAyB,IAA7B,EAAmC;AACjC,UAAA,OAAO,CAAC,MAAR,CAAe,QAAf,EAAyB,MAAzB;AACA,UAAA,OAAO,CAAC,MAAR,CAAe,SAAf,EAA0B,QAAQ,CAAC,IAAT,CAAc,OAAxC,EAFiC,CAGjC;AACA;;AACA,UAAA,KAAK,CAAC,QAAN,CAAe,OAAf,CAAuB,oBAAvB,GACE,QAAQ,CAAC,IAAT,CAAc,OADhB;;AAGE,cAAI,QAAQ,CAAC,IAAT,CAAc,OAAd,IAAyB,kBAA7B,EAAgD;AAC9C,YAAA,KAAI,CAAC,KAAL,CAAW,kBAAX,CAA8B,SAA9B;AAED,WAHD,MAGK;AACH,YAAA,KAAI,CAAC,KAAL,CAAW,QAAX;AACD;AAIJ,SAjBD,MAiBO;AACL,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,QAAQ,CAAC,IAAT,CAAc,OAAjC;AACD;AACF,OAtBD,EAsBG,KAtBH,CAsBS,UAAC,CAAD,EAAW;AAClB,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB;AACD,OAzBD,EANoC,CAiCpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;AACD;AAzDH;;AAAA;AAAA;;IA4DM,K,GAGJ,eAAY,SAAZ,EAA+B,KAA/B,EAA4C;AAAA;;AAC1C,OAAK,SAAL,GAAiB,SAAjB;AACA,OAAK,KAAL,GAAa,KAAb;AACD,C","sourcesContent":["import { ILoginView, ILoginController } from \"../contracts/LoginContract\";\r\nimport axios from \"../plugins/axios\";\r\nimport { Storage } from \"../configuration/storage\";\r\nexport class LoginController implements ILoginController {\r\n  _view: ILoginView;\r\n\r\n  constructor(view: ILoginView) {\r\n    this._view = view;\r\n    Storage.salvar(\"Logado\", \"false\");\r\n    Storage.salvar(\"Session\", \"\");\r\n    Storage.salvar(\"User\", \"\");\r\n    Storage.salvar(\"Colaborador\", JSON.stringify({ codigo: \"\" }));\r\n  }\r\n\r\n  login(matricula: string, senha: string): void {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha);\r\n\r\n    axios.post('Login', login).then((response: any) => {\r\n      this._view.loading(false)\r\n      if (response.data.sucesso == true) {\r\n        Storage.salvar(\"Logado\", \"true\")\r\n        Storage.salvar(\"Session\", response.data.message)\r\n        //Storage.salvar(\"User\", response.data.tRetorno.codigo)\r\n        //Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n        axios.defaults.headers.PortalComprasSession =\r\n          response.data.message;\r\n\r\n          if (response.data.message == 'Primeiro acesso.'){\r\n            this._view.pushAlteracaoSenha(matricula);\r\n\r\n          }else{\r\n            this._view.pushMain();\r\n          }\r\n          \r\n          \r\n\r\n      } else {\r\n        this._view.showMsg(response.data.message)\r\n      }\r\n    }).catch((e: any) => {\r\n      this._view.loading(false)\r\n      this._view.showMsg(e)\r\n    })\r\n\r\n    // if (login.matricula == \"Monique\" && login.senha == \"123\") {\r\n    //   Storage.salvar(\"Logado\", \"true\");\r\n    //   Storage.salvar(\"Session\", \"123\");\r\n    //   Storage.salvar(\"User\", \"123\");\r\n    //   Storage.salvar(\r\n    //     \"Colaborador\",\r\n    //     JSON.stringify({ isSuper: true, nome: \"Monique\" })\r\n    //   );\r\n    //   axios.defaults.headers.PortalComprasSession = \"123\";\r\n    //   this._view.pushMain();\r\n    // }\r\n\r\n    this._view.loading(false);\r\n  }\r\n}\r\n\r\nclass Login {\r\n  matricula: string;\r\n  senha: string;\r\n  constructor(matricula: string, senha: string) {\r\n    this.matricula = matricula;\r\n    this.senha = senha;\r\n  }\r\n}\r\n"],"sourceRoot":""}]}