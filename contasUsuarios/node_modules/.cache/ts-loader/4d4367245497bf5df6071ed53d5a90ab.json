{"remainingRequest":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts","dependencies":[{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts","mtime":1595176753888},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L3NtYXJ0cG9pbnQvc21hcnRwb2ludC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L3dhbXA2NC93d3cvc21hcnRwb2ludC9zbWFydHBvaW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICIuLi9wbHVnaW5zL2F4aW9zIjsKaW1wb3J0IHsgU3RvcmFnZSB9IGZyb20gIi4uL2NvbmZpZ3VyYXRpb24vc3RvcmFnZSI7CmV4cG9ydCB2YXIgQWx0ZXJhY2FvU2VuaGFDb250cm9sbGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBbHRlcmFjYW9TZW5oYUNvbnRyb2xsZXIodmlldykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFsdGVyYWNhb1NlbmhhQ29udHJvbGxlcik7CgogICAgdGhpcy5fdmlldyA9IHZpZXc7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQWx0ZXJhY2FvU2VuaGFDb250cm9sbGVyLCBbewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ2luKG1hdHJpY3VsYSwgc2VuaGEsIG5vdmFTZW5oYSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5fdmlldy5sb2FkaW5nKHRydWUpOyAvL1Byb2Nlc3NhbWVudG8KCgogICAgICB2YXIgbG9naW4gPSBuZXcgTG9naW4obWF0cmljdWxhLCBzZW5oYSwgbm92YVNlbmhhKTsKICAgICAgYXhpb3MucG9zdCgnTG9naW4nLCBsb2dpbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjZXNzbyA9PSB0cnVlKSB7CiAgICAgICAgICBTdG9yYWdlLnNhbHZhcigiTG9nYWRvIiwgInRydWUiKTsKICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJTZXNzaW9uIiwgcmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsgLy9TdG9yYWdlLnNhbHZhcigiVXNlciIsIHJlc3BvbnNlLmRhdGEudFJldG9ybm8uY29kaWdvKQogICAgICAgICAgLy9TdG9yYWdlLnNhbHZhcigiQ29sYWJvcmFkb3IiLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLnRSZXRvcm5vKSkKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5tZXNzYWdlID09ICdQcmltZWlybyBhY2Vzc28uJykgewogICAgICAgICAgICBfdGhpcy5hbHRlcmFyU2VuaGFMb2dpbihtYXRyaWN1bGEsIHNlbmhhLCBub3ZhU2VuaGEpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gJ0Z1bmNpb25hcmlvIGNvbSBwZXJtaXNzYW8gZGUgYWNlc3NvLicpIHsKICAgICAgICAgICAgX3RoaXMuYWx0ZXJhclNlbmhhTG9naW4obWF0cmljdWxhLCBzZW5oYSwgbm92YVNlbmhhKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuX3ZpZXcuc2hvd01zZyhyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBfdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgX3RoaXMuX3ZpZXcuc2hvd01zZyhlKTsKICAgICAgfSk7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwogICAgfQogIH0sIHsKICAgIGtleTogImFsdGVyYXJTZW5oYUxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhbHRlcmFyU2VuaGFMb2dpbihtYXRyaWN1bGEsIHNlbmhhLCBub3ZhU2VuaGEpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcodHJ1ZSk7IC8vUHJvY2Vzc2FtZW50bwoKCiAgICAgIHZhciBsb2dpbiA9IG5ldyBMb2dpbihtYXRyaWN1bGEsIHNlbmhhLCBub3ZhU2VuaGEpOwogICAgICBheGlvcy5wdXQoJ0xvZ2luL2FsdGVyYWNhb3NlbmhhJywgbG9naW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNlc3NvID09IHRydWUpIHsKICAgICAgICAgIFN0b3JhZ2Uuc2FsdmFyKCJMb2dhZG8iLCAidHJ1ZSIpOwogICAgICAgICAgU3RvcmFnZS5zYWx2YXIoIlNlc3Npb24iLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UpOyAvL1N0b3JhZ2Uuc2FsdmFyKCJVc2VyIiwgcmVzcG9uc2UuZGF0YS50UmV0b3Juby5jb2RpZ28pCiAgICAgICAgICAvL1N0b3JhZ2Uuc2FsdmFyKCJDb2xhYm9yYWRvciIsIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmRhdGEudFJldG9ybm8pKQoKICAgICAgICAgIF90aGlzMi5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CgogICAgICAgICAgX3RoaXMyLl92aWV3LnB1c2hNYWluKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMi5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2coZSk7CiAgICAgIH0pOwoKICAgICAgdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBbHRlcmFjYW9TZW5oYUNvbnRyb2xsZXI7Cn0oKTsKCnZhciBMb2dpbiA9IGZ1bmN0aW9uIExvZ2luKG1hdHJpY3VsYSwgc2VuaGEsIG5vdmFTZW5oYSkgewogIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2dpbik7CgogIHRoaXMubWF0cmljdWxhID0gbWF0cmljdWxhOwogIHRoaXMuc2VuaGEgPSBzZW5oYTsKICB0aGlzLm5vdmFTZW5oYSA9IG5vdmFTZW5oYTsKfTs="},{"version":3,"sources":["C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\AlteracaoSenhaController.ts"],"names":[],"mappings":"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","sourcesContent":["import { IAlteracaoSenhaView, IAlteracaoSenhaController } from \"../contracts/AlteracaoSenhaContract\";\r\nimport axios from \"../plugins/axios\";\r\nimport { Storage } from \"../configuration/storage\";\r\nexport class AlteracaoSenhaController implements IAlteracaoSenhaController {\r\n  _view: IAlteracaoSenhaView;\r\n\r\n  constructor(view: IAlteracaoSenhaView) {\r\n    this._view = view;\r\n\r\n  }\r\n\r\n  login(matricula: string, senha: string, novaSenha: string): void {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha, novaSenha);\r\n\r\n    axios.post('Login', login).then((response: any) => {\r\n      this._view.loading(false)\r\n      if (response.data.sucesso == true) {\r\n        Storage.salvar(\"Logado\", \"true\")\r\n        Storage.salvar(\"Session\", response.data.message)\r\n        //Storage.salvar(\"User\", response.data.tRetorno.codigo)\r\n        //Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n        \r\n        if (response.data.message == 'Primeiro acesso.') {\r\n          this.alterarSenhaLogin(matricula, senha, novaSenha);\r\n        }\r\n\r\n        if (response.data.message == 'Funcionario com permissao de acesso.') {\r\n          this.alterarSenhaLogin(matricula, senha, novaSenha);\r\n        }\r\n\r\n      } else {\r\n        this._view.showMsg(response.data.message)\r\n      }\r\n    }).catch((e: any) => {\r\n      this._view.loading(false)\r\n      this._view.showMsg(e)\r\n    })\r\n    this._view.loading(false);\r\n  }\r\n\r\n  alterarSenhaLogin(matricula: string, senha: string, novaSenha: string): void {\r\n    this._view.loading(true);\r\n\r\n    //Processamento\r\n    let login = new Login(matricula, senha, novaSenha);\r\n\r\n    axios.put('Login/alteracaosenha', login).then((response: any) => {\r\n      this._view.loading(false)\r\n      if (response.data.sucesso == true) {\r\n        Storage.salvar(\"Logado\", \"true\")\r\n        Storage.salvar(\"Session\", response.data.message)\r\n        //Storage.salvar(\"User\", response.data.tRetorno.codigo)\r\n        //Storage.salvar(\"Colaborador\", JSON.stringify(response.data.tRetorno))\r\n        this._view.showMsg(response.data.message)\r\n        this._view.pushMain();\r\n      } else {\r\n        this._view.showMsg(response.data.message)\r\n      }\r\n    }).catch((e: any) => {\r\n      this._view.loading(false)\r\n      this._view.showMsg(e)\r\n    })\r\n    this._view.loading(false);\r\n  }\r\n}\r\n\r\nclass Login {\r\n  matricula: string;\r\n  senha: string;\r\n  novaSenha: string;\r\n  constructor(matricula: string, senha: string, novaSenha: string) {\r\n    this.matricula = matricula;\r\n    this.senha = senha;\r\n    this.novaSenha = novaSenha;\r\n  }\r\n\r\n}\r\n\r\n"],"sourceRoot":""}]}