{"remainingRequest":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoListaController.ts","dependencies":[{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoListaController.ts","mtime":1597189431265},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L3dhbXA2NC93d3cvc21hcnRwb2ludC9zbWFydHBvaW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovd2FtcDY0L3d3dy9zbWFydHBvaW50L3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IGF4aW9zIGZyb20gIi4uLy4uL3BsdWdpbnMvYXhpb3MiOwppbXBvcnQgeyBIZWFkZXJBY3Rpb24gfSBmcm9tICIuLi8uLi9tb2RlbHMvaGVhZGVyIjsKZXhwb3J0IHZhciBDZW50cm9DdXN0b0xpc3RhQ29udHJvbGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ2VudHJvQ3VzdG9MaXN0YUNvbnRyb2xsZXIodmlldykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENlbnRyb0N1c3RvTGlzdGFDb250cm9sbGVyKTsKCiAgICB0aGlzLl92aWV3ID0gdmlldzsKICB9CgogIF9jcmVhdGVDbGFzcyhDZW50cm9DdXN0b0xpc3RhQ29udHJvbGxlciwgW3sKICAgIGtleTogImNhcnJlZ2FySXRlbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhcnJlZ2FySXRlbnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcodHJ1ZSk7CgogICAgICB2YXIgY2VudHJvQ3VzdG8gPSBbXTsKICAgICAgYXhpb3MuZ2V0KCdDZW50cm9DdXN0by9jZW50cm9jdXN0b2xvY2FsJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgbG9jYWwgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGxvY2FsLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgIGVsZW1lbnQuYWNvZXMgPSBbbmV3IEhlYWRlckFjdGlvbigibWRpLXBlbmNpbCIsICJwcmltYXJ5IiwgIlRlc3RlIiwgImVkaXRhckl0ZW0iLCAiMjAwcHgiKV0sIGVsZW1lbnQuc2V0b3IgPSAiUyIsIGNlbnRyb0N1c3RvLnB1c2goZWxlbWVudCk7CiAgICAgICAgfSk7CiAgICAgICAgYXhpb3MuZ2V0KCdDb25zdWx0YXNCYXNlRVJQQ29udHJvbGxlci9jZW50cm9jdXN0by8nKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgdmFyIGVycCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICBlcnAuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBlbGVtZW50LmFjb2VzID0gW25ldyBIZWFkZXJBY3Rpb24oIm1kaS1wZW5jaWwiLCAicHJpbWFyeSIsICJUZXN0ZSIsICJlZGl0YXJJdGVtIiwgIjIwMHB4IildLCBlbGVtZW50LnNldG9yID0gIk4iOwogICAgICAgICAgfSk7CiAgICAgICAgICBlcnAuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICBpZiAoIV90aGlzLnZlcmlmaWNhQ2VudHJvQ3VzdG9Mb2NhbChlbGVtZW50LmNvZGlnby50cmltKCksIGxvY2FsKSkgewogICAgICAgICAgICAgIGNlbnRyb0N1c3RvLnB1c2goZWxlbWVudCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICAgIF90aGlzLl92aWV3LnNob3dJdGVucyhjZW50cm9DdXN0byk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIF90aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwoKICAgICAgICAgIF90aGlzLl92aWV3LnNob3dNc2coZSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgX3RoaXMuX3ZpZXcubG9hZGluZyhmYWxzZSk7CgogICAgICAgIF90aGlzLl92aWV3LnNob3dNc2coZSk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInZlcmlmaWNhQ2VudHJvQ3VzdG9Mb2NhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmVyaWZpY2FDZW50cm9DdXN0b0xvY2FsKGNvZGlnbywgYXJyYXlMb2NhbCkgewogICAgICB2YXIgcmV0b3JubyA9IGZhbHNlOwogICAgICBhcnJheUxvY2FsLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICBpZiAoZWxlbWVudC5jb2RpZ28udHJpbSgpID09PSBjb2RpZ28udHJpbSgpKSB7CiAgICAgICAgICByZXRvcm5vID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmV0b3JubzsKICAgIH0KICB9XSk7CgogIHJldHVybiBDZW50cm9DdXN0b0xpc3RhQ29udHJvbGxlcjsKfSgpOw=="},{"version":3,"sources":["C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoListaController.ts"],"names":[],"mappings":";;;;;AACA,OAAO,KAAP,MAAkB,qBAAlB;AAGA,SAA6B,YAA7B,QAAiD,qBAAjD;AAGA,WAAa,0BAAb;AAII,sCAAY,IAAZ,EAAuC;AAAA;;AACnC,SAAK,KAAL,GAAa,IAAb;AACH;;AANL;AAAA;AAAA,oCAQiB;AAAA;;AACT,WAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;;AAEA,UAAI,WAAW,GAAQ,EAAvB;AAEA,MAAA,KAAK,CACA,GADL,CACS,8BADT,EAEK,IAFL,CAEU,UAAC,QAAD,EAAkB;AAEpB,YAAI,KAAK,GAAG,QAAQ,CAAC,IAArB;AAEA,QAAA,KAAK,CAAC,OAAN,CAAc,UAAC,OAAD,EAAqD;AAC/D,UAAA,OAAO,CAAC,KAAR,GAAgB,CACZ,IAAI,YAAJ,CAAiB,YAAjB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,YAAnD,EAAiE,OAAjE,CADY,CAAhB,EAKA,OAAO,CAAC,KAAR,GAAgB,GALhB,EAOA,WAAW,CAAC,IAAZ,CAAiB,OAAjB,CAPA;AAQH,SATD;AAWA,QAAA,KAAK,CACA,GADL,CACS,yCADT,EAEK,IAFL,CAEU,UAAC,QAAD,EAAkB;AACpB,cAAI,GAAG,GAAG,QAAQ,CAAC,IAAnB;AACA,UAAA,GAAG,CAAC,OAAJ,CAAY,UAAC,OAAD,EAAuD;AAC/D,YAAA,OAAO,CAAC,KAAR,GAAgB,CACZ,IAAI,YAAJ,CAAiB,YAAjB,EAA+B,SAA/B,EAA0C,OAA1C,EAAmD,YAAnD,EAAiE,OAAjE,CADY,CAAhB,EAKA,OAAO,CAAC,KAAR,GAAgB,GALhB;AAOH,WARD;AAWA,UAAA,GAAG,CAAC,OAAJ,CAAY,UAAC,OAAD,EAAiB;AAEzB,gBAAI,CAAC,KAAI,CAAC,wBAAL,CAA8B,OAAO,CAAC,MAAR,CAAe,IAAf,EAA9B,EAAqD,KAArD,CAAL,EAAiE;AAC7D,cAAA,WAAW,CAAC,IAAZ,CAAiB,OAAjB;AACH;AACJ,WALD;;AAQA,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,SAAX,CAAqB,WAArB;AACH,SAzBL,EAyBO,KAzBP,CAyBa,UAAC,CAAD,EAAW;AAChB,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB;AACH,SA5BL;AA8BH,OA/CL,EA+CO,KA/CP,CA+Ca,UAAC,CAAD,EAAW;AAChB,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,QAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB;AACH,OAlDL;AAmDH;AAhEL;AAAA;AAAA,6CAmE6B,MAnE7B,EAmE6C,UAnE7C,EAmE4D;AAEpD,UAAI,OAAO,GAAG,KAAd;AAEA,MAAA,UAAU,CAAC,OAAX,CAAmB,UAAC,OAAD,EAAiB;AAEhC,YAAI,OAAO,CAAC,MAAR,CAAe,IAAf,OAA0B,MAAM,CAAC,IAAP,EAA9B,EAA4C;AACxC,UAAA,OAAO,GAAG,IAAV;AACH;AACJ,OALD;AAOA,aAAO,OAAP;AACH;AA/EL;;AAAA;AAAA","sourcesContent":["import { ICentroCustoListaView, ICentroCustoListaController } from \"../../contracts/Cadastro/CentroCustoListaContract\";\r\nimport axios from \"../../plugins/axios\"\r\n\r\nimport { Storage } from \"../../configuration/storage\"\r\nimport { Header, HeaderIcon, HeaderAction } from \"../../models/header\";\r\nimport { Headers } from \"../../models/headers\";\r\n\r\nexport class CentroCustoListaController implements ICentroCustoListaController {\r\n\r\n    _view: ICentroCustoListaView\r\n\r\n    constructor(view: ICentroCustoListaView) {\r\n        this._view = view\r\n    }\r\n\r\n    carregarItens(): void {\r\n        this._view.loading(true)\r\n\r\n        let centroCusto: any = [];\r\n\r\n        axios\r\n            .get('CentroCusto/centrocustolocal')\r\n            .then((response: any) => {\r\n\r\n                let local = response.data;\r\n\r\n                local.forEach((element: { acoes: HeaderAction[]; setor: string}) => {\r\n                    element.acoes = [\r\n                        new HeaderAction(\"mdi-pencil\", \"primary\", \"Teste\", \"editarItem\", \"200px\"),\r\n                        //new HeaderAction(\"mdi-delete\", \"primary\", \"Teste\", \"deleteItem\", \"200px\")\r\n                    ],\r\n\r\n                    element.setor = \"S\",\r\n\r\n                    centroCusto.push(element);\r\n                });\r\n\r\n                axios\r\n                    .get('ConsultasBaseERPController/centrocusto/')\r\n                    .then((response: any) => {\r\n                        let erp = response.data;\r\n                        erp.forEach((element: { acoes: HeaderAction[]; setor: string  }) => {\r\n                            element.acoes = [\r\n                                new HeaderAction(\"mdi-pencil\", \"primary\", \"Teste\", \"editarItem\", \"200px\"),\r\n                                //new HeaderAction(\"mdi-delete\", \"primary\", \"Teste\", \"deleteItem\", \"200px\")\r\n                            ],\r\n\r\n                            element.setor = \"N\"\r\n                \r\n                        });\r\n                        \r\n\r\n                        erp.forEach((element: any) => {\r\n                            \r\n                            if (!this.verificaCentroCustoLocal(element.codigo.trim(), local)){\r\n                                centroCusto.push(element)\r\n                            }\r\n                        });\r\n                            \r\n                               \r\n                        this._view.loading(false)\r\n                        this._view.showItens(centroCusto)\r\n                    }).catch((e: any) => {\r\n                        this._view.loading(false)\r\n                        this._view.showMsg(e)\r\n                    })\r\n\r\n            }).catch((e: any) => {\r\n                this._view.loading(false)\r\n                this._view.showMsg(e)\r\n            })\r\n    }\r\n\r\n\r\n    verificaCentroCustoLocal(codigo: string, arrayLocal: any) {\r\n        \r\n        let retorno = false;\r\n\r\n        arrayLocal.forEach((element: any) => {\r\n            \r\n            if (element.codigo.trim() === codigo.trim()){\r\n                retorno = true\r\n            }\r\n        });\r\n\r\n        return retorno;\r\n    }\r\n\r\n\r\n}"],"sourceRoot":""}]}