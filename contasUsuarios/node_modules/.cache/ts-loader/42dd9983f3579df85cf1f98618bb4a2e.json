{"remainingRequest":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-3!C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoFormController.ts","dependencies":[{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoFormController.ts","mtime":1597191635310},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L3NtYXJ0cG9pbnQvc21hcnRwb2ludC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L3dhbXA2NC93d3cvc21hcnRwb2ludC9zbWFydHBvaW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICIuLi8uLi9wbHVnaW5zL2F4aW9zIjsKaW1wb3J0IHsgSGVhZGVyQWN0aW9uIH0gZnJvbSAiLi4vLi4vbW9kZWxzL2hlYWRlciI7CmV4cG9ydCB2YXIgQ2VudHJvQ3VzdG9Gb3JtQ29udHJvbGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gQ2VudHJvQ3VzdG9Gb3JtQ29udHJvbGxlcih2aWV3KSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2VudHJvQ3VzdG9Gb3JtQ29udHJvbGxlcik7CgogICAgdGhpcy5fbGlzdGEgPSBbewogICAgICBudW1lcm86ICIiLAogICAgICBwcm9kdXRvOiAiIiwKICAgICAgZGVzY3JpY2FvOiAiIiwKICAgICAgcXVhbnRpZGFkZTogIiIsCiAgICAgIGRhdGFOZWNlc3NpZGFkZTogIiIsCiAgICAgIHVtOiAiIiwKICAgICAganVzdGlmaWNhdGl2YTogIiIsCiAgICAgIGFjYW86IFtuZXcgSGVhZGVyQWN0aW9uKCIiLCAiIiwgIiIsICIiLCAiIildCiAgICB9XTsKICAgIHRoaXMuX3ZpZXcgPSB2aWV3OwogIH0KCiAgX2NyZWF0ZUNsYXNzKENlbnRyb0N1c3RvRm9ybUNvbnRyb2xsZXIsIFt7CiAgICBrZXk6ICJjYXJyZWdhckR0b3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhcnJlZ2FyRHRvcyhjb2RpZ28pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuX3ZpZXcubG9hZGluZyh0cnVlKTsKCiAgICAgIGlmIChjb2RpZ28gIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgLy9WRVJJRklDQSBTRSBKQSBFWElTVEUgQ0VOVFJPIERFIENVU1RPIENBREFTVFJBRE8KICAgICAgICBheGlvcy5nZXQoIkNlbnRyb0N1c3RvLyIgKyBjb2RpZ28pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBfdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAvL0NBUlJFR0EgREFET1MgQ0VOVFJPIERFIENVU1RPIFNFTEVDSU9OQURPCiAgICAgICAgICAgIGF4aW9zLmdldCgiQ29uc3VsdGFzQmFzZUVSUENvbnRyb2xsZXIvY2VudHJvY3VzdG8vIiArIGNvZGlnbykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBfdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgICAgICAgIF90aGlzLmNhcnJlZ2FyQ2F0ZWdvcmlhU2V0b3JlcygpOwoKICAgICAgICAgICAgICAgIF90aGlzLl92aWV3LnNob3dDZW50cm9DdXN0b0ZvclNhdmUocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwoKICAgICAgICAgICAgICBfdGhpcy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgICAgICAgX3RoaXMuX3ZpZXcuc2hvd01zZyhlLCAwKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5jYXJyZWdhckNhdGVnb3JpYVNldG9yZXMoKTsKCiAgICAgICAgICAgIF90aGlzLl92aWV3LnNob3dDZW50cm9DdXN0b0ZvckVkaXRhcihyZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY29uc29sZS5sb2coZSk7CgogICAgICAgICAgX3RoaXMuX3ZpZXcubG9hZGluZyhmYWxzZSk7CgogICAgICAgICAgX3RoaXMuX3ZpZXcuc2hvd01zZyhlLCAwKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLl92aWV3LmxvYWRpbmcoZmFsc2UpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2FsdmFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYWx2YXIoY2VudHJvQ3VzdG8pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLl92aWV3LmxvYWRpbmcodHJ1ZSk7CgogICAgICBheGlvcy5wb3N0KCJDZW50cm9DdXN0byIsIGNlbnRyb0N1c3RvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjZXNzbykgewogICAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2cocmVzcG9uc2UuZGF0YS5tZXNzYWdlLCAxKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2coIk7Do28gZm9pIHBvc3PDrXZlbCBzYWx2YXIgb3MgZGFkb3MgZG8gRnVuY2lvbsOhcmlvIiwgMCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMi5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgX3RoaXMyLl92aWV3LnNob3dNc2coZSwgMCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBjZW50cm9DdXN0bykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuX3ZpZXcubG9hZGluZyh0cnVlKTsKCiAgICAgIGF4aW9zLnB1dCgiQ2VudHJvQ3VzdG8vIiArIGlkLCBjZW50cm9DdXN0bykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczMuX3ZpZXcubG9hZGluZyhmYWxzZSk7CgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Vzc28pIHsKICAgICAgICAgIF90aGlzMy5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgMSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMy5fdmlldy5zaG93TXNnKHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgMCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIF90aGlzMy5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgX3RoaXMzLl92aWV3LnNob3dNc2coZSwgMCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNhcnJlZ2FyQ2F0ZWdvcmlhU2V0b3JlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FycmVnYXJDYXRlZ29yaWFTZXRvcmVzKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgiU2V0b3IiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzNC5fdmlldy5sb2FkaW5nKGZhbHNlKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIF90aGlzNC5fdmlldy5jYXJyZWdhU2V0b3JlcyhyZXNwb25zZS5kYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM0Ll92aWV3LnNob3dNc2coIk7Do28gZW5jb250cmFkby4gIiwgMCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwoKICAgICAgICBfdGhpczQuX3ZpZXcubG9hZGluZyhmYWxzZSk7CgogICAgICAgIF90aGlzNC5fdmlldy5zaG93TXNnKGUsIDApOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBDZW50cm9DdXN0b0Zvcm1Db250cm9sbGVyOwp9KCk7"},{"version":3,"sources":["C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\controllers\\Cadastro\\CentroCustoFormController.ts"],"names":[],"mappings":";;AAIA,OAAO,KAAP,MAAkB,qBAAlB;AAEA,SAA6B,YAA7B,QAAiD,qBAAjD;AAGA,WAAa,yBAAb;AAgBE,qCAAY,IAAZ,EAAsC;AAAA;;AAbtC,SAAA,MAAA,GAAS,CACP;AACE,MAAA,MAAM,EAAE,EADV;AAEE,MAAA,OAAO,EAAE,EAFX;AAGE,MAAA,SAAS,EAAE,EAHb;AAIE,MAAA,UAAU,EAAE,EAJd;AAKE,MAAA,eAAe,EAAE,EALnB;AAME,MAAA,EAAE,EAAE,EANN;AAOE,MAAA,aAAa,EAAE,EAPjB;AAQE,MAAA,IAAI,EAAE,CAAC,IAAI,YAAJ,CAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,CAAD;AARR,KADO,CAAT;AAcE,SAAK,KAAL,GAAa,IAAb;AACD;;AAlBH;AAAA;AAAA,iCAoBe,MApBf,EAoB6B;AAAA;;AAEzB,WAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;;AAGA,UAAI,MAAM,IAAI,SAAd,EAAyB;AAEvB;AACA,QAAA,KAAK,CACF,GADH,CACO,iBAAiB,MADxB,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAkB;AACtB,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,cAAI,QAAQ,CAAC,IAAT,CAAc,MAAd,IAAwB,CAA5B,EAA+B;AAC7B;AACA,YAAA,KAAK,CACF,GADH,CACO,4CAA4C,MADnD,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAkB;AACtB,cAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,kBAAI,QAAQ,CAAC,IAAb,EAAmB;AACjB,gBAAA,KAAI,CAAC,wBAAL;;AACA,gBAAA,KAAI,CAAC,KAAL,CAAW,sBAAX,CAAkC,QAAQ,CAAC,IAA3C;AACD;AACF,aARH,EASG,KATH,CASS,UAAC,CAAD,EAAW;AAChB,cAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;;AACA,cAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,cAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB,EAAsB,CAAtB;AACD,aAbH;AAcD,WAhBD,MAgBO;AACL,YAAA,KAAI,CAAC,wBAAL;;AACA,YAAA,KAAI,CAAC,KAAL,CAAW,wBAAX,CAAoC,QAAQ,CAAC,IAA7C;AACD;AACF,SAxBH,EAyBG,KAzBH,CAyBS,UAAC,CAAD,EAAW;AAChB,UAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,UAAA,KAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB,EAAsB,CAAtB;AACD,SA7BH;AAgCD,OAnCD,MAmCO;AACL,aAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB;AACD;AACF;AA/DH;AAAA;AAAA,2BAkES,WAlET,EAkEyB;AAAA;;AAErB,WAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;;AAEA,MAAA,KAAK,CACF,IADH,CACQ,aADR,EACuB,WADvB,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAkB;AACtB,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAlB,EAA2B;AACzB,UAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,QAAQ,CAAC,IAAT,CAAc,OAAjC,EAA0C,CAA1C;AAED,SAHD,MAGO;AACL,UAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,iDAAnB,EAAsE,CAAtE;AACD;AACF,OAVH,EAWG,KAXH,CAWS,UAAC,CAAD,EAAW;AAChB,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB,EAAsB,CAAtB;AACD,OAdH;AAgBD;AAtFH;AAAA;AAAA,2BAwFS,EAxFT,EAwFqB,WAxFrB,EAwFqC;AAAA;;AAEjC,WAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;;AAEA,MAAA,KAAK,CACF,GADH,CACO,iBAAiB,EADxB,EAC4B,WAD5B,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAkB;AACtB,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,YAAI,QAAQ,CAAC,IAAT,CAAc,OAAlB,EAA2B;AACzB,UAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,QAAQ,CAAC,IAAT,CAAc,OAAjC,EAA0C,CAA1C;AACD,SAFD,MAEO;AACL,UAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,QAAQ,CAAC,IAAT,CAAc,OAAjC,EAA0C,CAA1C;AACD;AACF,OATH,EAUG,KAVH,CAUS,UAAC,CAAD,EAAW;AAChB,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB,EAAsB,CAAtB;AACD,OAbH;AAeD;AA3GH;AAAA;AAAA,+CA6G0B;AAAA;;AACtB,MAAA,KAAK,CACF,GADH,CACO,OADP,EAEG,IAFH,CAEQ,UAAC,QAAD,EAAkB;AACtB,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,YAAI,QAAQ,CAAC,IAAb,EAAmB;AACjB,UAAA,MAAI,CAAC,KAAL,CAAW,cAAX,CAA0B,QAAQ,CAAC,IAAnC;AACD,SAFD,MAEO;AACL,UAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,kBAAnB,EAAuC,CAAvC;AACD;AACF,OATH,EAUG,KAVH,CAUS,UAAC,CAAD,EAAW;AAChB,QAAA,OAAO,CAAC,GAAR,CAAY,CAAZ;;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,KAAnB;;AACA,QAAA,MAAI,CAAC,KAAL,CAAW,OAAX,CAAmB,CAAnB,EAAsB,CAAtB;AACD,OAdH;AAeD;AA7HH;;AAAA;AAAA","sourcesContent":["import {\r\n  ICentroCustoFormView,\r\n  ICentroCustoFormController,\r\n} from \"../../contracts/Cadastro/CentroCustoFormContract\";\r\nimport axios from \"../../plugins/axios\";\r\n\r\nimport { Header, HeaderIcon, HeaderAction } from \"../../models/header\";\r\nimport { Headers } from \"../../models/headers\";\r\n\r\nexport class CentroCustoFormController implements ICentroCustoFormController {\r\n  _view: ICentroCustoFormView;\r\n\r\n  _lista = [\r\n    {\r\n      numero: \"\",\r\n      produto: \"\",\r\n      descricao: \"\",\r\n      quantidade: \"\",\r\n      dataNecessidade: \"\",\r\n      um: \"\",\r\n      justificativa: \"\",\r\n      acao: [new HeaderAction(\"\", \"\", \"\", \"\", \"\")],\r\n    },\r\n  ];\r\n\r\n  constructor(view: ICentroCustoFormView) {\r\n    this._view = view;\r\n  }\r\n\r\n  carregarDtos(codigo: string): void {\r\n\r\n    this._view.loading(true);\r\n\r\n\r\n    if (codigo != undefined) {\r\n\r\n      //VERIFICA SE JA EXISTE CENTRO DE CUSTO CADASTRADO\r\n      axios\r\n        .get(\"CentroCusto/\" + codigo)\r\n        .then((response: any) => {\r\n          this._view.loading(false);\r\n          if (response.data.length == 0) {\r\n            //CARREGA DADOS CENTRO DE CUSTO SELECIONADO\r\n            axios\r\n              .get(\"ConsultasBaseERPController/centrocusto/\" + codigo)\r\n              .then((response: any) => {\r\n                this._view.loading(false);\r\n                if (response.data) {\r\n                  this.carregarCategoriaSetores();\r\n                  this._view.showCentroCustoForSave(response.data);\r\n                }\r\n              })\r\n              .catch((e: any) => {\r\n                console.log(e);\r\n                this._view.loading(false);\r\n                this._view.showMsg(e, 0);\r\n              });\r\n          } else {\r\n            this.carregarCategoriaSetores();\r\n            this._view.showCentroCustoForEditar(response.data);\r\n          }\r\n        })\r\n        .catch((e: any) => {\r\n          console.log(e);\r\n          this._view.loading(false);\r\n          this._view.showMsg(e, 0);\r\n        });\r\n\r\n\r\n    } else {\r\n      this._view.loading(false);\r\n    }\r\n  }\r\n\r\n\r\n  salvar(centroCusto: any): void {\r\n\r\n    this._view.loading(true);\r\n\r\n    axios\r\n      .post(\"CentroCusto\", centroCusto)\r\n      .then((response: any) => {\r\n        this._view.loading(false);\r\n        if (response.data.sucesso) {\r\n          this._view.showMsg(response.data.message, 1);\r\n\r\n        } else {\r\n          this._view.showMsg(\"Não foi possível salvar os dados do Funcionário\", 0);\r\n        }\r\n      })\r\n      .catch((e: any) => {\r\n        this._view.loading(false);\r\n        this._view.showMsg(e, 0);\r\n      });\r\n\r\n  }\r\n\r\n  update(id: string, centroCusto: any): void {\r\n\r\n    this._view.loading(true);\r\n\r\n    axios\r\n      .put(\"CentroCusto/\" + id, centroCusto)\r\n      .then((response: any) => {\r\n        this._view.loading(false);\r\n        if (response.data.sucesso) {\r\n          this._view.showMsg(response.data.message, 1);\r\n        } else {\r\n          this._view.showMsg(response.data.message, 0);\r\n        }\r\n      })\r\n      .catch((e: any) => {\r\n        this._view.loading(false);\r\n        this._view.showMsg(e, 0);\r\n      });\r\n\r\n  }\r\n\r\n  carregarCategoriaSetores(): void {\r\n    axios\r\n      .get(\"Setor\")\r\n      .then((response: any) => {\r\n        this._view.loading(false);\r\n        if (response.data) {\r\n          this._view.carregaSetores(response.data);\r\n        } else {\r\n          this._view.showMsg(\"Não encontrado. \", 0);\r\n        }\r\n      })\r\n      .catch((e: any) => {\r\n        console.log(e);\r\n        this._view.loading(false);\r\n        this._view.showMsg(e, 0);\r\n      });\r\n  }\r\n\r\n\r\n}\r\n"],"sourceRoot":""}]}