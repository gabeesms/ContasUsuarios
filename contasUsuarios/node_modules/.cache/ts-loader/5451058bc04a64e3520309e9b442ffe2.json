{"remainingRequest":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js??ref--13-2!C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\baseGenerica\\validation.ts","dependencies":[{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\baseGenerica\\validation.ts","mtime":1608501967364},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkM6L3dhbXA2NC93d3cvQ29udGFzVXN1YXJpb3NfTW9kZWxvVGVzdGUvc21hcnRwb2ludC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi93YW1wNjQvd3d3L0NvbnRhc1VzdWFyaW9zX01vZGVsb1Rlc3RlL3NtYXJ0cG9pbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgS1JldG9ybm8gfSBmcm9tICIuLi9iYXNlR2VuZXJpY2EvS1JldG9ybm8iOwpleHBvcnQgdmFyIFZhbGlkYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFZhbGlkYXRpb24oKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVmFsaWRhdGlvbik7CiAgfQoKICBfY3JlYXRlQ2xhc3MoVmFsaWRhdGlvbiwgW3sKICAgIGtleTogIlZhbGlkU2NoZW1hIiwKCiAgICAvKioNCiAgICAgKiBWYWxpZCBTY2hlbWENCiAgICAgKi8KICAgIHZhbHVlOiBmdW5jdGlvbiBWYWxpZFNjaGVtYShzY2hlbWEsIGpzb24pIHsKICAgICAgdmFyIHJldG9ybm8gPSBuZXcgS1JldG9ybm8oKTsKICAgICAgcmV0b3Juby5zdWNlc3NvID0gdHJ1ZTsKICAgICAgcmV0b3Juby5tZW5zYWdlbSA9ICIiOwogICAgICBzY2hlbWEgPSBzY2hlbWEucmV2ZXJzZSgpOwogICAgICBzY2hlbWEuZm9yRWFjaChmdW5jdGlvbiAodmFsaWRhZG9yKSB7CiAgICAgICAgdmFyIHZhbHVlID0ganNvblt2YWxpZGFkb3IubmFtZV07CgogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgaWYgKF90eXBlb2YodmFsdWUpICE9PSB2YWxpZGFkb3IudHlwZSkgewogICAgICAgICAgICByZXRvcm5vLnN1Y2Vzc28gPSBmYWxzZTsKICAgICAgICAgICAgcmV0b3Juby5tZW5zYWdlbSA9ICJUaXBvIGRvIGNhbXBvICIgKyB2YWxpZGFkb3IudGV4dE5hbWUgKyAiIGludsOhaWxpZG8hIjsKICAgICAgICAgICAgcmV0dXJuIHJldG9ybm87CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZhbGlkYWRvci5yZXF1aXJlZCAmJiAhdmFsdWUpIHsKICAgICAgICAgICAgcmV0b3Juby5zdWNlc3NvID0gZmFsc2U7CiAgICAgICAgICAgIHJldG9ybm8ubWVuc2FnZW0gPSAiQ2FtcG8gIiArIHZhbGlkYWRvci50ZXh0TmFtZSArICIgw6kgb2JyaWdhdMOzcmlvISI7CiAgICAgICAgICAgIHJldHVybiByZXRvcm5vOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh2YWxpZGFkb3IudHlwZSA9PSAic3RyaW5nIiAmJiB2YWxpZGFkb3IubWF4TGVuZ3RoID4gMCAmJiAodmFsdWUgKyAnJykubGVuZ3RoID4gdmFsaWRhZG9yLm1heExlbmd0aCkgewogICAgICAgICAgICByZXRvcm5vLnN1Y2Vzc28gPSBmYWxzZTsKICAgICAgICAgICAgcmV0b3Juby5tZW5zYWdlbSA9ICJDYW1wbyAiICsgdmFsaWRhZG9yLnRleHROYW1lICsgIiB1bHRyYXBhc3NvdSBvIHRhbWFuaG8gcGVybWl0aWRvIHBhcmEgbyBjYW1wbyEiOwogICAgICAgICAgICByZXR1cm4gcmV0b3JubzsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodmFsaWRhZG9yLnZhbGlkKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSB2YWxpZGFkb3IudmFsaWQodmFsdWUpOwoKICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjZXNzbykgewogICAgICAgICAgICAgIHJldG9ybm8uc3VjZXNzbyA9IGZhbHNlOwogICAgICAgICAgICAgIHJldG9ybm8ubWVuc2FnZW0gPSByZXN1bHQubWVuc2FnZW07CiAgICAgICAgICAgICAgcmV0dXJuIHJldG9ybm87CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHZhbGlkYWRvci5yZXF1aXJlZCkgewogICAgICAgICAgICByZXRvcm5vLnN1Y2Vzc28gPSBmYWxzZTsKICAgICAgICAgICAgcmV0b3Juby5tZW5zYWdlbSA9ICJDYW1wbyAiICsgdmFsaWRhZG9yLnRleHROYW1lICsgIiDDqSBvYnJpZ2F0w7NyaW8hIjsKICAgICAgICAgICAgcmV0dXJuIHJldG9ybm87CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHJldG9ybm87CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVmFsaWRhdGlvbjsKfSgpOwpleHBvcnQgdmFyIFZhbGlkYXRpb25TY2hlbWEgPSBmdW5jdGlvbiBWYWxpZGF0aW9uU2NoZW1hKG5hbWUsIHRleHROYW1lKSB7CiAgdmFyIHR5cGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICJzdHJpbmciOwogIHZhciByZXF1aXJlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgdmFyIG1heExlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogMDsKICB2YXIgdmFsaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gNSA/IGFyZ3VtZW50c1s1XSA6IHVuZGVmaW5lZDsKCiAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZhbGlkYXRpb25TY2hlbWEpOwoKICB0aGlzLm5hbWUgPSBuYW1lOwogIHRoaXMudGV4dE5hbWUgPSB0ZXh0TmFtZTsKICB0aGlzLnR5cGUgPSB0eXBlOwogIHRoaXMucmVxdWlyZWQgPSByZXF1aXJlZDsKICB0aGlzLm1heExlbmd0aCA9IG1heExlbmd0aDsKICB0aGlzLnZhbGlkID0gdmFsaWQ7Cn07"},{"version":3,"sources":["C:\\wamp64\\www\\ContasUsuarios_ModeloTeste\\smartpoint\\src\\baseGenerica\\validation.ts"],"names":[],"mappings":";;;;;;AAAA,SAAS,QAAT,QAAyB,0BAAzB;AAEA,WAAa,UAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAEI;;;AAFJ,gCAKuB,MALvB,EAKmD,IALnD,EAK4D;AACpD,UAAI,OAAO,GAAG,IAAI,QAAJ,EAAd;AAEA,MAAA,OAAO,CAAC,OAAR,GAAkB,IAAlB;AACA,MAAA,OAAO,CAAC,QAAR,GAAmB,EAAnB;AAEA,MAAA,MAAM,GAAG,MAAM,CAAC,OAAP,EAAT;AAEA,MAAA,MAAM,CAAC,OAAP,CAAe,UAAC,SAAD,EAAgC;AAE3C,YAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAX,CAAhB;;AAEA,YAAI,KAAJ,EAAW;AAEP,cAAI,QAAO,KAAP,MAAiB,SAAS,CAAC,IAA/B,EAAqC;AACjC,YAAA,OAAO,CAAC,OAAR,GAAkB,KAAlB;AACA,YAAA,OAAO,CAAC,QAAR,GAAmB,mBAAmB,SAAS,CAAC,QAA7B,GAAwC,aAA3D;AACA,mBAAO,OAAP;AACH;;AAED,cAAI,SAAS,CAAC,QAAV,IAAsB,CAAC,KAA3B,EAAkC;AAC9B,YAAA,OAAO,CAAC,OAAR,GAAkB,KAAlB;AACA,YAAA,OAAO,CAAC,QAAR,GAAmB,WAAW,SAAS,CAAC,QAArB,GAAgC,iBAAnD;AACA,mBAAO,OAAP;AACH;;AAED,cAAI,SAAS,CAAC,IAAV,IAAkB,QAAlB,IAA8B,SAAS,CAAC,SAAV,GAAsB,CAApD,IAAyD,CAAC,KAAK,GAAG,EAAT,EAAa,MAAb,GAAsB,SAAS,CAAC,SAA7F,EAAwG;AACpG,YAAA,OAAO,CAAC,OAAR,GAAkB,KAAlB;AACA,YAAA,OAAO,CAAC,QAAR,GAAmB,WAAW,SAAS,CAAC,QAArB,GAAgC,gDAAnD;AACA,mBAAO,OAAP;AACH;;AACD,cAAI,SAAS,CAAC,KAAd,EAAqB;AACjB,gBAAI,MAAM,GAAG,SAAS,CAAC,KAAV,CAAgB,KAAhB,CAAb;;AACA,gBAAI,CAAC,MAAM,CAAC,OAAZ,EAAqB;AACjB,cAAA,OAAO,CAAC,OAAR,GAAkB,KAAlB;AACA,cAAA,OAAO,CAAC,QAAR,GAAmB,MAAM,CAAC,QAA1B;AACA,qBAAO,OAAP;AACH;AACJ;AAGJ,SA7BD,MA6BO;AAEH,cAAI,SAAS,CAAC,QAAd,EAAwB;AACpB,YAAA,OAAO,CAAC,OAAR,GAAkB,KAAlB;AACA,YAAA,OAAO,CAAC,QAAR,GAAmB,WAAW,SAAS,CAAC,QAArB,GAAgC,iBAAnD;AACA,mBAAO,OAAP;AACH;AACJ;AACJ,OAzCD;AA4CA,aAAO,OAAP;AACH;AA1DL;;AAAA;AAAA;AA6DA,WAAa,gBAAb,GAQI,0BAAY,IAAZ,EAA0B,QAA1B,EAAsJ;AAAA,MAA1G,IAA0G,uEAA3F,QAA2F;AAAA,MAAjF,QAAiF,uEAA7D,KAA6D;AAAA,MAAtD,SAAsD,uEAAlC,CAAkC;AAAA,MAA/B,KAA+B;;AAAA;;AAClJ,OAAK,IAAL,GAAY,IAAZ;AACA,OAAK,QAAL,GAAgB,QAAhB;AACA,OAAK,IAAL,GAAY,IAAZ;AACA,OAAK,QAAL,GAAgB,QAAhB;AACA,OAAK,SAAL,GAAiB,SAAjB;AACA,OAAK,KAAL,GAAa,KAAb;AACH,CAfL","sourcesContent":["import { KRetorno } from \"../baseGenerica/KRetorno\";\r\n\r\nexport class Validation {\r\n\r\n    /**\r\n     * Valid Schema\r\n     */\r\n    public ValidSchema(schema: ValidationSchema[], json: any): KRetorno {\r\n        let retorno = new KRetorno();\r\n\r\n        retorno.sucesso = true;\r\n        retorno.mensagem = \"\";\r\n\r\n        schema = schema.reverse()\r\n\r\n        schema.forEach((validador: ValidationSchema) => {\r\n            \r\n            let value = json[validador.name];\r\n            \r\n            if (value) {\r\n                \r\n                if (typeof value !== validador.type) {\r\n                    retorno.sucesso = false;\r\n                    retorno.mensagem = \"Tipo do campo \" + validador.textName + \" inváilido!\";\r\n                    return retorno;\r\n                }\r\n\r\n                if (validador.required && !value) {\r\n                    retorno.sucesso = false;\r\n                    retorno.mensagem = \"Campo \" + validador.textName + \" é obrigatório!\";\r\n                    return retorno;\r\n                }\r\n\r\n                if (validador.type == \"string\" && validador.maxLength > 0 && (value + '').length > validador.maxLength) {\r\n                    retorno.sucesso = false;\r\n                    retorno.mensagem = \"Campo \" + validador.textName + \" ultrapassou o tamanho permitido para o campo!\";\r\n                    return retorno;\r\n                }\r\n                if (validador.valid) {\r\n                    let result = validador.valid(value);\r\n                    if (!result.sucesso) {\r\n                        retorno.sucesso = false;\r\n                        retorno.mensagem = result.mensagem;\r\n                        return retorno;\r\n                    }\r\n                }\r\n\r\n               \r\n            } else {\r\n\r\n                if (validador.required) {\r\n                    retorno.sucesso = false;\r\n                    retorno.mensagem = \"Campo \" + validador.textName + \" é obrigatório!\";\r\n                    return retorno;\r\n                }\r\n            }\r\n        })\r\n\r\n\r\n        return retorno;\r\n    }\r\n}\r\n\r\nexport class ValidationSchema {\r\n    name: string\r\n    textName: string\r\n    type: string\r\n    required: boolean\r\n    maxLength: number\r\n    valid?: (item: any) => (KRetorno)\r\n\r\n    constructor(name: string, textName: string, type: string = \"string\", required: boolean = false, maxLength: number = 0, valid?: (item: any) => KRetorno) {\r\n        this.name = name\r\n        this.textName = textName\r\n        this.type = type\r\n        this.required = required\r\n        this.maxLength = maxLength\r\n        this.valid = valid\r\n    }\r\n}"],"sourceRoot":""}]}