{"remainingRequest":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js!C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\models\\v-year-calendar.js","dependencies":[{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\src\\models\\v-year-calendar.js","mtime":1598393631017},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\wamp64\\www\\smartpoint\\smartpoint\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5nbG9iYWwtdGhpcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiKTsKCnZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKZnVuY3Rpb24gdW53cmFwRXhwb3J0cyh4KSB7CiAgcmV0dXJuIHggJiYgeC5fX2VzTW9kdWxlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh4LCAnZGVmYXVsdCcpID8geFsnZGVmYXVsdCddIDogeDsKfQoKZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZm4sIG1vZHVsZSkgewogIHJldHVybiBtb2R1bGUgPSB7CiAgICBleHBvcnRzOiB7fQogIH0sIGZuKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMpLCBtb2R1bGUuZXhwb3J0czsKfQoKdmFyIGpzWWVhckNhbGVuZGFyID0gY3JlYXRlQ29tbW9uanNNb2R1bGUoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykgewogIChmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7CiAgICB7CiAgICAgIGZhY3RvcnkoZXhwb3J0cyk7CiAgICB9CiAgfSkodHlwZW9mIGdsb2JhbFRoaXMgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsVGhpcyA6IHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIiA/IHNlbGYgOiBjb21tb25qc0dsb2JhbCwgZnVuY3Rpb24gKF9leHBvcnRzKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX2V4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogICAgICB2YWx1ZTogdHJ1ZQogICAgfSk7CiAgICBfZXhwb3J0c1siZGVmYXVsdCJdID0gdm9pZCAwOwoKICAgIGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7CiAgICAgICJAYmFiZWwvaGVscGVycyAtIHR5cGVvZiI7CgogICAgICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgewogICAgICAgIF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgewogICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAgICAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IHR5cGVvZiBvYmo7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgcmV0dXJuIF90eXBlb2Yob2JqKTsKICAgIH0KCiAgICBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7CiAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsKICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7CiAgICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOwogICAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgICB9CgogICAgZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogICAgICBpZiAoa2V5IGluIG9iaikgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICogSlMgeWVhciBjYWxlbmRhciB2MS4wLjAKICAgICAqIFJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS95ZWFyLWNhbGVuZGFyL2pzLXllYXItY2FsZW5kYXIKICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgICogQ3JlYXRlZCBieSBQYXVsIERhdmlkLVNpdmVsbGUKICAgICAqCiAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KICAgICAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAogICAgICoKICAgICAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAogICAgICoKICAgICAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKICAgICAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCiAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKICAgICAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgogICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCiAgICAvLyBOb2RlTGlzdCBmb3JFYWNoKCkgcG9seWZpbGwKCgogICAgaWYgKHR5cGVvZiBOb2RlTGlzdCAhPT0gInVuZGVmaW5lZCIgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoKSB7CiAgICAgIE5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzQXJnKSB7CiAgICAgICAgdGhpc0FyZyA9IHRoaXNBcmcgfHwgd2luZG93OwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdGhpc1tpXSwgaSwgdGhpcyk7CiAgICAgICAgfQogICAgICB9OwogICAgfSAvLyBFbGVtZW50IGNsb3Nlc3QoKSBwb2x5ZmlsbAoKCiAgICBpZiAodHlwZW9mIEVsZW1lbnQgIT09ICJ1bmRlZmluZWQiICYmICFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7CiAgICAgIHZhciBwcm90b3R5cGUgPSBFbGVtZW50LnByb3RvdHlwZTsKICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IHByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBwcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yOwogICAgfQoKICAgIGlmICh0eXBlb2YgRWxlbWVudCAhPT0gInVuZGVmaW5lZCIgJiYgIUVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QpIHsKICAgICAgRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uIChzKSB7CiAgICAgICAgdmFyIGVsID0gdGhpczsKICAgICAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsOwoKICAgICAgICBkbyB7CiAgICAgICAgICBpZiAoZWwubWF0Y2hlcyhzKSkgcmV0dXJuIGVsOwogICAgICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50IHx8IGVsLnBhcmVudE5vZGU7CiAgICAgICAgfSB3aGlsZSAoZWwgIT09IG51bGwgJiYgZWwubm9kZVR5cGUgPT0gMSk7CgogICAgICAgIHJldHVybiBudWxsOwogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxlbmRhciBpbnN0YW5jZS4KICAgICAqLwoKCiAgICB2YXIgQ2FsZW5kYXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAvKioKICAgICAgICogRmlyZWQgd2hlbiBhIGRheSBpcyBjbGlja2VkLgogICAgICAgKiBAZXZlbnQKICAgICAgICogQGV4YW1wbGUKICAgICAgICogYGBgCiAgICAgICAqIAogICAgICAgKiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGlja0RheScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICogICBjb25zb2xlLmxvZygiQ2xpY2sgb24gZGF5OiAiICsgZS5kYXRlICsgIiAoIiArIGUuZXZlbnRzLmxlbmd0aCArICIgZXZlbnRzKSIpOwogICAgICAgKiB9KQogICAgICAgKiBgYGAKICAgICAgICovCgogICAgICAvKioKICAgICAgICogRmlyZWQgd2hlbiBhIGRheSBpcyByaWdodCBjbGlja2VkLgogICAgICAgKiBAZXZlbnQKICAgICAgICogQGV4YW1wbGUKICAgICAgICogYGBgCiAgICAgICAqIAogICAgICAgKiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGlja0RheScsIGZ1bmN0aW9uKGUpIHsKICAgICAgICogICBjb25zb2xlLmxvZygiUmlnaHQgY2xpY2sgb24gZGF5OiAiICsgZS5kYXRlICsgIiAoIiArIGUuZXZlbnRzLmxlbmd0aCArICIgZXZlbnRzKSIpOwogICAgICAgKiB9KQogICAgICAgKiBgYGAKICAgICAgICovCgogICAgICAvKioKICAgICAgICogRmlyZWQgd2hlbiB0aGUgbW91c2UgZW50ZXIgaW4gYSBkYXkuCiAgICAgICAqIEBldmVudAogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiBgYGAKICAgICAgICogCiAgICAgICAqIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhcicpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlT25EYXknLCBmdW5jdGlvbihlKSB7CiAgICAgICAqICAgY29uc29sZS5sb2coIk1vdXNlIGVudGVyIGluIGEgZGF5OiAiICsgZS5kYXRlICsgIiAoIiArIGUuZXZlbnRzLmxlbmd0aCArICIgZXZlbnRzKSIpOwogICAgICAgKiB9KQogICAgICAgKiBgYGAKICAgICAgICovCgogICAgICAvKioKICAgICAgICogRmlyZWQgd2hlbiB0aGUgbW91c2UgbGVhdmUgYSBkYXkuCiAgICAgICAqIEBldmVudAogICAgICAgKiBAZXhhbXBsZQogICAgICAgKiBgYGAKICAgICAgICogCiAgICAgICAqIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhcicpLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlT3V0RGF5JywgZnVuY3Rpb24oZSkgewogICAgICAgKiAgIGNvbnNvbGUubG9nKCJNb3VzZSBsZWF2ZSBhIGRheTogIiArIGUuZGF0ZSArICIgKCIgKyBlLmV2ZW50cy5sZW5ndGggKyAiIGV2ZW50cykiKTsKICAgICAgICogfSkKICAgICAgICogYGBgCiAgICAgICAqLwoKICAgICAgLyoqCiAgICAgICAqIEZpcmVkIHdoZW4gdGhlIGNhbGVuZGFyIHJlbmRlcmluZyBpcyBlbmRlZC4KICAgICAgICogQGV2ZW50CiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIGBgYAogICAgICAgKiAKICAgICAgICogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyJykuYWRkRXZlbnRMaXN0ZW5lcigncmVuZGVyRW5kJywgZnVuY3Rpb24oZSkgewogICAgICAgKiAgIGNvbnNvbGUubG9nKCJSZW5kZXIgZW5kIGZvciB5ZWFyOiAiICsgZS5jdXJyZW50WWVhcik7CiAgICAgICAqIH0pCiAgICAgICAqIGBgYAogICAgICAgKi8KCiAgICAgIC8qKgogICAgICAgKiBGaXJlZCB3aGVuIGEgZGF0ZSByYW5nZSBpcyBzZWxlY3RlZC4KICAgICAgICogCiAgICAgICAqIERvbid0IGZvcmdldCB0byBlbmFibGUgdGhlIGBlbmFibGVSYW5nZVNlbGVjdGlvbmAgb3B0aW9uIHRvIGJlIGFibGUgdG8gdXNlIHRoZSByYW5nZSBzZWxlY3Rpb24gZnVuY3Rpb25hbGl0eS4KICAgICAgICogQGV2ZW50CiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIGBgYAogICAgICAgKiAKICAgICAgICogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyJykuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0UmFuZ2UnLCBmdW5jdGlvbihlKSB7CiAgICAgICAqICAgY29uc29sZS5sb2coIlNlbGVjdCB0aGUgcmFuZ2U6ICIgKyBlLnN0YXJ0RGF0ZSArICIgLSAiICsgZS5lbmREYXRlKTsKICAgICAgICogfSkKICAgICAgICogYGBgCiAgICAgICAqLwoKICAgICAgLyoqCiAgICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgY2hhbmdpbmcgdGhlIGN1cnJlbnQgeWVhci4KICAgICAgICogQGV2ZW50CiAgICAgICAqIEBleGFtcGxlCiAgICAgICAqIGBgYAogICAgICAgKiAKICAgICAgICogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyJykuYWRkRXZlbnRMaXN0ZW5lcigneWVhckNoYW5nZWQnLCBmdW5jdGlvbihlKSB7CiAgICAgICAqICAgY29uc29sZS5sb2coIk5ldyB5ZWFyIHNlbGVjdGVkOiAiICsgZS5jdXJyZW50WWVhcik7CiAgICAgICAqIH0pCiAgICAgICAqIGBgYAogICAgICAgKi8KCiAgICAgIC8qKgogICAgICAgKiBDcmVhdGUgYSBuZXcgY2FsZW5kYXIuCiAgICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IChvciB0aGUgc2VsZWN0b3IgdG8gYW4gZWxlbWVudCkgaW4gd2hpY2ggdGhlIGNhbGVuZGFyIHNob3VsZCBiZSBjcmVhdGVkLgogICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbT3B0aW9uYWxdIFRoZSBvcHRpb25zIHVzZWQgdG8gY3VzdG9taXplIHRoZSBjYWxlbmRhcgogICAgICAgKi8KICAgICAgZnVuY3Rpb24gQ2FsZW5kYXIoZWxlbWVudCkgewogICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsOwoKICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FsZW5kYXIpOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImVsZW1lbnQiLCB2b2lkIDApOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9wdGlvbnMiLCB2b2lkIDApOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9kYXRhU291cmNlIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfbW91c2VEb3duIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfcmFuZ2VTdGFydCIsIHZvaWQgMCk7CgogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX3JhbmdlRW5kIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfcmVzcG9uc2l2ZUludGVydmFsIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJfbmJDb2xzIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjbGlja0RheSIsIHZvaWQgMCk7CgogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZGF5Q29udGV4dE1lbnUiLCB2b2lkIDApOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1vdXNlT25EYXkiLCB2b2lkIDApOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm1vdXNlT3V0RGF5Iiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJyZW5kZXJFbmQiLCB2b2lkIDApOwoKICAgICAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNlbGVjdFJhbmdlIiwgdm9pZCAwKTsKCiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ5ZWFyQ2hhbmdlZCIsIHZvaWQgMCk7CgogICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7CiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiVGhlIGVsZW1lbnQgcGFyYW1ldGVyIHNob3VsZCBiZSBhIERPTSBub2RlIG9yIGEgc2VsZWN0b3IiKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdjYWxlbmRhcicpOwoKICAgICAgICB0aGlzLl9pbml0aWFsaXplRXZlbnRzKG9wdGlvbnMpOwoKICAgICAgICB0aGlzLl9pbml0aWFsaXplT3B0aW9ucyhvcHRpb25zKTsKCiAgICAgICAgdGhpcy5zZXRZZWFyKHRoaXMub3B0aW9ucy5zdGFydFllYXIpOwogICAgICB9CgogICAgICBfY3JlYXRlQ2xhc3MoQ2FsZW5kYXIsIFt7CiAgICAgICAga2V5OiAiX2luaXRpYWxpemVPcHRpb25zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2luaXRpYWxpemVPcHRpb25zKG9wdCkgewogICAgICAgICAgaWYgKG9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIG9wdCA9IHt9OwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICAgICAgc3RhcnRZZWFyOiAhaXNOYU4ocGFyc2VJbnQob3B0LnN0YXJ0WWVhcikpID8gcGFyc2VJbnQob3B0LnN0YXJ0WWVhcikgOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICAgIG1pbkRhdGU6IG9wdC5taW5EYXRlIGluc3RhbmNlb2YgRGF0ZSA/IG9wdC5taW5EYXRlIDogbnVsbCwKICAgICAgICAgICAgbWF4RGF0ZTogb3B0Lm1heERhdGUgaW5zdGFuY2VvZiBEYXRlID8gb3B0Lm1heERhdGUgOiBudWxsLAogICAgICAgICAgICBsYW5ndWFnZTogb3B0Lmxhbmd1YWdlICE9IG51bGwgJiYgQ2FsZW5kYXIubG9jYWxlc1tvcHQubGFuZ3VhZ2VdICE9IG51bGwgPyBvcHQubGFuZ3VhZ2UgOiAnZW4nLAogICAgICAgICAgICBhbGxvd092ZXJsYXA6IG9wdC5hbGxvd092ZXJsYXAgIT0gbnVsbCA/IG9wdC5hbGxvd092ZXJsYXAgOiB0cnVlLAogICAgICAgICAgICBkaXNwbGF5V2Vla051bWJlcjogb3B0LmRpc3BsYXlXZWVrTnVtYmVyICE9IG51bGwgPyBvcHQuZGlzcGxheVdlZWtOdW1iZXIgOiBmYWxzZSwKICAgICAgICAgICAgZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZTogb3B0LmRpc3BsYXlEaXNhYmxlZERhdGFTb3VyY2UgIT0gbnVsbCA/IG9wdC5kaXNwbGF5RGlzYWJsZWREYXRhU291cmNlIDogZmFsc2UsCiAgICAgICAgICAgIGRpc3BsYXlIZWFkZXI6IG9wdC5kaXNwbGF5SGVhZGVyICE9IG51bGwgPyBvcHQuZGlzcGxheUhlYWRlciA6IHRydWUsCiAgICAgICAgICAgIGFsd2F5c0hhbGZEYXk6IG9wdC5hbHdheXNIYWxmRGF5ICE9IG51bGwgPyBvcHQuYWx3YXlzSGFsZkRheSA6IGZhbHNlLAogICAgICAgICAgICBlbmFibGVSYW5nZVNlbGVjdGlvbjogb3B0LmVuYWJsZVJhbmdlU2VsZWN0aW9uICE9IG51bGwgPyBvcHQuZW5hYmxlUmFuZ2VTZWxlY3Rpb24gOiBmYWxzZSwKICAgICAgICAgICAgZGlzYWJsZWREYXlzOiBvcHQuZGlzYWJsZWREYXlzIGluc3RhbmNlb2YgQXJyYXkgPyBvcHQuZGlzYWJsZWREYXlzIDogW10sCiAgICAgICAgICAgIGRpc2FibGVkV2Vla0RheXM6IG9wdC5kaXNhYmxlZFdlZWtEYXlzIGluc3RhbmNlb2YgQXJyYXkgPyBvcHQuZGlzYWJsZWRXZWVrRGF5cyA6IFtdLAogICAgICAgICAgICBoaWRkZW5XZWVrRGF5czogb3B0LmhpZGRlbldlZWtEYXlzIGluc3RhbmNlb2YgQXJyYXkgPyBvcHQuaGlkZGVuV2Vla0RheXMgOiBbXSwKICAgICAgICAgICAgcm91bmRSYW5nZUxpbWl0czogb3B0LnJvdW5kUmFuZ2VMaW1pdHMgIT0gbnVsbCA/IG9wdC5yb3VuZFJhbmdlTGltaXRzIDogZmFsc2UsCiAgICAgICAgICAgIGRhdGFTb3VyY2U6IG9wdC5kYXRhU291cmNlIGluc3RhbmNlb2YgQXJyYXkgfHwgdHlwZW9mIG9wdC5kYXRhU291cmNlID09PSAiZnVuY3Rpb24iID8gb3B0LmRhdGFTb3VyY2UgOiBbXSwKICAgICAgICAgICAgc3R5bGU6IG9wdC5zdHlsZSA9PSAnYmFja2dyb3VuZCcgfHwgb3B0LnN0eWxlID09ICdib3JkZXInIHx8IG9wdC5zdHlsZSA9PSAnY3VzdG9tJyA/IG9wdC5zdHlsZSA6ICdib3JkZXInLAogICAgICAgICAgICBlbmFibGVDb250ZXh0TWVudTogb3B0LmVuYWJsZUNvbnRleHRNZW51ICE9IG51bGwgPyBvcHQuZW5hYmxlQ29udGV4dE1lbnUgOiBmYWxzZSwKICAgICAgICAgICAgY29udGV4dE1lbnVJdGVtczogb3B0LmNvbnRleHRNZW51SXRlbXMgaW5zdGFuY2VvZiBBcnJheSA/IG9wdC5jb250ZXh0TWVudUl0ZW1zIDogW10sCiAgICAgICAgICAgIGN1c3RvbURheVJlbmRlcmVyOiB0eXBlb2Ygb3B0LmN1c3RvbURheVJlbmRlcmVyID09PSAiZnVuY3Rpb24iID8gb3B0LmN1c3RvbURheVJlbmRlcmVyIDogbnVsbCwKICAgICAgICAgICAgY3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyOiB0eXBlb2Ygb3B0LmN1c3RvbURhdGFTb3VyY2VSZW5kZXJlciA9PT0gImZ1bmN0aW9uIiA/IG9wdC5jdXN0b21EYXRhU291cmNlUmVuZGVyZXIgOiBudWxsLAogICAgICAgICAgICB3ZWVrU3RhcnQ6ICFpc05hTihwYXJzZUludChvcHQud2Vla1N0YXJ0KSkgPyBwYXJzZUludChvcHQud2Vla1N0YXJ0KSA6IDEsCiAgICAgICAgICAgIC8vbnVsbCwKICAgICAgICAgICAgbG9hZGluZ1RlbXBsYXRlOiB0eXBlb2Ygb3B0LmxvYWRpbmdUZW1wbGF0ZSA9PT0gInN0cmluZyIgfHwgb3B0LmxvYWRpbmdUZW1wbGF0ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID8gb3B0LmxvYWRpbmdUZW1wbGF0ZSA6IG51bGwKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kYXRhU291cmNlIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgdGhpcy5fZGF0YVNvdXJjZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlOwoKICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZURhdGFzb3VyY2VDb2xvcnMoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfaW5pdGlhbGl6ZUV2ZW50cyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0aWFsaXplRXZlbnRzKG9wdCkgewogICAgICAgICAgaWYgKG9wdCA9PSBudWxsKSB7CiAgICAgICAgICAgIG9wdCA9IFtdOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHQueWVhckNoYW5nZWQpIHsKICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3llYXJDaGFuZ2VkJywgb3B0LnllYXJDaGFuZ2VkKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0LnJlbmRlckVuZCkgewogICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncmVuZGVyRW5kJywgb3B0LnJlbmRlckVuZCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdC5jbGlja0RheSkgewogICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2tEYXknLCBvcHQuY2xpY2tEYXkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHQuZGF5Q29udGV4dE1lbnUpIHsKICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RheUNvbnRleHRNZW51Jywgb3B0LmRheUNvbnRleHRNZW51KTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3B0LnNlbGVjdFJhbmdlKSB7CiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzZWxlY3RSYW5nZScsIG9wdC5zZWxlY3RSYW5nZSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wdC5tb3VzZU9uRGF5KSB7CiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZU9uRGF5Jywgb3B0Lm1vdXNlT25EYXkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChvcHQubW91c2VPdXREYXkpIHsKICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlT3V0RGF5Jywgb3B0Lm1vdXNlT3V0RGF5KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZmV0Y2hEYXRhU291cmNlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZldGNoRGF0YVNvdXJjZShjYWxsYmFjaykgewogICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICB2YXIgZ2V0RGF0YVNvdXJjZSA9IHRoaXMub3B0aW9ucy5kYXRhU291cmNlOwoKICAgICAgICAgICAgaWYgKGdldERhdGFTb3VyY2UubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgICAvLyAyIHBhcmFtZXRlcnMsIG1lYW5zIGNhbGxiYWNrIG1ldGhvZAogICAgICAgICAgICAgIGdldERhdGFTb3VyY2UodGhpcy5vcHRpb25zLnN0YXJ0WWVhciwgY2FsbGJhY2spOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIDEgcGFyYW1ldGVyLCBtZWFucyBzeW5jaHJvbm91cyBvciBwcm9taXNlIG1ldGhvZAogICAgICAgICAgICAgIHZhciByZXN1bHQgPSBnZXREYXRhU291cmNlKHRoaXMub3B0aW9ucy5zdGFydFllYXIpOwoKICAgICAgICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJlc3VsdC50aGVuKGNhbGxiYWNrKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMub3B0aW9ucy5kYXRhU291cmNlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfaW5pdGlhbGl6ZURhdGFzb3VyY2VDb2xvcnMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdGlhbGl6ZURhdGFzb3VyY2VDb2xvcnMoKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGFTb3VyY2VbaV0uY29sb3IgPT0gbnVsbCkgewogICAgICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2VbaV0uY29sb3IgPSBDYWxlbmRhci5jb2xvcnNbaSAlIENhbGVuZGFyLmNvbG9ycy5sZW5ndGhdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFJlbmRlcnMgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInJlbmRlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgICAgICAgIHZhciBpc0xvYWRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGZhbHNlOyAvLyBDbGVhciB0aGUgY2FsZW5kYXIgKGZhc3RlciBtZXRob2QpCgogICAgICAgICAgd2hpbGUgKHRoaXMuZWxlbWVudC5maXJzdENoaWxkKSB7CiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNwbGF5SGVhZGVyKSB7CiAgICAgICAgICAgIHRoaXMuX3JlbmRlckhlYWRlcigpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChpc0xvYWRpbmcpIHsKICAgICAgICAgICAgdGhpcy5fcmVuZGVyTG9hZGluZygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5fcmVuZGVyQm9keSgpOwoKICAgICAgICAgICAgdGhpcy5fcmVuZGVyRGF0YVNvdXJjZSgpOwoKICAgICAgICAgICAgdGhpcy5fYXBwbHlFdmVudHMoKTsgLy8gRmFkZSBhbmltYXRpb24KCgogICAgICAgICAgICB2YXIgbW9udGhzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb250aHMtY29udGFpbmVyJyk7CiAgICAgICAgICAgIG1vbnRocy5zdHlsZS5vcGFjaXR5ID0gJzAnOwogICAgICAgICAgICBtb250aHMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIG1vbnRocy5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgMC41cyc7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIG1vbnRocy5zdHlsZS5vcGFjaXR5ID0gJzEnOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgcmV0dXJuIG1vbnRocy5zdHlsZS50cmFuc2l0aW9uID0gJyc7CiAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSwgMCk7CgogICAgICAgICAgICB0aGlzLl90cmlnZ2VyRXZlbnQoJ3JlbmRlckVuZCcsIHsKICAgICAgICAgICAgICBjdXJyZW50WWVhcjogdGhpcy5vcHRpb25zLnN0YXJ0WWVhcgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVuZGVySGVhZGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckhlYWRlcigpIHsKICAgICAgICAgIHZhciBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdjYWxlbmRhci1oZWFkZXInKTsKICAgICAgICAgIHZhciBoZWFkZXJUYWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7CiAgICAgICAgICB2YXIgcHJldkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7CiAgICAgICAgICBwcmV2RGl2LmNsYXNzTGlzdC5hZGQoJ3ByZXYnKTsKCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pbkRhdGUgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMubWluRGF0ZSA+IG5ldyBEYXRlKHRoaXMub3B0aW9ucy5zdGFydFllYXIgLSAxLCAxMSwgMzEpKSB7CiAgICAgICAgICAgIHByZXZEaXYuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgcHJldkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgICBwcmV2SWNvbi5pbm5lckhUTUwgPSAiJmxzYXF1bzsiOwogICAgICAgICAgcHJldkRpdi5hcHBlbmRDaGlsZChwcmV2SWNvbik7CiAgICAgICAgICBoZWFkZXJUYWJsZS5hcHBlbmRDaGlsZChwcmV2RGl2KTsKICAgICAgICAgIHZhciBwcmV2MlllYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpOwogICAgICAgICAgcHJldjJZZWFyRGl2LmNsYXNzTGlzdC5hZGQoJ3llYXItdGl0bGUnKTsKICAgICAgICAgIHByZXYyWWVhckRpdi5jbGFzc0xpc3QuYWRkKCd5ZWFyLW5laWdoYm9yMicpOwogICAgICAgICAgcHJldjJZZWFyRGl2LnRleHRDb250ZW50ID0gKHRoaXMub3B0aW9ucy5zdGFydFllYXIgLSAyKS50b1N0cmluZygpOwoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWluRGF0ZSAhPSBudWxsICYmIHRoaXMub3B0aW9ucy5taW5EYXRlID4gbmV3IERhdGUodGhpcy5vcHRpb25zLnN0YXJ0WWVhciAtIDIsIDExLCAzMSkpIHsKICAgICAgICAgICAgcHJldjJZZWFyRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaGVhZGVyVGFibGUuYXBwZW5kQ2hpbGQocHJldjJZZWFyRGl2KTsKICAgICAgICAgIHZhciBwcmV2WWVhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7CiAgICAgICAgICBwcmV2WWVhckRpdi5jbGFzc0xpc3QuYWRkKCd5ZWFyLXRpdGxlJyk7CiAgICAgICAgICBwcmV2WWVhckRpdi5jbGFzc0xpc3QuYWRkKCd5ZWFyLW5laWdoYm9yJyk7CiAgICAgICAgICBwcmV2WWVhckRpdi50ZXh0Q29udGVudCA9ICh0aGlzLm9wdGlvbnMuc3RhcnRZZWFyIC0gMSkudG9TdHJpbmcoKTsKCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1pbkRhdGUgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMubWluRGF0ZSA+IG5ldyBEYXRlKHRoaXMub3B0aW9ucy5zdGFydFllYXIgLSAxLCAxMSwgMzEpKSB7CiAgICAgICAgICAgIHByZXZZZWFyRGl2LmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7CiAgICAgICAgICB9CgogICAgICAgICAgaGVhZGVyVGFibGUuYXBwZW5kQ2hpbGQocHJldlllYXJEaXYpOwogICAgICAgICAgdmFyIHllYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpOwogICAgICAgICAgeWVhckRpdi5jbGFzc0xpc3QuYWRkKCd5ZWFyLXRpdGxlJyk7CiAgICAgICAgICB5ZWFyRGl2LnRleHRDb250ZW50ID0gdGhpcy5vcHRpb25zLnN0YXJ0WWVhci50b1N0cmluZygpOwogICAgICAgICAgaGVhZGVyVGFibGUuYXBwZW5kQ2hpbGQoeWVhckRpdik7CiAgICAgICAgICB2YXIgbmV4dFllYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpOwogICAgICAgICAgbmV4dFllYXJEaXYuY2xhc3NMaXN0LmFkZCgneWVhci10aXRsZScpOwogICAgICAgICAgbmV4dFllYXJEaXYuY2xhc3NMaXN0LmFkZCgneWVhci1uZWlnaGJvcicpOwogICAgICAgICAgbmV4dFllYXJEaXYudGV4dENvbnRlbnQgPSAodGhpcy5vcHRpb25zLnN0YXJ0WWVhciArIDEpLnRvU3RyaW5nKCk7CgogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYXhEYXRlICE9IG51bGwgJiYgdGhpcy5vcHRpb25zLm1heERhdGUgPCBuZXcgRGF0ZSh0aGlzLm9wdGlvbnMuc3RhcnRZZWFyICsgMSwgMCwgMSkpIHsKICAgICAgICAgICAgbmV4dFllYXJEaXYuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBoZWFkZXJUYWJsZS5hcHBlbmRDaGlsZChuZXh0WWVhckRpdik7CiAgICAgICAgICB2YXIgbmV4dDJZZWFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTsKICAgICAgICAgIG5leHQyWWVhckRpdi5jbGFzc0xpc3QuYWRkKCd5ZWFyLXRpdGxlJyk7CiAgICAgICAgICBuZXh0MlllYXJEaXYuY2xhc3NMaXN0LmFkZCgneWVhci1uZWlnaGJvcjInKTsKICAgICAgICAgIG5leHQyWWVhckRpdi50ZXh0Q29udGVudCA9ICh0aGlzLm9wdGlvbnMuc3RhcnRZZWFyICsgMikudG9TdHJpbmcoKTsKCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1heERhdGUgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMubWF4RGF0ZSA8IG5ldyBEYXRlKHRoaXMub3B0aW9ucy5zdGFydFllYXIgKyAyLCAwLCAxKSkgewogICAgICAgICAgICBuZXh0MlllYXJEaXYuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBoZWFkZXJUYWJsZS5hcHBlbmRDaGlsZChuZXh0MlllYXJEaXYpOwogICAgICAgICAgdmFyIG5leHREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpOwogICAgICAgICAgbmV4dERpdi5jbGFzc0xpc3QuYWRkKCduZXh0Jyk7CgogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tYXhEYXRlICE9IG51bGwgJiYgdGhpcy5vcHRpb25zLm1heERhdGUgPCBuZXcgRGF0ZSh0aGlzLm9wdGlvbnMuc3RhcnRZZWFyICsgMSwgMCwgMSkpIHsKICAgICAgICAgICAgbmV4dERpdi5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBuZXh0SWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgIG5leHRJY29uLmlubmVySFRNTCA9ICImcnNhcXVvOyI7CiAgICAgICAgICBuZXh0RGl2LmFwcGVuZENoaWxkKG5leHRJY29uKTsKICAgICAgICAgIGhlYWRlclRhYmxlLmFwcGVuZENoaWxkKG5leHREaXYpOwogICAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGhlYWRlclRhYmxlKTsKICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChoZWFkZXIpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9yZW5kZXJCb2R5IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckJvZHkoKSB7CiAgICAgICAgICB2YXIgbW9udGhzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICBtb250aHNEaXYuY2xhc3NMaXN0LmFkZCgnbW9udGhzLWNvbnRhaW5lcicpOwoKICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgMTI7IG0rKykgewogICAgICAgICAgICAvKiBDb250YWluZXIgKi8KICAgICAgICAgICAgdmFyIG1vbnRoRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG1vbnRoRGl2LmNsYXNzTGlzdC5hZGQoJ21vbnRoLWNvbnRhaW5lcicpOwogICAgICAgICAgICBtb250aERpdi5kYXRhc2V0Lm1vbnRoSWQgPSBtLnRvU3RyaW5nKCk7CgogICAgICAgICAgICBpZiAodGhpcy5fbmJDb2xzKSB7CiAgICAgICAgICAgICAgbW9udGhEaXYuY2xhc3NMaXN0LmFkZCgibW9udGgtIi5jb25jYXQodGhpcy5fbmJDb2xzKSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBmaXJzdERhdGUgPSBuZXcgRGF0ZSh0aGlzLm9wdGlvbnMuc3RhcnRZZWFyLCBtLCAxKTsKICAgICAgICAgICAgdmFyIHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTsKICAgICAgICAgICAgdGFibGUuY2xhc3NMaXN0LmFkZCgnbW9udGgnKTsKICAgICAgICAgICAgLyogTW9udGggaGVhZGVyICovCgogICAgICAgICAgICB2YXIgdGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aGVhZCcpOwogICAgICAgICAgICB2YXIgdGl0bGVSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwogICAgICAgICAgICB2YXIgdGl0bGVDZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGgnKTsKICAgICAgICAgICAgdGl0bGVDZWxsLmNsYXNzTGlzdC5hZGQoJ21vbnRoLXRpdGxlJyk7CiAgICAgICAgICAgIHRpdGxlQ2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbHNwYW4nLCB0aGlzLm9wdGlvbnMuZGlzcGxheVdlZWtOdW1iZXIgPyAnOCcgOiAnNycpOwogICAgICAgICAgICB0aXRsZUNlbGwudGV4dENvbnRlbnQgPSBDYWxlbmRhci5sb2NhbGVzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0ubW9udGhzW21dOwogICAgICAgICAgICB0aXRsZVJvdy5hcHBlbmRDaGlsZCh0aXRsZUNlbGwpOwogICAgICAgICAgICB0aGVhZC5hcHBlbmRDaGlsZCh0aXRsZVJvdyk7CiAgICAgICAgICAgIHZhciBoZWFkZXJSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwoKICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNwbGF5V2Vla051bWJlcikgewogICAgICAgICAgICAgIHZhciB3ZWVrTnVtYmVyQ2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RoJyk7CiAgICAgICAgICAgICAgd2Vla051bWJlckNlbGwuY2xhc3NMaXN0LmFkZCgnd2Vlay1udW1iZXInKTsKICAgICAgICAgICAgICB3ZWVrTnVtYmVyQ2VsbC50ZXh0Q29udGVudCA9IENhbGVuZGFyLmxvY2FsZXNbdGhpcy5vcHRpb25zLmxhbmd1YWdlXS53ZWVrU2hvcnQ7CiAgICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKHdlZWtOdW1iZXJDZWxsKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHdlZWtTdGFydCA9IHRoaXMub3B0aW9ucy53ZWVrU3RhcnQgPyB0aGlzLm9wdGlvbnMud2Vla1N0YXJ0IDogQ2FsZW5kYXIubG9jYWxlc1t0aGlzLm9wdGlvbnMubGFuZ3VhZ2VdLndlZWtTdGFydDsKICAgICAgICAgICAgdmFyIGQgPSB3ZWVrU3RhcnQ7CgogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgdmFyIGhlYWRlckNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0aCcpOwogICAgICAgICAgICAgIGhlYWRlckNlbGwuY2xhc3NMaXN0LmFkZCgnZGF5LWhlYWRlcicpOwogICAgICAgICAgICAgIGhlYWRlckNlbGwudGV4dENvbnRlbnQgPSBDYWxlbmRhci5sb2NhbGVzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0uZGF5c01pbltkXTsKCiAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzSGlkZGVuKGQpKSB7CiAgICAgICAgICAgICAgICBoZWFkZXJDZWxsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaGVhZGVyUm93LmFwcGVuZENoaWxkKGhlYWRlckNlbGwpOwogICAgICAgICAgICAgIGQrKzsKICAgICAgICAgICAgICBpZiAoZCA+PSA3KSBkID0gMDsKICAgICAgICAgICAgfSB3aGlsZSAoZCAhPSB3ZWVrU3RhcnQpOwoKICAgICAgICAgICAgdGhlYWQuYXBwZW5kQ2hpbGQoaGVhZGVyUm93KTsKICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQodGhlYWQpOwogICAgICAgICAgICAvKiBEYXlzICovCgogICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZShmaXJzdERhdGUuZ2V0VGltZSgpKTsKICAgICAgICAgICAgdmFyIGxhc3REYXRlID0gbmV3IERhdGUodGhpcy5vcHRpb25zLnN0YXJ0WWVhciwgbSArIDEsIDApOwoKICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnREYXRlLmdldERheSgpICE9IHdlZWtTdGFydCkgewogICAgICAgICAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoY3VycmVudERhdGUuZ2V0RGF0ZSgpIC0gMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBsYXN0RGF0ZSkgewogICAgICAgICAgICAgIHZhciByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpOwoKICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc3BsYXlXZWVrTnVtYmVyKSB7CiAgICAgICAgICAgICAgICB2YXIgd2Vla051bWJlckNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRUaHVyc2RheSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlLmdldFRpbWUoKSk7IC8vIFdlZWsgbnVtYmVyIGlzIGNvbXB1dGVkIGJhc2VkIG9uIHRoZSB0aHVyc2RheQoKICAgICAgICAgICAgICAgIGN1cnJlbnRUaHVyc2RheS5zZXREYXRlKGN1cnJlbnRUaHVyc2RheS5nZXREYXRlKCkgLSB3ZWVrU3RhcnQgKyA0KTsKICAgICAgICAgICAgICAgIHdlZWtOdW1iZXJDZWxsLmNsYXNzTGlzdC5hZGQoJ3dlZWstbnVtYmVyJyk7CiAgICAgICAgICAgICAgICB3ZWVrTnVtYmVyQ2VsbC50ZXh0Q29udGVudCA9IHRoaXMuZ2V0V2Vla051bWJlcihjdXJyZW50VGh1cnNkYXkpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQod2Vla051bWJlckNlbGwpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgdmFyIGNlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpOwogICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCdkYXknKTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5faXNIaWRkZW4oY3VycmVudERhdGUuZ2V0RGF5KCkpKSB7CiAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREYXRlIDwgZmlyc3REYXRlKSB7CiAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnb2xkJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnREYXRlID4gbGFzdERhdGUpIHsKICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKCduZXcnKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0Rpc2FibGVkKGN1cnJlbnREYXRlKSkgewogICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdmFyIGNlbGxDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgIGNlbGxDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2RheS1jb250ZW50Jyk7CiAgICAgICAgICAgICAgICAgIGNlbGxDb250ZW50LnRleHRDb250ZW50ID0gY3VycmVudERhdGUuZ2V0RGF0ZSgpLnRvU3RyaW5nKCk7CiAgICAgICAgICAgICAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoY2VsbENvbnRlbnQpOwoKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jdXN0b21EYXlSZW5kZXJlcikgewogICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jdXN0b21EYXlSZW5kZXJlcihjZWxsQ29udGVudCwgY3VycmVudERhdGUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpOwogICAgICAgICAgICAgICAgY3VycmVudERhdGUuc2V0RGF0ZShjdXJyZW50RGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgICAgICAgICB9IHdoaWxlIChjdXJyZW50RGF0ZS5nZXREYXkoKSAhPSB3ZWVrU3RhcnQpOwoKICAgICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtb250aERpdi5hcHBlbmRDaGlsZCh0YWJsZSk7CiAgICAgICAgICAgIG1vbnRoc0Rpdi5hcHBlbmRDaGlsZChtb250aERpdik7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKG1vbnRoc0Rpdik7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3JlbmRlckxvYWRpbmciLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyTG9hZGluZygpIHsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdjYWxlbmRhci1sb2FkaW5nLWNvbnRhaW5lcicpOwogICAgICAgICAgY29udGFpbmVyLnN0eWxlLm1pbkhlaWdodCA9IHRoaXMuX25iQ29scyAqIDIwMCArICdweCc7CiAgICAgICAgICB2YXIgbG9hZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgbG9hZGluZy5jbGFzc0xpc3QuYWRkKCdjYWxlbmRhci1sb2FkaW5nJyk7CgogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkaW5nVGVtcGxhdGUpIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMubG9hZGluZ1RlbXBsYXRlID09PSAic3RyaW5nIikgewogICAgICAgICAgICAgIGxvYWRpbmcuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmxvYWRpbmdUZW1wbGF0ZTsKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMubG9hZGluZ1RlbXBsYXRlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKICAgICAgICAgICAgICBsb2FkaW5nLmFwcGVuZENoaWxkKHRoaXMub3B0aW9ucy5sb2FkaW5nVGVtcGxhdGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgc3Bpbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBzcGlubmVyLmNsYXNzTGlzdC5hZGQoJ2NhbGVuZGFyLXNwaW5uZXInKTsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDM7IGkrKykgewogICAgICAgICAgICAgIHZhciBib3VuY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICBib3VuY2UuY2xhc3NMaXN0LmFkZCgiYm91bmNlIi5jb25jYXQoaSkpOwogICAgICAgICAgICAgIHNwaW5uZXIuYXBwZW5kQ2hpbGQoYm91bmNlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbG9hZGluZy5hcHBlbmRDaGlsZChzcGlubmVyKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobG9hZGluZyk7CiAgICAgICAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVuZGVyRGF0YVNvdXJjZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJEYXRhU291cmNlKCkgewogICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICBpZiAodGhpcy5fZGF0YVNvdXJjZSAhPSBudWxsICYmIHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoID4gMCkgewogICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vbnRoLWNvbnRhaW5lcicpLmZvckVhY2goZnVuY3Rpb24gKG1vbnRoKSB7CiAgICAgICAgICAgICAgdmFyIG1vbnRoSWQgPSBwYXJzZUludChtb250aC5kYXRhc2V0Lm1vbnRoSWQpOwogICAgICAgICAgICAgIHZhciBmaXJzdERhdGUgPSBuZXcgRGF0ZShfdGhpcy5vcHRpb25zLnN0YXJ0WWVhciwgbW9udGhJZCwgMSk7CiAgICAgICAgICAgICAgdmFyIGxhc3REYXRlID0gbmV3IERhdGUoX3RoaXMub3B0aW9ucy5zdGFydFllYXIsIG1vbnRoSWQgKyAxLCAxKTsKCiAgICAgICAgICAgICAgaWYgKChfdGhpcy5vcHRpb25zLm1pbkRhdGUgPT0gbnVsbCB8fCBsYXN0RGF0ZSA+IF90aGlzLm9wdGlvbnMubWluRGF0ZSkgJiYgKF90aGlzLm9wdGlvbnMubWF4RGF0ZSA9PSBudWxsIHx8IGZpcnN0RGF0ZSA8PSBfdGhpcy5vcHRpb25zLm1heERhdGUpKSB7CiAgICAgICAgICAgICAgICB2YXIgbW9udGhEYXRhID0gW107CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5fZGF0YVNvdXJjZS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpZiAoIShfdGhpcy5fZGF0YVNvdXJjZVtpXS5zdGFydERhdGUgPj0gbGFzdERhdGUpIHx8IF90aGlzLl9kYXRhU291cmNlW2ldLmVuZERhdGUgPCBmaXJzdERhdGUpIHsKICAgICAgICAgICAgICAgICAgICBtb250aERhdGEucHVzaChfdGhpcy5fZGF0YVNvdXJjZVtpXSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAobW9udGhEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgbW9udGgucXVlcnlTZWxlY3RvckFsbCgnLmRheS1jb250ZW50JykuZm9yRWFjaChmdW5jdGlvbiAoZGF5KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXRlID0gbmV3IERhdGUoX3RoaXMub3B0aW9ucy5zdGFydFllYXIsIG1vbnRoSWQsIHBhcnNlSW50KGRheS50ZXh0Q29udGVudCkpOwogICAgICAgICAgICAgICAgICAgIHZhciBuZXh0RGF0ZSA9IG5ldyBEYXRlKF90aGlzLm9wdGlvbnMuc3RhcnRZZWFyLCBtb250aElkLCBjdXJyZW50RGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgICAgICAgICAgICAgICB2YXIgZGF5RGF0YSA9IFtdOwoKICAgICAgICAgICAgICAgICAgICBpZiAoKF90aGlzLm9wdGlvbnMubWluRGF0ZSA9PSBudWxsIHx8IGN1cnJlbnREYXRlID49IF90aGlzLm9wdGlvbnMubWluRGF0ZSkgJiYgKF90aGlzLm9wdGlvbnMubWF4RGF0ZSA9PSBudWxsIHx8IGN1cnJlbnREYXRlIDw9IF90aGlzLm9wdGlvbnMubWF4RGF0ZSkpIHsKICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbW9udGhEYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb250aERhdGFbaV0uc3RhcnREYXRlIDwgbmV4dERhdGUgJiYgbW9udGhEYXRhW2ldLmVuZERhdGUgPj0gY3VycmVudERhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXlEYXRhLnB1c2gobW9udGhEYXRhW2ldKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXlEYXRhLmxlbmd0aCA+IDAgJiYgKF90aGlzLm9wdGlvbnMuZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZSB8fCAhX3RoaXMuX2lzRGlzYWJsZWQoY3VycmVudERhdGUpKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVuZGVyRGF0YVNvdXJjZURheShkYXksIGN1cnJlbnREYXRlLCBkYXlEYXRhKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3JlbmRlckRhdGFTb3VyY2VEYXkiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyRGF0YVNvdXJjZURheShlbHQsIGN1cnJlbnREYXRlLCBldmVudHMpIHsKICAgICAgICAgIHZhciBwYXJlbnQgPSBlbHQucGFyZW50RWxlbWVudDsKCiAgICAgICAgICBzd2l0Y2ggKHRoaXMub3B0aW9ucy5zdHlsZSkgewogICAgICAgICAgICBjYXNlICdib3JkZXInOgogICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSAwOwoKICAgICAgICAgICAgICBpZiAoZXZlbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgICAgICAgICAgICB3ZWlnaHQgPSA0OwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnRzLmxlbmd0aCA8PSAzKSB7CiAgICAgICAgICAgICAgICB3ZWlnaHQgPSAyOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBwYXJlbnQuc3R5bGUuYm94U2hhZG93ID0gJ2luc2V0IDAgLTRweCAwIDAgYmxhY2snOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKHdlaWdodCA+IDApIHsKICAgICAgICAgICAgICAgIHZhciBib3hTaGFkb3cgPSAnJzsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBpZiAoYm94U2hhZG93ICE9ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgYm94U2hhZG93ICs9ICIsIjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgYm94U2hhZG93ICs9ICJpbnNldCAwIC0iLmNvbmNhdCgoaSArIDEpICogd2VpZ2h0LCAicHggMCAwICIpLmNvbmNhdChldmVudHNbaV0uY29sb3IpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHBhcmVudC5zdHlsZS5ib3hTaGFkb3cgPSBib3hTaGFkb3c7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ2JhY2tncm91bmQnOgogICAgICAgICAgICAgIHBhcmVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBldmVudHNbZXZlbnRzLmxlbmd0aCAtIDFdLmNvbG9yOwogICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IGN1cnJlbnREYXRlLmdldFRpbWUoKTsKCiAgICAgICAgICAgICAgaWYgKGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0uc3RhcnREYXRlLmdldFRpbWUoKSA9PSBjdXJyZW50VGltZSkgewogICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoJ2RheS1zdGFydCcpOwoKICAgICAgICAgICAgICAgIGlmIChldmVudHNbZXZlbnRzLmxlbmd0aCAtIDFdLnN0YXJ0SGFsZkRheSB8fCB0aGlzLm9wdGlvbnMuYWx3YXlzSGFsZkRheSkgewogICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnZGF5LWhhbGYnKTsgLy8gRmluZCBjb2xvciBmb3Igb3RoZXIgaGFsZgoKICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ29sb3IgPSAndHJhbnNwYXJlbnQnOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGV2ZW50cy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgIGlmIChldmVudHNbaV0uc3RhcnREYXRlLmdldFRpbWUoKSAhPSBjdXJyZW50VGltZSB8fCAhZXZlbnRzW2ldLnN0YXJ0SGFsZkRheSAmJiAhdGhpcy5vcHRpb25zLmFsd2F5c0hhbGZEYXkpIHsKICAgICAgICAgICAgICAgICAgICAgIG90aGVyQ29sb3IgPSBldmVudHNbaV0uY29sb3I7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHBhcmVudC5zdHlsZS5iYWNrZ3JvdW5kID0gImxpbmVhci1ncmFkaWVudCgtNDVkZWcsICIuY29uY2F0KGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0uY29sb3IsICIsICIpLmNvbmNhdChldmVudHNbZXZlbnRzLmxlbmd0aCAtIDFdLmNvbG9yLCAiIDQ5JSwgIikuY29uY2F0KG90aGVyQ29sb3IsICIgNTElLCAiKS5jb25jYXQob3RoZXJDb2xvciwgIikiKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnJvdW5kUmFuZ2VMaW1pdHMpIHsKICAgICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoJ3JvdW5kLWxlZnQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0uZW5kRGF0ZS5nZXRUaW1lKCkgPT0gY3VycmVudFRpbWUpIHsKICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCdkYXktZW5kJyk7CgogICAgICAgICAgICAgICAgaWYgKGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0uZW5kSGFsZkRheSB8fCB0aGlzLm9wdGlvbnMuYWx3YXlzSGFsZkRheSkgewogICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgnZGF5LWhhbGYnKTsgLy8gRmluZCBjb2xvciBmb3Igb3RoZXIgaGFsZgoKICAgICAgICAgICAgICAgICAgdmFyIG90aGVyQ29sb3IgPSAndHJhbnNwYXJlbnQnOwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGV2ZW50cy5sZW5ndGggLSAyOyBpID49IDA7IGktLSkgewogICAgICAgICAgICAgICAgICAgIGlmIChldmVudHNbaV0uZW5kRGF0ZS5nZXRUaW1lKCkgIT0gY3VycmVudFRpbWUgfHwgIWV2ZW50c1tpXS5lbmRIYWxmRGF5ICYmICF0aGlzLm9wdGlvbnMuYWx3YXlzSGFsZkRheSkgewogICAgICAgICAgICAgICAgICAgICAgb3RoZXJDb2xvciA9IGV2ZW50c1tpXS5jb2xvcjsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgcGFyZW50LnN0eWxlLmJhY2tncm91bmQgPSAibGluZWFyLWdyYWRpZW50KDEzNWRlZywgIi5jb25jYXQoZXZlbnRzW2V2ZW50cy5sZW5ndGggLSAxXS5jb2xvciwgIiwgIikuY29uY2F0KGV2ZW50c1tldmVudHMubGVuZ3RoIC0gMV0uY29sb3IsICIgNDklLCAiKS5jb25jYXQob3RoZXJDb2xvciwgIiA1MSUsICIpLmNvbmNhdChvdGhlckNvbG9yLCAiKSIpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMucm91bmRSYW5nZUxpbWl0cykgewogICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZCgncm91bmQtcmlnaHQnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnY3VzdG9tJzoKICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmN1c3RvbURhdGFTb3VyY2VSZW5kZXJlcikgewogICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmN1c3RvbURhdGFTb3VyY2VSZW5kZXJlci5jYWxsKHRoaXMsIGVsdCwgY3VycmVudERhdGUsIGV2ZW50cyk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfYXBwbHlFdmVudHMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwbHlFdmVudHMoKSB7CiAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc3BsYXlIZWFkZXIpIHsKICAgICAgICAgICAgLyogSGVhZGVyIGJ1dHRvbnMgKi8KICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy55ZWFyLW5laWdoYm9yLCAueWVhci1uZWlnaGJvcjInKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLnNldFllYXIocGFyc2VJbnQoZS5jdXJyZW50VGFyZ2V0LnRleHRDb250ZW50KSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGVuZGFyLWhlYWRlciAucHJldicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBpZiAoIWUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHsKICAgICAgICAgICAgICAgIHZhciBtb250aHMgPSBfdGhpczIuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9udGhzLWNvbnRhaW5lcicpOwoKICAgICAgICAgICAgICAgIG1vbnRocy5zdHlsZS50cmFuc2l0aW9uID0gJ21hcmdpbi1sZWZ0IDAuMXMnOwogICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLm1hcmdpbkxlZnQgPSAnMTAwJSc7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLnRyYW5zaXRpb24gPSAnJzsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLm1hcmdpbkxlZnQgPSAnMCc7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRZZWFyKF90aGlzMi5vcHRpb25zLnN0YXJ0WWVhciAtIDEpOwogICAgICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FsZW5kYXItaGVhZGVyIC5uZXh0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmICghZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkgewogICAgICAgICAgICAgICAgdmFyIG1vbnRocyA9IF90aGlzMi5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb250aHMtY29udGFpbmVyJyk7CgogICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLnRyYW5zaXRpb24gPSAnbWFyZ2luLWxlZnQgMC4xcyc7CiAgICAgICAgICAgICAgICBtb250aHMuc3R5bGUubWFyZ2luTGVmdCA9ICctMTAwJSc7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLnRyYW5zaXRpb24gPSAnJzsKICAgICAgICAgICAgICAgICAgbW9udGhzLnN0eWxlLm1hcmdpbkxlZnQgPSAnMCc7CiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRZZWFyKF90aGlzMi5vcHRpb25zLnN0YXJ0WWVhciArIDEpOwogICAgICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIGNlbGxzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXk6bm90KC5vbGQpOm5vdCgubmV3KTpub3QoLmRpc2FibGVkKScpOwogICAgICAgICAgY2VsbHMuZm9yRWFjaChmdW5jdGlvbiAoY2VsbCkgewogICAgICAgICAgICAvKiBDbGljayBvbiBkYXRlICovCiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgICAgICAgICAgIHZhciBkYXRlID0gX3RoaXMyLl9nZXREYXRlKGUuY3VycmVudFRhcmdldCk7CgogICAgICAgICAgICAgIF90aGlzMi5fdHJpZ2dlckV2ZW50KCdjbGlja0RheScsIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUuY3VycmVudFRhcmdldCwKICAgICAgICAgICAgICAgIGRhdGU6IGRhdGUsCiAgICAgICAgICAgICAgICBldmVudHM6IF90aGlzMi5nZXRFdmVudHMoZGF0ZSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8qIENsaWNrIHJpZ2h0IG9uIGRhdGUgKi8KCiAgICAgICAgICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmIChfdGhpczIub3B0aW9ucy5lbmFibGVDb250ZXh0TWVudSkgewogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczIub3B0aW9ucy5jb250ZXh0TWVudUl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLl9vcGVuQ29udGV4dE1lbnUoZS5jdXJyZW50VGFyZ2V0KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHZhciBkYXRlID0gX3RoaXMyLl9nZXREYXRlKGUuY3VycmVudFRhcmdldCk7CgogICAgICAgICAgICAgIF90aGlzMi5fdHJpZ2dlckV2ZW50KCdkYXlDb250ZXh0TWVudScsIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUuY3VycmVudFRhcmdldCwKICAgICAgICAgICAgICAgIGRhdGU6IGRhdGUsCiAgICAgICAgICAgICAgICBldmVudHM6IF90aGlzMi5nZXRFdmVudHMoZGF0ZSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8qIFJhbmdlIHNlbGVjdGlvbiAqLwoKICAgICAgICAgICAgaWYgKF90aGlzMi5vcHRpb25zLmVuYWJsZVJhbmdlU2VsZWN0aW9uKSB7CiAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgaWYgKGUud2hpY2ggPT0gMSkgewogICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBfdGhpczIuX2dldERhdGUoZS5jdXJyZW50VGFyZ2V0KTsKCiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczIub3B0aW9ucy5hbGxvd092ZXJsYXAgfHwgX3RoaXMyLmlzVGhlcmVGcmVlU2xvdChjdXJyZW50RGF0ZSkpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuX21vdXNlRG93biA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9yYW5nZVN0YXJ0ID0gX3RoaXMyLl9yYW5nZUVuZCA9IGN1cnJlbnREYXRlOwoKICAgICAgICAgICAgICAgICAgICBfdGhpczIuX3JlZnJlc2hSYW5nZSgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgY2VsbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIGlmIChfdGhpczIuX21vdXNlRG93bikgewogICAgICAgICAgICAgICAgICB2YXIgY3VycmVudERhdGUgPSBfdGhpczIuX2dldERhdGUoZS5jdXJyZW50VGFyZ2V0KTsKCiAgICAgICAgICAgICAgICAgIGlmICghX3RoaXMyLm9wdGlvbnMuYWxsb3dPdmVybGFwKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZShfdGhpczIuX3JhbmdlU3RhcnQuZ2V0VGltZSgpKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0RhdGUgPCBjdXJyZW50RGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHREYXRlID0gbmV3IERhdGUobmV3RGF0ZS5nZXRGdWxsWWVhcigpLCBuZXdEYXRlLmdldE1vbnRoKCksIG5ld0RhdGUuZ2V0RGF0ZSgpICsgMSk7CgogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG5ld0RhdGUgPCBjdXJyZW50RGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5pc1RoZXJlRnJlZVNsb3QobmV4dERhdGUsIGZhbHNlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRlLnNldERhdGUobmV3RGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgICAgbmV4dERhdGUuc2V0RGF0ZShuZXh0RGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgdmFyIG5leHREYXRlID0gbmV3IERhdGUobmV3RGF0ZS5nZXRGdWxsWWVhcigpLCBuZXdEYXRlLmdldE1vbnRoKCksIG5ld0RhdGUuZ2V0RGF0ZSgpIC0gMSk7CgogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG5ld0RhdGUgPiBjdXJyZW50RGF0ZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5pc1RoZXJlRnJlZVNsb3QobmV4dERhdGUsIHRydWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RhdGUuc2V0RGF0ZShuZXdEYXRlLmdldERhdGUoKSAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBuZXh0RGF0ZS5zZXREYXRlKG5leHREYXRlLmdldERhdGUoKSAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBuZXdEYXRlOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSBfdGhpczIuX3JhbmdlRW5kOwogICAgICAgICAgICAgICAgICBfdGhpczIuX3JhbmdlRW5kID0gY3VycmVudERhdGU7CgogICAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWUuZ2V0VGltZSgpICE9IF90aGlzMi5fcmFuZ2VFbmQuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9yZWZyZXNoUmFuZ2UoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8qIEhvdmVyIGRhdGUgKi8KCgogICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGlmICghX3RoaXMyLl9tb3VzZURvd24pIHsKICAgICAgICAgICAgICAgIHZhciBkYXRlID0gX3RoaXMyLl9nZXREYXRlKGUuY3VycmVudFRhcmdldCk7CgogICAgICAgICAgICAgICAgX3RoaXMyLl90cmlnZ2VyRXZlbnQoJ21vdXNlT25EYXknLCB7CiAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUuY3VycmVudFRhcmdldCwKICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZSwKICAgICAgICAgICAgICAgICAgZXZlbnRzOiBfdGhpczIuZ2V0RXZlbnRzKGRhdGUpCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHZhciBkYXRlID0gX3RoaXMyLl9nZXREYXRlKGUuY3VycmVudFRhcmdldCk7CgogICAgICAgICAgICAgIF90aGlzMi5fdHJpZ2dlckV2ZW50KCdtb3VzZU91dERheScsIHsKICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGUuY3VycmVudFRhcmdldCwKICAgICAgICAgICAgICAgIGRhdGU6IGRhdGUsCiAgICAgICAgICAgICAgICBldmVudHM6IF90aGlzMi5nZXRFdmVudHMoZGF0ZSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZVJhbmdlU2VsZWN0aW9uKSB7CiAgICAgICAgICAgIC8vIFJlbGVhc2UgcmFuZ2Ugc2VsZWN0aW9uCiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBpZiAoX3RoaXMyLl9tb3VzZURvd24pIHsKICAgICAgICAgICAgICAgIF90aGlzMi5fbW91c2VEb3duID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMyLl9yZWZyZXNoUmFuZ2UoKTsKCiAgICAgICAgICAgICAgICB2YXIgbWluRGF0ZSA9IF90aGlzMi5fcmFuZ2VTdGFydCA8IF90aGlzMi5fcmFuZ2VFbmQgPyBfdGhpczIuX3JhbmdlU3RhcnQgOiBfdGhpczIuX3JhbmdlRW5kOwogICAgICAgICAgICAgICAgdmFyIG1heERhdGUgPSBfdGhpczIuX3JhbmdlRW5kID4gX3RoaXMyLl9yYW5nZVN0YXJ0ID8gX3RoaXMyLl9yYW5nZUVuZCA6IF90aGlzMi5fcmFuZ2VTdGFydDsKCiAgICAgICAgICAgICAgICBfdGhpczIuX3RyaWdnZXJFdmVudCgnc2VsZWN0UmFuZ2UnLCB7CiAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogbWluRGF0ZSwKICAgICAgICAgICAgICAgICAgZW5kRGF0ZTogbWF4RGF0ZSwKICAgICAgICAgICAgICAgICAgZXZlbnRzOiBfdGhpczIuZ2V0RXZlbnRzT25SYW5nZShtaW5EYXRlLCBuZXcgRGF0ZShtYXhEYXRlLmdldEZ1bGxZZWFyKCksIG1heERhdGUuZ2V0TW9udGgoKSwgbWF4RGF0ZS5nZXREYXRlKCkgKyAxKSkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICAvKiBSZXNwb25zaXZlIG1hbmFnZW1lbnQgKi8KCgogICAgICAgICAgaWYgKHRoaXMuX3Jlc3BvbnNpdmVJbnRlcnZhbCkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX3Jlc3BvbnNpdmVJbnRlcnZhbCk7CiAgICAgICAgICAgIHRoaXMuX3Jlc3BvbnNpdmVJbnRlcnZhbCA9IG51bGw7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5fcmVzcG9uc2l2ZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMyLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vbnRoJykgPT0gbnVsbCkgewogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGNhbGVuZGFyU2l6ZSA9IF90aGlzMi5lbGVtZW50Lm9mZnNldFdpZHRoOwogICAgICAgICAgICB2YXIgbW9udGhTaXplID0gX3RoaXMyLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLm1vbnRoJykub2Zmc2V0V2lkdGggKyAxMDsKICAgICAgICAgICAgX3RoaXMyLl9uYkNvbHMgPSBudWxsOwoKICAgICAgICAgICAgaWYgKG1vbnRoU2l6ZSAqIDYgPCBjYWxlbmRhclNpemUpIHsKICAgICAgICAgICAgICBfdGhpczIuX25iQ29scyA9IDI7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobW9udGhTaXplICogNCA8IGNhbGVuZGFyU2l6ZSkgewogICAgICAgICAgICAgIF90aGlzMi5fbmJDb2xzID0gMzsKICAgICAgICAgICAgfSBlbHNlIGlmIChtb250aFNpemUgKiAzIDwgY2FsZW5kYXJTaXplKSB7CiAgICAgICAgICAgICAgX3RoaXMyLl9uYkNvbHMgPSA0OwogICAgICAgICAgICB9IGVsc2UgaWYgKG1vbnRoU2l6ZSAqIDIgPCBjYWxlbmRhclNpemUpIHsKICAgICAgICAgICAgICBfdGhpczIuX25iQ29scyA9IDY7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMyLl9uYkNvbHMgPSAxMjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMyLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vbnRoLWNvbnRhaW5lcicpLmZvckVhY2goZnVuY3Rpb24gKG1vbnRoKSB7CiAgICAgICAgICAgICAgaWYgKCFtb250aC5jbGFzc0xpc3QuY29udGFpbnMoIm1vbnRoLSIuY29uY2F0KF90aGlzMi5fbmJDb2xzKSkpIHsKICAgICAgICAgICAgICAgIFsnbW9udGgtMicsICdtb250aC0zJywgJ21vbnRoLTQnLCAnbW9udGgtNicsICdtb250aC0xMiddLmZvckVhY2goZnVuY3Rpb24gKGNsYXNzTmFtZSkgewogICAgICAgICAgICAgICAgICBtb250aC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIG1vbnRoLmNsYXNzTGlzdC5hZGQoIm1vbnRoLSIuY29uY2F0KF90aGlzMi5fbmJDb2xzKSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sIDMwMCk7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX3JlZnJlc2hSYW5nZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZWZyZXNoUmFuZ2UoKSB7CiAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGQuZGF5LnJhbmdlJykuZm9yRWFjaChmdW5jdGlvbiAoZGF5KSB7CiAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0LnJlbW92ZSgncmFuZ2UnKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLmRheS5yYW5nZS1zdGFydCcpLmZvckVhY2goZnVuY3Rpb24gKGRheSkgewogICAgICAgICAgICByZXR1cm4gZGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3JhbmdlLXN0YXJ0Jyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5kYXkucmFuZ2UtZW5kJykuZm9yRWFjaChmdW5jdGlvbiAoZGF5KSB7CiAgICAgICAgICAgIHJldHVybiBkYXkuY2xhc3NMaXN0LnJlbW92ZSgncmFuZ2UtZW5kJyk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGhpcy5fbW91c2VEb3duKSB7CiAgICAgICAgICAgIHZhciBtaW5EYXRlID0gdGhpcy5fcmFuZ2VTdGFydCA8IHRoaXMuX3JhbmdlRW5kID8gdGhpcy5fcmFuZ2VTdGFydCA6IHRoaXMuX3JhbmdlRW5kOwogICAgICAgICAgICB2YXIgbWF4RGF0ZSA9IHRoaXMuX3JhbmdlRW5kID4gdGhpcy5fcmFuZ2VTdGFydCA/IHRoaXMuX3JhbmdlRW5kIDogdGhpcy5fcmFuZ2VTdGFydDsKICAgICAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb250aC1jb250YWluZXInKS5mb3JFYWNoKGZ1bmN0aW9uIChtb250aCkgewogICAgICAgICAgICAgIHZhciBtb250aElkID0gcGFyc2VJbnQobW9udGguZGF0YXNldC5tb250aElkKTsKCiAgICAgICAgICAgICAgaWYgKG1pbkRhdGUuZ2V0TW9udGgoKSA8PSBtb250aElkICYmIG1heERhdGUuZ2V0TW9udGgoKSA+PSBtb250aElkKSB7CiAgICAgICAgICAgICAgICBtb250aC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5kYXk6bm90KC5vbGQpOm5vdCgubmV3KScpLmZvckVhY2goZnVuY3Rpb24gKGRheSkgewogICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IF90aGlzMy5fZ2V0RGF0ZShkYXkpOwoKICAgICAgICAgICAgICAgICAgaWYgKGRhdGUgPj0gbWluRGF0ZSAmJiBkYXRlIDw9IG1heERhdGUpIHsKICAgICAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZCgncmFuZ2UnKTsKCiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0VGltZSgpID09IG1pbkRhdGUuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgICBkYXkuY2xhc3NMaXN0LmFkZCgncmFuZ2Utc3RhcnQnKTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmIChkYXRlLmdldFRpbWUoKSA9PSBtYXhEYXRlLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgICAgICAgZGF5LmNsYXNzTGlzdC5hZGQoJ3JhbmdlLWVuZCcpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZ2V0RWxlbWVudFBvc2l0aW9uIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEVsZW1lbnRQb3NpdGlvbihlbGVtZW50KSB7CiAgICAgICAgICB2YXIgdG9wID0gMCwKICAgICAgICAgICAgICBsZWZ0ID0gMDsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcCB8fCAwOwogICAgICAgICAgICBsZWZ0ICs9IGVsZW1lbnQub2Zmc2V0TGVmdCB8fCAwOwogICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7CiAgICAgICAgICB9IHdoaWxlIChlbGVtZW50KTsKCiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB0b3A6IHRvcCwKICAgICAgICAgICAgbGVmdDogbGVmdAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfb3BlbkNvbnRleHRNZW51IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29wZW5Db250ZXh0TWVudShlbHQpIHsKICAgICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgICAgIHZhciBjb250ZXh0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jb250ZXh0LW1lbnUnKTsKCiAgICAgICAgICBpZiAoY29udGV4dE1lbnUgIT09IG51bGwpIHsKICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gQ2xlYXIgdGhlIGNvbnRleHQgbWVudSAoZmFzdGVyIG1ldGhvZCkKCiAgICAgICAgICAgIHdoaWxlIChjb250ZXh0TWVudS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgY29udGV4dE1lbnUucmVtb3ZlQ2hpbGQoY29udGV4dE1lbnUuZmlyc3RDaGlsZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnRleHRNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGNvbnRleHRNZW51LmNsYXNzTGlzdC5hZGQoJ2NhbGVuZGFyLWNvbnRleHQtbWVudScpOwogICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRleHRNZW51KTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgZGF0ZSA9IHRoaXMuX2dldERhdGUoZWx0KTsKCiAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5nZXRFdmVudHMoZGF0ZSk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIGV2ZW50SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBldmVudEl0ZW0uY2xhc3NMaXN0LmFkZCgnaXRlbScpOwogICAgICAgICAgICBldmVudEl0ZW0uc3R5bGUucGFkZGluZ0xlZnQgPSAnNHB4JzsKICAgICAgICAgICAgZXZlbnRJdGVtLnN0eWxlLmJveFNoYWRvdyA9ICJpbnNldCA0cHggMCAwIDAgIi5jb25jYXQoZXZlbnRzW2ldLmNvbG9yKTsKICAgICAgICAgICAgdmFyIGV2ZW50SXRlbUNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZXZlbnRJdGVtQ29udGVudC5jbGFzc0xpc3QuYWRkKCdjb250ZW50Jyk7CiAgICAgICAgICAgIHZhciB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOwogICAgICAgICAgICB0ZXh0LmNsYXNzTGlzdC5hZGQoJ3RleHQnKTsKICAgICAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGV2ZW50c1tpXS5uYW1lOwogICAgICAgICAgICBldmVudEl0ZW1Db250ZW50LmFwcGVuZENoaWxkKHRleHQpOwogICAgICAgICAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgaWNvbi5jbGFzc0xpc3QuYWRkKCdhcnJvdycpOwogICAgICAgICAgICBpY29uLmlubmVySFRNTCA9ICImcnNhcXVvOyI7CiAgICAgICAgICAgIGV2ZW50SXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQoaWNvbik7CiAgICAgICAgICAgIGV2ZW50SXRlbS5hcHBlbmRDaGlsZChldmVudEl0ZW1Db250ZW50KTsKCiAgICAgICAgICAgIHRoaXMuX3JlbmRlckNvbnRleHRNZW51SXRlbXMoZXZlbnRJdGVtLCB0aGlzLm9wdGlvbnMuY29udGV4dE1lbnVJdGVtcywgZXZlbnRzW2ldKTsKCiAgICAgICAgICAgIGNvbnRleHRNZW51LmFwcGVuZENoaWxkKGV2ZW50SXRlbSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNvbnRleHRNZW51LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5fZ2V0RWxlbWVudFBvc2l0aW9uKGVsdCk7CgogICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gcG9zaXRpb24ubGVmdCArIDI1ICsgJ3B4JzsKICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUucmlnaHQgPSAnJzsKICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUudG9wID0gcG9zaXRpb24udG9wICsgMjUgKyAncHgnOwogICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKCiAgICAgICAgICAgIGlmIChjb250ZXh0TWVudS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA+IGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgpIHsKICAgICAgICAgICAgICBjb250ZXh0TWVudS5zdHlsZS5sZWZ0ID0gJyc7CiAgICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUucmlnaHQgPSAnMCc7CiAgICAgICAgICAgIH0gLy8gTGF1bmNoIHRoZSBwb3NpdGlvbiBjaGVjayBvbmNlIHRoZSB3aG9sZSBjb250ZXh0IG1lbnUgdHJlZSB3aWxsIGJlIHJlbmRlcmVkCgoKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5fY2hlY2tDb250ZXh0TWVudUl0ZW1zUG9zaXRpb24oKTsKICAgICAgICAgICAgfSwgMCk7CgogICAgICAgICAgICB2YXIgY2xvc2VDb250ZXh0TWVudSA9IGZ1bmN0aW9uIGNsb3NlQ29udGV4dE1lbnUoZXZlbnQpIHsKICAgICAgICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ2NsaWNrJyB8fCAhY29udGV4dE1lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkgewogICAgICAgICAgICAgICAgY29udGV4dE1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQ29udGV4dE1lbnUpOwogICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGNsb3NlQ29udGV4dE1lbnUpOwogICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNsb3NlQ29udGV4dE1lbnUpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlQ29udGV4dE1lbnUpOwogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgY2xvc2VDb250ZXh0TWVudSk7CiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjbG9zZUNvbnRleHRNZW51KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfcmVuZGVyQ29udGV4dE1lbnVJdGVtcyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJDb250ZXh0TWVudUl0ZW1zKHBhcmVudCwgaXRlbXMsIGV2dCkgewogICAgICAgICAgdmFyIHN1Yk1lbnUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgIHN1Yk1lbnUuY2xhc3NMaXN0LmFkZCgnc3VibWVudScpOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLnZpc2libGUgPT09IGZhbHNlIHx8IHR5cGVvZiBpdGVtc1tpXS52aXNpYmxlID09PSAiZnVuY3Rpb24iICYmICFpdGVtc1tpXS52aXNpYmxlKGV2dCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIG1lbnVJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIG1lbnVJdGVtLmNsYXNzTGlzdC5hZGQoJ2l0ZW0nKTsKICAgICAgICAgICAgdmFyIG1lbnVJdGVtQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBtZW51SXRlbUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY29udGVudCcpOwogICAgICAgICAgICB2YXIgdGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgdGV4dC5jbGFzc0xpc3QuYWRkKCd0ZXh0Jyk7CiAgICAgICAgICAgIHRleHQudGV4dENvbnRlbnQgPSBpdGVtc1tpXS50ZXh0OwogICAgICAgICAgICBtZW51SXRlbUNvbnRlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CgogICAgICAgICAgICBpZiAoaXRlbXNbaV0uY2xpY2spIHsKICAgICAgICAgICAgICAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgICAgICAgICBtZW51SXRlbUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxlbmRhci1jb250ZXh0LW1lbnUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgICBpdGVtc1tpbmRleF0uY2xpY2soZXZ0KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pKGkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtZW51SXRlbS5hcHBlbmRDaGlsZChtZW51SXRlbUNvbnRlbnQpOwoKICAgICAgICAgICAgaWYgKGl0ZW1zW2ldLml0ZW1zICYmIGl0ZW1zW2ldLml0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICB2YXIgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICAgICAgICBpY29uLmNsYXNzTGlzdC5hZGQoJ2Fycm93Jyk7CiAgICAgICAgICAgICAgaWNvbi5pbm5lckhUTUwgPSAiJnJzYXF1bzsiOwogICAgICAgICAgICAgIG1lbnVJdGVtQ29udGVudC5hcHBlbmRDaGlsZChpY29uKTsKCiAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyQ29udGV4dE1lbnVJdGVtcyhtZW51SXRlbSwgaXRlbXNbaV0uaXRlbXMsIGV2dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN1Yk1lbnUuYXBwZW5kQ2hpbGQobWVudUl0ZW0pOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChzdWJNZW51LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHN1Yk1lbnUpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl9jaGVja0NvbnRleHRNZW51SXRlbXNQb3NpdGlvbiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jaGVja0NvbnRleHRNZW51SXRlbXNQb3NpdGlvbigpIHsKICAgICAgICAgIHZhciBtZW51cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxlbmRhci1jb250ZXh0LW1lbnUgLnN1Ym1lbnUnKTsKICAgICAgICAgIG1lbnVzLmZvckVhY2goZnVuY3Rpb24gKG1lbnUpIHsKICAgICAgICAgICAgdmFyIGh0bWxNZW51ID0gbWVudTsKICAgICAgICAgICAgaHRtbE1lbnUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgIGh0bWxNZW51LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsKICAgICAgICAgIH0pOwogICAgICAgICAgbWVudXMuZm9yRWFjaChmdW5jdGlvbiAobWVudSkgewogICAgICAgICAgICB2YXIgaHRtbE1lbnUgPSBtZW51OwoKICAgICAgICAgICAgaWYgKGh0bWxNZW51LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0ID4gZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCkgewogICAgICAgICAgICAgIGh0bWxNZW51LmNsYXNzTGlzdC5hZGQoJ29wZW4tbGVmdCcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGh0bWxNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4tbGVmdCcpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIG1lbnVzLmZvckVhY2goZnVuY3Rpb24gKG1lbnUpIHsKICAgICAgICAgICAgdmFyIGh0bWxNZW51ID0gbWVudTsKICAgICAgICAgICAgaHRtbE1lbnUuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgICBodG1sTWVudS5zdHlsZS52aXNpYmlsaXR5ID0gJyc7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfZ2V0RGF0ZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXREYXRlKGVsdCkgewogICAgICAgICAgdmFyIGRheSA9IGVsdC5xdWVyeVNlbGVjdG9yKCcuZGF5LWNvbnRlbnQnKS50ZXh0Q29udGVudDsKICAgICAgICAgIHZhciBtb250aCA9IGVsdC5jbG9zZXN0KCcubW9udGgtY29udGFpbmVyJykuZGF0YXNldC5tb250aElkOwogICAgICAgICAgdmFyIHllYXIgPSB0aGlzLm9wdGlvbnMuc3RhcnRZZWFyOwogICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHllYXIsIG1vbnRoLCBkYXkpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIGtleTogIl90cmlnZ2VyRXZlbnQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJpZ2dlckV2ZW50KGV2ZW50TmFtZSwgcGFyYW1ldGVycykgewogICAgICAgICAgdmFyIGV2ZW50ID0gbnVsbDsKCiAgICAgICAgICBpZiAodHlwZW9mIEV2ZW50ID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgIGV2ZW50ID0gbmV3IEV2ZW50KGV2ZW50TmFtZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpOwogICAgICAgICAgICBldmVudC5pbml0RXZlbnQoZXZlbnROYW1lLCBmYWxzZSwgZmFsc2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGV2ZW50LmNhbGVuZGFyID0gdGhpczsKCiAgICAgICAgICBmb3IgKHZhciBpIGluIHBhcmFtZXRlcnMpIHsKICAgICAgICAgICAgZXZlbnRbaV0gPSBwYXJhbWV0ZXJzW2ldOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2ZW50KTsKICAgICAgICAgIHJldHVybiBldmVudDsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJfaXNEaXNhYmxlZCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0Rpc2FibGVkKGRhdGUpIHsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWluRGF0ZSAhPSBudWxsICYmIGRhdGUgPCB0aGlzLm9wdGlvbnMubWluRGF0ZSB8fCB0aGlzLm9wdGlvbnMubWF4RGF0ZSAhPSBudWxsICYmIGRhdGUgPiB0aGlzLm9wdGlvbnMubWF4RGF0ZSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkV2Vla0RheXMubGVuZ3RoID4gMCkgewogICAgICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IHRoaXMub3B0aW9ucy5kaXNhYmxlZFdlZWtEYXlzLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0RGF5KCkgPT0gdGhpcy5vcHRpb25zLmRpc2FibGVkV2Vla0RheXNbZF0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZWREYXlzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCB0aGlzLm9wdGlvbnMuZGlzYWJsZWREYXlzLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgICAgICAgaWYgKGRhdGUuZ2V0VGltZSgpID09IHRoaXMub3B0aW9ucy5kaXNhYmxlZERheXNbZF0uZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAga2V5OiAiX2lzSGlkZGVuIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzSGlkZGVuKGRheSkgewogICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5oaWRkZW5XZWVrRGF5cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgdGhpcy5vcHRpb25zLmhpZGRlbldlZWtEYXlzLmxlbmd0aDsgZCsrKSB7CiAgICAgICAgICAgICAgaWYgKGRheSA9PSB0aGlzLm9wdGlvbnMuaGlkZGVuV2Vla0RheXNbZF0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyB0aGUgd2VlayBudW1iZXIgZm9yIGEgc3BlY2lmaWVkIGRhdGUuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZGF0ZSBUaGUgc3BlY2lmaWVkIGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0V2Vla051bWJlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFdlZWtOdW1iZXIoZGF0ZSkgewogICAgICAgICAgLy8gQWxnb3JpdGhtIGZyb20gaHR0cHM6Ly93ZWVrbnVtYmVyLm5ldC9ob3ctdG8vamF2YXNjcmlwdAogICAgICAgICAgdmFyIHdvcmtpbmdEYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpOwogICAgICAgICAgd29ya2luZ0RhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7IC8vIFRodXJzZGF5IGluIGN1cnJlbnQgd2VlayBkZWNpZGVzIHRoZSB5ZWFyLgoKICAgICAgICAgIHdvcmtpbmdEYXRlLnNldERhdGUod29ya2luZ0RhdGUuZ2V0RGF0ZSgpICsgMyAtICh3b3JraW5nRGF0ZS5nZXREYXkoKSArIDYpICUgNyk7IC8vIEphbnVhcnkgNCBpcyBhbHdheXMgaW4gd2VlayAxLgoKICAgICAgICAgIHZhciB3ZWVrMSA9IG5ldyBEYXRlKHdvcmtpbmdEYXRlLmdldEZ1bGxZZWFyKCksIDAsIDQpOyAvLyBBZGp1c3QgdG8gVGh1cnNkYXkgaW4gd2VlayAxIGFuZCBjb3VudCBudW1iZXIgb2Ygd2Vla3MgZnJvbSBkYXRlIHRvIHdlZWsxLgoKICAgICAgICAgIHJldHVybiAxICsgTWF0aC5yb3VuZCgoKHdvcmtpbmdEYXRlLmdldFRpbWUoKSAtIHdlZWsxLmdldFRpbWUoKSkgLyA4NjQwMDAwMCAtIDMgKyAod2VlazEuZ2V0RGF5KCkgKyA2KSAlIDcpIC8gNyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGRhdGEgc291cmNlIGVsZW1lbnRzIGZvciBhIHNwZWNpZmllZCBkYXkuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZGF0ZSBUaGUgc3BlY2lmaWVkIGRheS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRFdmVudHMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRFdmVudHMoZGF0ZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RXZlbnRzT25SYW5nZShkYXRlLCBuZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkgKyAxKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGRhdGEgc291cmNlIGVsZW1lbnRzIGZvciBhIHNwZWNpZmllZCByYW5nZSBvZiBkYXlzLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIHN0YXJ0RGF0ZSBUaGUgYmVnaW5uaW5nIG9mIHRoZSBkYXkgcmFuZ2UgKGluY2x1c2l2ZSkuCiAgICAgICAgICogQHBhcmFtIGVuZERhdGUgVGhlIGVuZCBvZiB0aGUgZGF5IHJhbmdlIChub24gaW5jbHVzaXZlKS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRFdmVudHNPblJhbmdlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RXZlbnRzT25SYW5nZShzdGFydERhdGUsIGVuZERhdGUpIHsKICAgICAgICAgIHZhciBldmVudHMgPSBbXTsKCiAgICAgICAgICBpZiAodGhpcy5fZGF0YVNvdXJjZSAmJiBzdGFydERhdGUgJiYgZW5kRGF0ZSkgewogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2RhdGFTb3VyY2UubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBpZiAodGhpcy5fZGF0YVNvdXJjZVtpXS5zdGFydERhdGUgPCBlbmREYXRlICYmIHRoaXMuX2RhdGFTb3VyY2VbaV0uZW5kRGF0ZSA+PSBzdGFydERhdGUpIHsKICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKHRoaXMuX2RhdGFTb3VyY2VbaV0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBldmVudHM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIENoZWNrIGlmIHRoZXJlIGlzIG5vIGV2ZW50IG9uIHRoZSBmaXJzdCBwYXJ0LCBsYXN0IHBhcnQgb3Igb24gdGhlIHdob2xlIHNwZWNpZmllZCBkYXkuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZGF0ZSBUaGUgc3BlY2lmaWVkIGRheS4KICAgICAgICAgICAgKiBAcGFyYW0gYWZ0ZXIgV2hldGhlciB0byBjaGVjayBmb3IgYSBmcmVlIHNsb3Qgb24gdGhlIGZpcnN0IHBhcnQgKGlmIGBmYWxzZWApIG9yIHRoZSBsYXN0IHBhcnQgKGlmIGB0cnVlYCkgb2YgdGhlIGRheS4gSWYgYG51bGxgLCB0aGlzIHdpbGwgY2hlY2sgb24gdGhlIHdob2xlIGRheS4KICAgICAgICAgKiAKICAgICAgICAgKiBVc2VmdWxsIG9ubHkgaWYgdXNpbmcgdGhlIGBhbHdheXNIYWxmRGF5YCBvcHRpb24gb2YgdGhlIGNhbGVuZGFyLCBvciB0aGUgYHN0YXJ0SGFsZkRheWAgb3IgYGVuZEhhbGZEYXlgIG9wdGlvbiBvZiB0aGUgZGF0YXNvdXJjZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJpc1RoZXJlRnJlZVNsb3QiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc1RoZXJlRnJlZVNsb3QoZGF0ZSkgewogICAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICAgICAgdmFyIGFmdGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBudWxsOwogICAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZ2V0RXZlbnRzKGRhdGUpOwoKICAgICAgICAgIGlmIChhZnRlciA9PT0gdHJ1ZSkgewogICAgICAgICAgICByZXR1cm4gIWV2ZW50cy5zb21lKGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgICByZXR1cm4gIV90aGlzNS5vcHRpb25zLmFsd2F5c0hhbGZEYXkgJiYgIWV2dC5lbmRIYWxmRGF5IHx8IGV2dC5lbmREYXRlID4gZGF0ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKGFmdGVyID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gIWV2ZW50cy5zb21lKGZ1bmN0aW9uIChldnQpIHsKICAgICAgICAgICAgICByZXR1cm4gIV90aGlzNS5vcHRpb25zLmFsd2F5c0hhbGZEYXkgJiYgIWV2dC5zdGFydEhhbGZEYXkgfHwgZXZ0LnN0YXJ0RGF0ZSA8IGRhdGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNUaGVyZUZyZWVTbG90KGRhdGUsIGZhbHNlKSB8fCB0aGlzLmlzVGhlcmVGcmVlU2xvdChkYXRlLCB0cnVlKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyB0aGUgeWVhciBkaXNwbGF5ZWQgb24gdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogImdldFllYXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRZZWFyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5zdGFydFllYXI7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIHllYXIgZGlzcGxheWVkIG9uIHRoZSBjYWxlbmRhci4KICAgICAgICAgICAgKgogICAgICAgICAgICAqIEBwYXJhbSB5ZWFyIFRoZSB5ZWFyIHRvIGRpc3BsYXllZCBvbiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0WWVhciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFllYXIoeWVhcikgewogICAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAgICAgdmFyIHBhcnNlZFllYXIgPSBwYXJzZUludCh5ZWFyKTsKCiAgICAgICAgICBpZiAoIWlzTmFOKHBhcnNlZFllYXIpKSB7CiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5zdGFydFllYXIgPSBwYXJzZWRZZWFyOyAvLyBDbGVhciB0aGUgY2FsZW5kYXIgKGZhc3RlciBtZXRob2QpCgogICAgICAgICAgICB3aGlsZSAodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpIHsKICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50LmZpcnN0Q2hpbGQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc3BsYXlIZWFkZXIpIHsKICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJIZWFkZXIoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIGV2ZW50UmVzdWx0ID0gdGhpcy5fdHJpZ2dlckV2ZW50KCd5ZWFyQ2hhbmdlZCcsIHsKICAgICAgICAgICAgICBjdXJyZW50WWVhcjogdGhpcy5vcHRpb25zLnN0YXJ0WWVhciwKICAgICAgICAgICAgICBwcmV2ZW50UmVuZGVyaW5nOiBmYWxzZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKTsKCiAgICAgICAgICAgICAgdGhpcy5fZmV0Y2hEYXRhU291cmNlKGZ1bmN0aW9uIChkYXRhU291cmNlKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuX2RhdGFTb3VyY2UgPSBkYXRhU291cmNlOwoKICAgICAgICAgICAgICAgIF90aGlzNi5faW5pdGlhbGl6ZURhdGFzb3VyY2VDb2xvcnMoKTsKCiAgICAgICAgICAgICAgICBfdGhpczYucmVuZGVyKGZhbHNlKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoIWV2ZW50UmVzdWx0LnByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIG1pbmltdW0gZGF0ZSBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0TWluRGF0ZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1pbkRhdGUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1pbkRhdGU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIG1pbmltdW0gZGF0ZSBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gbWluRGF0ZSBUaGUgbWluaW11bSBkYXRlIHRvIHNldC4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldE1pbkRhdGUiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRNaW5EYXRlKGRhdGUpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKCiAgICAgICAgICBpZiAoZGF0ZSBpbnN0YW5jZW9mIERhdGUgfHwgZGF0ZSA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLm9wdGlvbnMubWluRGF0ZSA9IGRhdGU7CgogICAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIG1heGltdW0gZGF0ZSBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0TWF4RGF0ZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE1heERhdGUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLm1heERhdGU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIG1heGltdW0gZGF0ZSBvZiB0aGUgY2FsZW5kYXIuIAogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIG1heERhdGUgVGhlIG1heGltdW0gZGF0ZSB0byBzZXQuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRNYXhEYXRlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TWF4RGF0ZShkYXRlKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CgogICAgICAgICAgaWYgKGRhdGUgaW5zdGFuY2VvZiBEYXRlIHx8IGRhdGUgPT09IG51bGwpIHsKICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1heERhdGUgPSBkYXRlOwoKICAgICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIHRoZSBjdXJyZW50IHN0eWxlIHVzZWQgZm9yIGRpc3BsYXlpbmcgZGF0YSBzb3VyY2UuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0U3R5bGUiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTdHlsZSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc3R5bGU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIHN0eWxlIHRvIHVzZSBmb3IgZGlzcGxheWluZyBkYXRhIHNvdXJjZS4gCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gc3R5bGUgVGhlIHN0eWxlIHRvIHVzZSBmb3IgZGlzcGxheWluZyBkYXRhIHNvdXJjZSAoImJhY2tncm91bmQiLCAiYm9yZGVyIiBvciAiY3VzdG9tIikuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRTdHlsZSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN0eWxlKHN0eWxlKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuc3R5bGUgPSBzdHlsZSA9PSAnYmFja2dyb3VuZCcgfHwgc3R5bGUgPT0gJ2JvcmRlcicgfHwgc3R5bGUgPT0gJ2N1c3RvbScgPyBzdHlsZSA6ICdib3JkZXInOwoKICAgICAgICAgIGlmICghcHJldmVudFJlbmRlcmluZykgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB1c2VyIGNhbiBzZWxlY3QgYSByYW5nZSB3aGljaCBvdmVybGFwcGluZyBhbiBvdGhlciBlbGVtZW50IHByZXNlbnQgaW4gdGhlIGRhdGFzb3VyY2UuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0QWxsb3dPdmVybGFwIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxsb3dPdmVybGFwKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5hbGxvd092ZXJsYXA7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHVzZXIgY2FuIHNlbGVjdCBhIHJhbmdlIHdoaWNoIG92ZXJsYXBwaW5nIGFuIG90aGVyIGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgZGF0YXNvdXJjZS4KICAgICAgICAgICAgKgogICAgICAgICAgICAqIEBwYXJhbSBhbGxvd092ZXJsYXAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHVzZXIgY2FuIHNlbGVjdCBhIHJhbmdlIHdoaWNoIG92ZXJsYXBwaW5nIGFuIG90aGVyIGVsZW1lbnQgcHJlc2VudCBpbiB0aGUgZGF0YXNvdXJjZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRBbGxvd092ZXJsYXAiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBbGxvd092ZXJsYXAoYWxsb3dPdmVybGFwKSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuYWxsb3dPdmVybGFwID0gYWxsb3dPdmVybGFwOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB3ZWVrcyBudW1iZXIgYXJlIGRpc3BsYXllZC4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXREaXNwbGF5V2Vla051bWJlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc3BsYXlXZWVrTnVtYmVyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kaXNwbGF5V2Vla051bWJlcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgd2Vla3MgbnVtYmVyIGFyZSBkaXNwbGF5ZWQuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gIGRpc3BsYXlXZWVrTnVtYmVyIEluZGljYXRlcyB3aGV0aGVyIHRoZSB3ZWVrcyBudW1iZXIgYXJlIGRpc3BsYXllZC4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldERpc3BsYXlXZWVrTnVtYmVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGlzcGxheVdlZWtOdW1iZXIoZGlzcGxheVdlZWtOdW1iZXIpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXNwbGF5V2Vla051bWJlciA9IGRpc3BsYXlXZWVrTnVtYmVyOwoKICAgICAgICAgIGlmICghcHJldmVudFJlbmRlcmluZykgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBjYWxlbmRhciBoZWFkZXIgaXMgZGlzcGxheWVkLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogImdldERpc3BsYXlIZWFkZXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREaXNwbGF5SGVhZGVyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kaXNwbGF5SGVhZGVyOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBTZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBjYWxlbmRhciBoZWFkZXIgaXMgZGlzcGxheWVkLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIGRpc3BsYXlIZWFkZXIgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGNhbGVuZGFyIGhlYWRlciBpcyBkaXNwbGF5ZWQuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXREaXNwbGF5SGVhZGVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGlzcGxheUhlYWRlcihkaXNwbGF5SGVhZGVyKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzcGxheUhlYWRlciA9IGRpc3BsYXlIZWFkZXI7CgogICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIGRhdGEgc291cmNlIG11c3QgYmUgcmVuZGVyZWQgb24gZGlzYWJsZWQgZGF5cy4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXREaXNwbGF5RGlzYWJsZWREYXRhU291cmNlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGlzcGxheURpc2FibGVkRGF0YVNvdXJjZSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgZGF0YSBzb3VyY2UgbXVzdCBiZSByZW5kZXJlZCBvbiBkaXNhYmxlZCBkYXlzLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIGRpc3BsYXlEaXNhYmxlZERhdGFTb3VyY2UgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGRhdGEgc291cmNlIG11c3QgYmUgcmVuZGVyZWQgb24gZGlzYWJsZWQgZGF5cy4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldERpc3BsYXlEaXNhYmxlZERhdGFTb3VyY2UiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREaXNwbGF5RGlzYWJsZWREYXRhU291cmNlKGRpc3BsYXlEaXNhYmxlZERhdGFTb3VyY2UpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5kaXNwbGF5RGlzYWJsZWREYXRhU291cmNlID0gZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZTsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGVhY2ggcmFuZ2Ugc2hvdWxkIGJlIGRpc3BsYXllZCBhcyBoYWxmIHNlbGVjdGVkIGRheS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRBbHdheXNIYWxmRGF5IiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWx3YXlzSGFsZkRheSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYWx3YXlzSGFsZkRheTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGVhY2ggcmFuZ2Ugc2hvdWxkIGJlIGRpc3BsYXllZCBhcyBoYWxmIHNlbGVjdGVkIGRheS4KICAgICAgICAgKiAKICAgICAgICAgKiBUaGlzIG1ldGhvZCBjYXVzZXMgYSByZWZyZXNoIG9mIHRoZSBjYWxlbmRhci4KICAgICAgICAgICAgKgogICAgICAgICAgICAqIEBwYXJhbSBhbHdheXNIYWxmRGF5IEluZGljYXRlcyB3aGV0aGVyIHRoZSBiZWdpbm5pbmcgYW5kIHRoZSBlbmQgb2YgZWFjaCByYW5nZSBzaG91bGQgYmUgZGlzcGxheWVkIGFzIGhhbGYgc2VsZWN0ZWQgZGF5LgogICAgICAgICAqIEBwYXJhbSBwcmV2ZW50UmVkZXJpbmcgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgcHJldmVudGVkIGFmdGVyIHRoZSBwcm9wZXJ0eSB1cGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0QWx3YXlzSGFsZkRheSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEFsd2F5c0hhbGZEYXkoYWx3YXlzSGFsZkRheSkgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgdGhpcy5vcHRpb25zLmFsd2F5c0hhbGZEYXkgPSBhbHdheXNIYWxmRGF5OwoKICAgICAgICAgIGlmICghcHJldmVudFJlbmRlcmluZykgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB1c2VyIGNhbiBtYWtlIHJhbmdlIHNlbGVjdGlvbi4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRFbmFibGVSYW5nZVNlbGVjdGlvbiIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVuYWJsZVJhbmdlU2VsZWN0aW9uKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5lbmFibGVSYW5nZVNlbGVjdGlvbjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgdXNlciBjYW4gbWFrZSByYW5nZSBzZWxlY3Rpb24uCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZW5hYmxlUmFuZ2VTZWxlY3Rpb24gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHVzZXIgY2FuIG1ha2UgcmFuZ2Ugc2VsZWN0aW9uLgogICAgICAgICAqIEBwYXJhbSBwcmV2ZW50UmVkZXJpbmcgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgcHJldmVudGVkIGFmdGVyIHRoZSBwcm9wZXJ0eSB1cGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0RW5hYmxlUmFuZ2VTZWxlY3Rpb24iLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRFbmFibGVSYW5nZVNlbGVjdGlvbihlbmFibGVSYW5nZVNlbGVjdGlvbikgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgdGhpcy5vcHRpb25zLmVuYWJsZVJhbmdlU2VsZWN0aW9uID0gZW5hYmxlUmFuZ2VTZWxlY3Rpb247CgogICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGRpc2FibGVkIGRheXMuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0RGlzYWJsZWREYXlzIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGlzYWJsZWREYXlzKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kaXNhYmxlZERheXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIGRpc2FibGVkIGRheXMuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZGlzYWJsZURheXMgVGhlIGRpc2FibGVkIGRheXMgdG8gc2V0LgogICAgICAgICAqIEBwYXJhbSBwcmV2ZW50UmVkZXJpbmcgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgcHJldmVudGVkIGFmdGVyIHRoZSBwcm9wZXJ0eSB1cGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0RGlzYWJsZWREYXlzIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGlzYWJsZWREYXlzKGRpc2FibGVkRGF5cykgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgdGhpcy5vcHRpb25zLmRpc2FibGVkRGF5cyA9IGRpc2FibGVkRGF5cyBpbnN0YW5jZW9mIEFycmF5ID8gZGlzYWJsZWREYXlzIDogW107CgogICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGRpc2FibGVkIGRheXMgb2YgdGhlIHdlZWsuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0RGlzYWJsZWRXZWVrRGF5cyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldERpc2FibGVkV2Vla0RheXMoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmRpc2FibGVkV2Vla0RheXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIGRpc2FibGVkIGRheXMgb2YgdGhlIHdlZWsuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gZGlzYWJsZWRXZWVrRGF5cyBUaGUgZGlzYWJsZWQgZGF5cyBvZiB0aGUgd2VlayB0byBzZXQuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXREaXNhYmxlZFdlZWtEYXlzIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGlzYWJsZWRXZWVrRGF5cyhkaXNhYmxlZFdlZWtEYXlzKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZWRXZWVrRGF5cyA9IGRpc2FibGVkV2Vla0RheXMgaW5zdGFuY2VvZiBBcnJheSA/IGRpc2FibGVkV2Vla0RheXMgOiBbXTsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyB0aGUgaGlkZGVuIGRheXMgb2YgdGhlIHdlZWsuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0SGlkZGVuV2Vla0RheXMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRIaWRkZW5XZWVrRGF5cygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuaGlkZGVuV2Vla0RheXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIGhpZGRlbiBkYXlzIG9mIHRoZSB3ZWVrLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIGhpZGRlbldlZWtEYXlzIFRoZSBoaWRkZW4gZGF5cyBvZiB0aGUgd2VlayB0byBzZXQuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRIaWRkZW5XZWVrRGF5cyIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEhpZGRlbldlZWtEYXlzKGhpZGRlbldlZWtEYXlzKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuaGlkZGVuV2Vla0RheXMgPSBoaWRkZW5XZWVrRGF5cyBpbnN0YW5jZW9mIEFycmF5ID8gaGlkZGVuV2Vla0RheXMgOiBbXTsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGVhY2ggcmFuZ2Ugc2hvdWxkIGJlIGRpc3BsYXllZCBhcyByb3VuZGVkIGNlbGxzLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogImdldFJvdW5kUmFuZ2VMaW1pdHMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSb3VuZFJhbmdlTGltaXRzKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yb3VuZFJhbmdlTGltaXRzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBTZXRzIGEgdmFsdWUgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBiZWdpbm5pbmcgYW5kIHRoZSBlbmQgb2YgZWFjaCByYW5nZSBzaG91bGQgYmUgZGlzcGxheWVkIGFzIHJvdW5kZWQgY2VsbHMuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gcm91bmRSYW5nZUxpbWl0cyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgYmVnaW5uaW5nIGFuZCB0aGUgZW5kIG9mIGVhY2ggcmFuZ2Ugc2hvdWxkIGJlIGRpc3BsYXllZCBhcyByb3VuZGVkIGNlbGxzLiAKICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldFJvdW5kUmFuZ2VMaW1pdHMiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSb3VuZFJhbmdlTGltaXRzKHJvdW5kUmFuZ2VMaW1pdHMpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5yb3VuZFJhbmdlTGltaXRzID0gcm91bmRSYW5nZUxpbWl0czsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgZGVmYXVsdCBjb250ZXh0IG1lbnUgbXVzdCBiZSBkaXNwbGF5ZWQgd2hlbiByaWdodCBjbGlja2luZyBvbiBhIGRheS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRFbmFibGVDb250ZXh0TWVudSIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEVuYWJsZUNvbnRleHRNZW51KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5lbmFibGVDb250ZXh0TWVudTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciB0aGUgZGVmYXVsdCBjb250ZXh0IG1lbnUgbXVzdCBiZSBkaXNwbGF5ZWQgd2hlbiByaWdodCBjbGlja2luZyBvbiBhIGRheS4gCiAgICAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICogCiAgICAgICAgICAgICogQHBhcmFtIGVuYWJsZUNvbnRleHRNZW51IEluZGljYXRlcyB3aGV0aGVyIHRoZSBkZWZhdWx0IGNvbnRleHQgbWVudSBtdXN0IGJlIGRpc3BsYXllZCB3aGVuIHJpZ2h0IGNsaWNraW5nIG9uIGEgZGF5LgogICAgICAgICAqIEBwYXJhbSBwcmV2ZW50UmVkZXJpbmcgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgcHJldmVudGVkIGFmdGVyIHRoZSBwcm9wZXJ0eSB1cGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0RW5hYmxlQ29udGV4dE1lbnUiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRFbmFibGVDb250ZXh0TWVudShlbmFibGVDb250ZXh0TWVudSkgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgdGhpcy5vcHRpb25zLmVuYWJsZUNvbnRleHRNZW51ID0gZW5hYmxlQ29udGV4dE1lbnU7CgogICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGNvbnRleHQgbWVudSBpdGVtcy4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRDb250ZXh0TWVudUl0ZW1zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q29udGV4dE1lbnVJdGVtcygpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY29udGV4dE1lbnVJdGVtczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyBuZXcgY29udGV4dCBtZW51IGl0ZW1zLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIGNvbnRleHRNZW51SXRlbXMgVGhlIG5ldyBjb250ZXh0IG1lbnUgaXRlbXMuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRDb250ZXh0TWVudUl0ZW1zIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29udGV4dE1lbnVJdGVtcyhjb250ZXh0TWVudUl0ZW1zKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dE1lbnVJdGVtcyA9IGNvbnRleHRNZW51SXRlbXMgaW5zdGFuY2VvZiBBcnJheSA/IGNvbnRleHRNZW51SXRlbXMgOiBbXTsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyB0aGUgY3VzdG9tIGRheSByZW5kZXJlci4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRDdXN0b21EYXlSZW5kZXJlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEN1c3RvbURheVJlbmRlcmVyKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jdXN0b21EYXlSZW5kZXJlcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyB0aGUgY3VzdG9tIGRheSByZW5kZXJlci4KICAgICAgICAgKiAKICAgICAgICAgKiBUaGlzIG1ldGhvZCBjYXVzZXMgYSByZWZyZXNoIG9mIHRoZSBjYWxlbmRhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBmdW5jdGlvbiB1c2VkIHRvIHJlbmRlciB0aGUgZGF5cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZHVyaW5nIHJlbmRlciBmb3IgZWFjaCBkYXkuCiAgICAgICAgICogQHBhcmFtIHByZXZlbnRSZWRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVuZGVyaW5nIHNob3VsZCBiZSBwcmV2ZW50ZWQgYWZ0ZXIgdGhlIHByb3BlcnR5IHVwZGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJzZXRDdXN0b21EYXlSZW5kZXJlciIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEN1c3RvbURheVJlbmRlcmVyKGN1c3RvbURheVJlbmRlcmVyKSB7CiAgICAgICAgICB2YXIgcHJldmVudFJlbmRlcmluZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuY3VzdG9tRGF5UmVuZGVyZXIgPSB0eXBlb2YgY3VzdG9tRGF5UmVuZGVyZXIgPT09ICJmdW5jdGlvbiIgPyBjdXN0b21EYXlSZW5kZXJlciA6IG51bGw7CgogICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIGN1c3RvbSBkYXRhIHNvdXJjZSByZW5kZXJlci4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRDdXN0b21EYXRhU291cmNlUmVuZGVyZXIiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDdXN0b21EYXRhU291cmNlUmVuZGVyZXIoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmN1c3RvbURhdGFTb3VyY2VSZW5kZXJlcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyB0aGUgY3VzdG9tIGRhdGEgc291cmNlIHJlbmRlcmVyLiBXb3JrcyBvbmx5IHdpdGggdGhlIHN0eWxlIHNldCB0byAiY3VzdG9tIi4KICAgICAgICAgKiAKICAgICAgICAgKiBUaGlzIG1ldGhvZCBjYXVzZXMgYSByZWZyZXNoIG9mIHRoZSBjYWxlbmRhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIFRoZSBmdW5jdGlvbiB1c2VkIHRvIHJlbmRlciB0aGUgZGF0YSBzb3VyY2UuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGR1cmluZyByZW5kZXIgZm9yIGVhY2ggZGF5IGNvbnRhaW5pbmcgYXQgbGVhc3Qgb25lIGV2ZW50LgogICAgICAgICAqIEBwYXJhbSBwcmV2ZW50UmVkZXJpbmcgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHJlbmRlcmluZyBzaG91bGQgYmUgcHJldmVudGVkIGFmdGVyIHRoZSBwcm9wZXJ0eSB1cGRhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0Q3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyKGN1c3RvbURhdGFTb3VyY2VSZW5kZXJlcikgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwogICAgICAgICAgdGhpcy5vcHRpb25zLmN1c3RvbURhdGFTb3VyY2VSZW5kZXJlciA9IHR5cGVvZiBjdXN0b21EYXRhU291cmNlUmVuZGVyZXIgPT09ICJmdW5jdGlvbiIgPyBjdXN0b21EYXRhU291cmNlUmVuZGVyZXIgOiBudWxsOwoKICAgICAgICAgIGlmICghcHJldmVudFJlbmRlcmluZykgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIHRoZSBsYW5ndWFnZSB1c2VkIGZvciBjYWxlbmRhciByZW5kZXJpbmcuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAiZ2V0TGFuZ3VhZ2UiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMYW5ndWFnZSgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubGFuZ3VhZ2U7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIFNldHMgdGhlIGxhbmd1YWdlIHVzZWQgZm9yIGNhbGVuZGFyIHJlbmRlcmluZy4KICAgICAgICAgKiAKICAgICAgICAgKiBUaGlzIG1ldGhvZCBjYXVzZXMgYSByZWZyZXNoIG9mIHRoZSBjYWxlbmRhci4KICAgICAgICAgICAgKgogICAgICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgdG8gdXNlIGZvciBjYWxlbmRhciByZWRlcmluZy4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldExhbmd1YWdlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGFuZ3VhZ2UobGFuZ3VhZ2UpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKCiAgICAgICAgICBpZiAobGFuZ3VhZ2UgIT0gbnVsbCAmJiBDYWxlbmRhci5sb2NhbGVzW2xhbmd1YWdlXSAhPSBudWxsKSB7CiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9IGxhbmd1YWdlOwoKICAgICAgICAgICAgaWYgKCFwcmV2ZW50UmVuZGVyaW5nKSB7CiAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBHZXRzIHRoZSBjdXJyZW50IGRhdGEgc291cmNlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogImdldERhdGFTb3VyY2UiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhU291cmNlKCkgewogICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5kYXRhU291cmNlOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBTZXRzIGEgbmV3IGRhdGEgc291cmNlLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqCiAgICAgICAgICAgICogQHBhcmFtIGRhdGFTb3VyY2UgVGhlIG5ldyBkYXRhIHNvdXJjZS4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldERhdGFTb3VyY2UiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREYXRhU291cmNlKGRhdGFTb3VyY2UpIHsKICAgICAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5kYXRhU291cmNlID0gZGF0YVNvdXJjZSBpbnN0YW5jZW9mIEFycmF5IHx8IHR5cGVvZiBkYXRhU291cmNlID09PSAiZnVuY3Rpb24iID8gZGF0YVNvdXJjZSA6IFtdOwoKICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmRhdGFTb3VyY2UgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSk7CgogICAgICAgICAgICB0aGlzLl9mZXRjaERhdGFTb3VyY2UoZnVuY3Rpb24gKGRhdGFTb3VyY2UpIHsKICAgICAgICAgICAgICBfdGhpczcuX2RhdGFTb3VyY2UgPSBkYXRhU291cmNlOwoKICAgICAgICAgICAgICBfdGhpczcuX2luaXRpYWxpemVEYXRhc291cmNlQ29sb3JzKCk7CgogICAgICAgICAgICAgIF90aGlzNy5yZW5kZXIoZmFsc2UpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2UgPSB0aGlzLm9wdGlvbnMuZGF0YVNvdXJjZTsKCiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVEYXRhc291cmNlQ29sb3JzKCk7CgogICAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAgICAqIEdldHMgdGhlIHN0YXJ0aW5nIGRheSBvZiB0aGUgd2Vlay4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRXZWVrU3RhcnQiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRXZWVrU3RhcnQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLndlZWtTdGFydCA/IHRoaXMub3B0aW9ucy53ZWVrU3RhcnQgOiBDYWxlbmRhci5sb2NhbGVzW3RoaXMub3B0aW9ucy5sYW5ndWFnZV0ud2Vla1N0YXJ0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgICAgKiBTZXRzIHRoZSBzdGFydGluZyBkYXkgb2YgdGhlIHdlZWsuCiAgICAgICAgICogCiAgICAgICAgICogVGhpcyBtZXRob2QgY2F1c2VzIGEgcmVmcmVzaCBvZiB0aGUgY2FsZW5kYXIuCiAgICAgICAgICAgICoKICAgICAgICAgICAgKiBAcGFyYW0gd2Vla1N0YXJ0IFRoZSBzdGFydGluZyBkYXkgb2YgdGhlIHdlZWsuIFRoaXMgb3B0aW9uIG92ZXJyaWRlcyB0aGUgcGFyYW1ldGVyIGRlZmluZSBpbiB0aGUgbGFuZ3VhZ2UgZmlsZS4KICAgICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlZGVyaW5nIEluZGljYXRlcyB3aGV0aGVyIHRoZSByZW5kZXJpbmcgc2hvdWxkIGJlIHByZXZlbnRlZCBhZnRlciB0aGUgcHJvcGVydHkgdXBkYXRlLgogICAgICAgICAgICAqLwoKICAgICAgfSwgewogICAgICAgIGtleTogInNldFdlZWtTdGFydCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldFdlZWtTdGFydCh3ZWVrU3RhcnQpIHsKICAgICAgICAgIHZhciBwcmV2ZW50UmVuZGVyaW5nID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgICAgIHRoaXMub3B0aW9ucy53ZWVrU3RhcnQgPSAhaXNOYU4ocGFyc2VJbnQod2Vla1N0YXJ0KSkgPyBwYXJzZUludCh3ZWVrU3RhcnQpIDogbnVsbDsKCiAgICAgICAgICBpZiAoIXByZXZlbnRSZW5kZXJpbmcpIHsKICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogR2V0cyB0aGUgbG9hZGluZyB0ZW1wbGF0ZS4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJnZXRMb2FkaW5nVGVtcGxhdGUiLAogICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRMb2FkaW5nVGVtcGxhdGUoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmxvYWRpbmdUZW1wbGF0ZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICAgICogU2V0cyB0aGUgbG9hZGluZyB0ZW1wbGF0ZS4KICAgICAgICAgICAgKgogICAgICAgICAgICAqIEBwYXJhbSBsb2FkaW5nVGVtcGxhdGUgVGhlIGxvYWRpbmcgdGVtcGxhdGUuCiAgICAgICAgICAgICovCgogICAgICB9LCB7CiAgICAgICAga2V5OiAic2V0TG9hZGluZ1RlbXBsYXRlIiwKICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TG9hZGluZ1RlbXBsYXRlKGxvYWRpbmdUZW1wbGF0ZSkgewogICAgICAgICAgdGhpcy5vcHRpb25zLmxvYWRpbmdUZW1wbGF0ZSA9IHR5cGVvZiBsb2FkaW5nVGVtcGxhdGUgPT09ICJzdHJpbmciIHx8IGxvYWRpbmdUZW1wbGF0ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ID8gbG9hZGluZ1RlbXBsYXRlIDogbnVsbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogCiAgICAgICAgICAgICogQWRkIGEgbmV3IGVsZW1lbnQgdG8gdGhlIGRhdGEgc291cmNlLgogICAgICAgICAqIAogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhdXNlcyBhIHJlZnJlc2ggb2YgdGhlIGNhbGVuZGFyLgogICAgICAgICAgICAqIAogICAgICAgICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGFkZC4KICAgICAgICAgKiBAcGFyYW0gcHJldmVudFJlbmRlcmluZyBJbmRpY2F0ZXMgd2hldGhlciB0aGUgY2FsZW5kYXIgc2hvdWxkbid0IGJlIHJlZnJlc2hlZCBvbmNlIHRoZSBldmVudCBhZGRlZC4KICAgICAgICAgICAgKi8KCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICJhZGRFdmVudCIsCiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZEV2ZW50KGV2dCkgewogICAgICAgICAgdmFyIHByZXZlbnRSZW5kZXJpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwoKICAgICAgICAgIHRoaXMuX2RhdGFTb3VyY2UucHVzaChldnQpOwoKICAgICAgICAgIGlmICghcHJldmVudFJlbmRlcmluZykgewogICAgICAgICAgICB0aGlzLnJlbmRlcigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfV0pOwoKICAgICAgcmV0dXJuIENhbGVuZGFyOwogICAgfSgpOwoKICAgIF9leHBvcnRzWyJkZWZhdWx0Il0gPSBDYWxlbmRhcjsKCiAgICBfZGVmaW5lUHJvcGVydHkoQ2FsZW5kYXIsICJsb2NhbGVzIiwgewogICAgICBlbjogewogICAgICAgIGRheXM6IFsiU3VuZGF5IiwgIk1vbmRheSIsICJUdWVzZGF5IiwgIldlZG5lc2RheSIsICJUaHVyc2RheSIsICJGcmlkYXkiLCAiU2F0dXJkYXkiXSwKICAgICAgICBkYXlzU2hvcnQ6IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0sCiAgICAgICAgZGF5c01pbjogWyJTdSIsICJNbyIsICJUdSIsICJXZSIsICJUaCIsICJGciIsICJTYSJdLAogICAgICAgIG1vbnRoczogWyJKYW51YXJ5IiwgIkZlYnJ1YXJ5IiwgIk1hcmNoIiwgIkFwcmlsIiwgIk1heSIsICJKdW5lIiwgIkp1bHkiLCAiQXVndXN0IiwgIlNlcHRlbWJlciIsICJPY3RvYmVyIiwgIk5vdmVtYmVyIiwgIkRlY2VtYmVyIl0sCiAgICAgICAgbW9udGhzU2hvcnQ6IFsiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXSwKICAgICAgICB3ZWVrU2hvcnQ6ICdXJywKICAgICAgICB3ZWVrU3RhcnQ6IDAKICAgICAgfQogICAgfSk7CgogICAgX2RlZmluZVByb3BlcnR5KENhbGVuZGFyLCAiY29sb3JzIiwgWycjMkM4RkM5JywgJyM5Q0I3MDMnLCAnI0Y1QkIwMCcsICcjRkY0QTMyJywgJyNCNTZDRTInLCAnIzQ1QTU5NyddKTsKCiAgICBpZiAoKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpID09PSAib2JqZWN0IikgewogICAgICB3aW5kb3cuQ2FsZW5kYXIgPSBDYWxlbmRhcjsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wcm92aWRlPSJjYWxlbmRhciJdJykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgcmV0dXJuIG5ldyBDYWxlbmRhcihlbGVtZW50KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSk7Cn0pOwp2YXIgSnNDYWxlbmRhciA9IHVud3JhcEV4cG9ydHMoanNZZWFyQ2FsZW5kYXIpOwoKZnVuY3Rpb24gc3R5bGVJbmplY3QoY3NzLCByZWYpIHsKICBpZiAocmVmID09PSB2b2lkIDApIHJlZiA9IHt9OwogIHZhciBpbnNlcnRBdCA9IHJlZi5pbnNlcnRBdDsKCiAgaWYgKCFjc3MgfHwgdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJykgewogICAgcmV0dXJuOwogIH0KCiAgdmFyIGhlYWQgPSBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07CiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKCiAgaWYgKGluc2VydEF0ID09PSAndG9wJykgewogICAgaWYgKGhlYWQuZmlyc3RDaGlsZCkgewogICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZSwgaGVhZC5maXJzdENoaWxkKTsKICAgIH0gZWxzZSB7CiAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwogICAgfQogIH0gZWxzZSB7CiAgICBoZWFkLmFwcGVuZENoaWxkKHN0eWxlKTsKICB9CgogIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7CiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7CiAgfSBlbHNlIHsKICAgIHN0eWxlLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpOwogIH0KfQoKdmFyIGNzc18yNDh6ID0gIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSlMgeWVhciBjYWxlbmRhciB2MC4xLjBcbiAqIFJlcG86IGh0dHBzOi8vZ2l0aHViLmNvbS95ZWFyLWNhbGVuZGFyL2pzLXllYXItY2FsZW5kYXJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ3JlYXRlZCBieSBQYXVsIERhdmlkLVNpdmVsbGVcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyogTWFpbiAqL1xuLmNhbGVuZGFyIHtcbiAgcGFkZGluZzogNHB4O1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcbiAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgZGlyZWN0aW9uOiBsdHI7XG4gIG92ZXJmbG93LXg6IGhpZGRlbjtcbiAgLXdlYmtpdC10b3VjaC1jYWxsb3V0OiBub25lO1xuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xuICAta2h0bWwtdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gIC8qIEhlYWRlciAqL1xuICAvKiBNb250aHMgKi9cbiAgLyogTG9hZGluZyAqL1xufVxuLmNhbGVuZGFyOmFmdGVyIHtcbiAgLyogQXBwbHkgdGhlIHJpZ2h0IGhlaWdodCBvbiB0aGUgY2FsZW5kYXIgZGl2LCBldmVuIGlmIHRoZSBtb250aHMgZWxlbWVudHMgYXJlIGZsb2F0aW5nICAqL1xuICBjbGVhcjogYm90aDtcbiAgY29udGVudDogXCJcIjtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLXJ0bCB7XG4gIGRpcmVjdGlvbjogcnRsO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1ydGwgLmNhbGVuZGFyLXJ0bCB0YWJsZSB0ciB0ZCBzcGFuIHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuLmNhbGVuZGFyIHRhYmxlIHtcbiAgbWFyZ2luOiBhdXRvO1xuICBib3JkZXItc3BhY2luZzogMDtcbn1cbi5jYWxlbmRhciB0YWJsZSB0ZCxcbi5jYWxlbmRhciB0YWJsZSB0aCB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgd2lkdGg6IDIwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgYm9yZGVyOiBub25lO1xuICBwYWRkaW5nOiA0cHggNXB4O1xuICBmb250LXNpemU6IDEycHg7XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciB7XG4gIHdpZHRoOiAxMDAlO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgdGFibGUge1xuICB3aWR0aDogMTAwJTtcbn1cbi5jYWxlbmRhciAuY2FsZW5kYXItaGVhZGVyIHRhYmxlIHRoIHtcbiAgZm9udC1zaXplOiAyMnB4O1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgdGFibGUgdGg6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiAjZWVlZWVlO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgdGFibGUgdGguZGlzYWJsZWQsXG4uY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciB0YWJsZSB0aC5kaXNhYmxlZDpob3ZlciB7XG4gIGJhY2tncm91bmQ6IG5vbmU7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgY29sb3I6IHdoaXRlO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgdGFibGUgdGgucHJldixcbi5jYWxlbmRhciAuY2FsZW5kYXItaGVhZGVyIHRhYmxlIHRoLm5leHQge1xuICB3aWR0aDogMjBweDtcbn1cbi5jYWxlbmRhciAuY2FsZW5kYXItaGVhZGVyIC55ZWFyLXRpdGxlIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgaGVpZ2h0OiAyMHB4O1xuICB3aWR0aDogYXV0bztcbn1cbi5jYWxlbmRhciAuY2FsZW5kYXItaGVhZGVyIC55ZWFyLW5laWdoYm9yIHtcbiAgb3BhY2l0eTogMC40O1xufVxuQG1lZGlhIChtYXgtd2lkdGg6IDk5MXB4KSB7XG4gIC5jYWxlbmRhciAuY2FsZW5kYXItaGVhZGVyIC55ZWFyLW5laWdoYm9yIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLWhlYWRlciAueWVhci1uZWlnaGJvcjIge1xuICBvcGFjaXR5OiAwLjI7XG59XG5AbWVkaWEgKG1heC13aWR0aDogNzY3cHgpIHtcbiAgLmNhbGVuZGFyIC5jYWxlbmRhci1oZWFkZXIgLnllYXItbmVpZ2hib3IyIHtcbiAgICBkaXNwbGF5OiBub25lO1xuICB9XG59XG4uY2FsZW5kYXIgLm1vbnRocy1jb250YWluZXIge1xuICB3aWR0aDogMTAwJTtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi5jYWxlbmRhciAubW9udGhzLWNvbnRhaW5lciAubW9udGgtY29udGFpbmVyIHtcbiAgZmxvYXQ6IGxlZnQ7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgaGVpZ2h0OiAyMDBweDtcbiAgcGFkZGluZzogMDtcbn1cbi5jYWxlbmRhciAubW9udGhzLWNvbnRhaW5lciAubW9udGgtY29udGFpbmVyLm1vbnRoLTIge1xuICB3aWR0aDogMTYuNjY2NjY2NjclO1xufVxuLmNhbGVuZGFyIC5tb250aHMtY29udGFpbmVyIC5tb250aC1jb250YWluZXIubW9udGgtMyB7XG4gIHdpZHRoOiAyNSU7XG59XG4uY2FsZW5kYXIgLm1vbnRocy1jb250YWluZXIgLm1vbnRoLWNvbnRhaW5lci5tb250aC00IHtcbiAgd2lkdGg6IDMzLjMzMzMzMzMzJTtcbn1cbi5jYWxlbmRhciAubW9udGhzLWNvbnRhaW5lciAubW9udGgtY29udGFpbmVyLm1vbnRoLTYge1xuICB3aWR0aDogNTAlO1xufVxuLmNhbGVuZGFyIC5tb250aHMtY29udGFpbmVyIC5tb250aC1jb250YWluZXIubW9udGgtMTIge1xuICB3aWR0aDogMTAwJTtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0aC5tb250aC10aXRsZSB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgcGFkZGluZy1ib3R0b206IDVweDtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0aC5kYXktaGVhZGVyIHtcbiAgZm9udC1zaXplOiAxNHB4O1xufVxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRyIHRkLFxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRyIHRoIHtcbiAgcGFkZGluZzogMDtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ciB0ZC5oaWRkZW4sXG4uY2FsZW5kYXIgdGFibGUubW9udGggdHIgdGguaGlkZGVuIHtcbiAgZGlzcGxheTogbm9uZTtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ZC53ZWVrLW51bWJlciB7XG4gIGN1cnNvcjogZGVmYXVsdDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlZWU7XG4gIHBhZGRpbmc6IDVweDtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ZC5kYXkucm91bmQtbGVmdCB7XG4gIC13ZWJraXQtYm9yZGVyLXJhZGl1czogOHB4IDAgMCA4cHg7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogOHB4IDAgMCA4cHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweCAwIDAgOHB4O1xufVxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRkLmRheS5yb3VuZC1yaWdodCB7XG4gIHdlYmtpdC1ib3JkZXItcmFkaXVzOiAwIDhweCA4cHggMCA7XG4gIC1tb3otYm9yZGVyLXJhZGl1czogMCA4cHggOHB4IDA7XG4gIGJvcmRlci1yYWRpdXM6IDAgOHB4IDhweCAwO1xufVxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRkLmRheSAuZGF5LWNvbnRlbnQge1xuICAtd2Via2l0LWJvcmRlci1yYWRpdXM6IDRweDtcbiAgLW1vei1ib3JkZXItcmFkaXVzOiA0cHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgcGFkZGluZzogNXB4IDZweDtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ZC5vbGQsXG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQubmV3LFxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRkLm9sZDpob3Zlcixcbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ZC5uZXc6aG92ZXIge1xuICBiYWNrZ3JvdW5kOiBub25lO1xuICBjdXJzb3I6IGRlZmF1bHQ7XG59XG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQuZGlzYWJsZWQsXG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQuZGlzYWJsZWQ6aG92ZXIge1xuICBjb2xvcjogI2RkZGRkZDtcbn1cbi5jYWxlbmRhciB0YWJsZS5tb250aCB0ZC5kaXNhYmxlZCAuZGF5LWNvbnRlbnQ6aG92ZXIsXG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQuZGlzYWJsZWQ6aG92ZXIgLmRheS1jb250ZW50OmhvdmVyIHtcbiAgYmFja2dyb3VuZDogbm9uZTtcbiAgY3Vyc29yOiBkZWZhdWx0O1xufVxuLmNhbGVuZGFyIHRhYmxlLm1vbnRoIHRkLnJhbmdlIC5kYXktY29udGVudCB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgLXdlYmtpdC1ib3JkZXItcmFkaXVzOiAwO1xuICAtbW96LWJvcmRlci1yYWRpdXM6IDA7XG4gIGJvcmRlci1yYWRpdXM6IDA7XG59XG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQucmFuZ2UucmFuZ2Utc3RhcnQgLmRheS1jb250ZW50IHtcbiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogNHB4O1xuICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA0cHg7XG59XG4uY2FsZW5kYXIgdGFibGUubW9udGggdGQucmFuZ2UucmFuZ2UtZW5kIC5kYXktY29udGVudCB7XG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiA0cHg7XG4gIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiA0cHg7XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLWxvYWRpbmctY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1pbi1oZWlnaHQ6IDIwMHB4O1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1sb2FkaW5nLWNvbnRhaW5lciAuY2FsZW5kYXItbG9hZGluZyB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIGxlZnQ6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpIHRyYW5zbGF0ZVkoLTUwJSk7XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLXNwaW5uZXIge1xuICBtYXJnaW46IDIwcHggYXV0bztcbiAgd2lkdGg6IDgwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5jYWxlbmRhciAuY2FsZW5kYXItc3Bpbm5lciA+IGRpdiB7XG4gIHdpZHRoOiAxNnB4O1xuICBoZWlnaHQ6IDE2cHg7XG4gIG1hcmdpbjogNXB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzMzO1xuICBib3JkZXItcmFkaXVzOiAxMDAlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIC13ZWJraXQtYW5pbWF0aW9uOiBzay1ib3VuY2VkZWxheSAxcyBpbmZpbml0ZSBlYXNlLWluLW91dCBib3RoO1xuICBhbmltYXRpb246IHNrLWJvdW5jZWRlbGF5IDFzIGluZmluaXRlIGVhc2UtaW4tb3V0IGJvdGg7XG59XG4uY2FsZW5kYXIgLmNhbGVuZGFyLXNwaW5uZXIgPiBkaXYuYm91bmNlMSB7XG4gIC13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OiAtMC4zMnM7XG4gIGFuaW1hdGlvbi1kZWxheTogLTAuMzJzO1xufVxuLmNhbGVuZGFyIC5jYWxlbmRhci1zcGlubmVyID4gZGl2LmJvdW5jZTIge1xuICAtd2Via2l0LWFuaW1hdGlvbi1kZWxheTogLTAuMTZzO1xuICBhbmltYXRpb24tZGVsYXk6IC0wLjE2cztcbn1cbi8qIENvbnRleHQgbWVudSAqL1xuLmNhbGVuZGFyLWNvbnRleHQtbWVudSxcbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLnN1Ym1lbnUge1xuICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgYm94LXNoYWRvdzogMnB4IDJweCA1cHggcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDJweCAycHggNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBub25lO1xufVxuLmNhbGVuZGFyLWNvbnRleHQtbWVudSAuaXRlbSB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbn1cbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLml0ZW0gLmNvbnRlbnQge1xuICBwYWRkaW5nOiAxMHB4IDMwcHg7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgZGlzcGxheTogZGlzcGxheTogdGFibGUtY2VsbDsgdGV4dC1hbGlnbjogY2VudGVyOyAgXG4gIHdpZHRoOiAxMDAlO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xufVxuLmNhbGVuZGFyLWNvbnRleHQtbWVudSAuaXRlbSAuY29udGVudDpob3ZlciB7XG4gIGJhY2tncm91bmQ6ICNlZWU7XG59XG4uY2FsZW5kYXItY29udGV4dC1tZW51IC5pdGVtIC5jb250ZW50IC50ZXh0IHtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbn1cbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLml0ZW0gLmNvbnRlbnQgLmFycm93IHtcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICB0ZXh0LWFsaWduOiByaWdodDtcbn1cbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLml0ZW0gLnN1Ym1lbnUge1xuICB0b3A6IC0xcHg7XG4gIC8qIENvbXBlbnNhdGUgZm9yIHRoZSBib3JkZXIgKi9cbn1cbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLml0ZW0gLnN1Ym1lbnU6bm90KC5vcGVuLWxlZnQpIHtcbiAgbGVmdDogMTAwJTtcbn1cbi5jYWxlbmRhci1jb250ZXh0LW1lbnUgLml0ZW0gLnN1Ym1lbnUub3Blbi1sZWZ0IHtcbiAgcmlnaHQ6IDEwMCU7XG59XG4uY2FsZW5kYXItY29udGV4dC1tZW51IC5pdGVtOmhvdmVyID4gLnN1Ym1lbnUge1xuICBkaXNwbGF5OiBibG9jaztcbn1cbi50YWJsZS1zdHJpcGVkIC5jYWxlbmRhciB0YWJsZS5tb250aCB0ciB0ZCxcbi50YWJsZS1zdHJpcGVkIC5jYWxlbmRhciB0YWJsZS5tb250aCB0ciB0aCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xufVxudGFibGUubW9udGggdGQuZGF5IC5kYXktY29udGVudDpob3ZlciB7XG4gIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuQC13ZWJraXQta2V5ZnJhbWVzIHNrLWJvdW5jZWRlbGF5IHtcbiAgMCUsXG4gIDgwJSxcbiAgMTAwJSB7XG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApO1xuICB9XG4gIDQwJSB7XG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDEpO1xuICB9XG59XG5Aa2V5ZnJhbWVzIHNrLWJvdW5jZWRlbGF5IHtcbiAgMCUsXG4gIDgwJSxcbiAgMTAwJSB7XG4gICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApO1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMCk7XG4gIH1cbiAgNDAlIHtcbiAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgfVxufVxuIjsKc3R5bGVJbmplY3QoY3NzXzI0OHopOyAvLwoKdmFyIHNjcmlwdCA9IHsKICBuYW1lOiAnQ2FsZW5kYXInLAogIHByb3BzOiBbJ2FsbG93T3ZlcmxhcCcsICdhbHdheXNIYWxmRGF5JywgJ2NvbnRleHRNZW51SXRlbXMnLCAnY3VzdG9tRGF5UmVuZGVyZXInLCAnY3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyJywgJ2RhdGFTb3VyY2UnLCAnZGlzYWJsZWREYXlzJywgJ2Rpc2FibGVkV2Vla0RheXMnLCAnZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZScsICdkaXNwbGF5SGVhZGVyJywgJ2Rpc3BsYXlXZWVrTnVtYmVyJywgJ2VuYWJsZUNvbnRleHRNZW51JywgJ2VuYWJsZVJhbmdlU2VsZWN0aW9uJywgJ2hpZGRlbldlZWtEYXlzJywgJ2xhbmd1YWdlJywgJ2xvYWRpbmdUZW1wbGF0ZScsICdtYXhEYXRlJywgJ21pbkRhdGUnLCAncm91bmRSYW5nZUxpbWl0cycsICdyZW5kZXJTdHlsZScsICd3ZWVrU3RhcnQnLCAneWVhciddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG91bGRSZW5kZXI6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy5jYWxlbmRhciA9IG5ldyBKc0NhbGVuZGFyKHRoaXMuJGVsLCB7CiAgICAgIC8vIE9wdGlvbnMKICAgICAgYWxsb3dPdmVybGFwOiB0aGlzLmFsbG93T3ZlcmxhcCwKICAgICAgYWx3YXlzSGFsZkRheTogdGhpcy5hbHdheXNIYWxmRGF5LAogICAgICBjb250ZXh0TWVudUl0ZW1zOiB0aGlzLmNvbnRleHRNZW51SXRlbXMsCiAgICAgIGN1c3RvbURheVJlbmRlcmVyOiB0aGlzLmN1c3RvbURheVJlbmRlcmVyLAogICAgICBjdXN0b21EYXRhU291cmNlUmVuZGVyZXI6IHRoaXMuY3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyLAogICAgICBkYXRhU291cmNlOiB0aGlzLmRhdGFTb3VyY2UsCiAgICAgIGRpc2FibGVkRGF5czogdGhpcy5kaXNhYmxlZERheXMsCiAgICAgIGRpc2FibGVkV2Vla0RheXM6IHRoaXMuZGlzYWJsZWRXZWVrRGF5cywKICAgICAgZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZTogdGhpcy5kaXNwbGF5RGlzYWJsZWREYXRhU291cmNlLAogICAgICBkaXNwbGF5SGVhZGVyOiB0aGlzLmRpc3BsYXlIZWFkZXIsCiAgICAgIGRpc3BsYXlXZWVrTnVtYmVyOiB0aGlzLmRpc3BsYXlXZWVrTnVtYmVyLAogICAgICBlbmFibGVDb250ZXh0TWVudTogdGhpcy5lbmFibGVDb250ZXh0TWVudSwKICAgICAgZW5hYmxlUmFuZ2VTZWxlY3Rpb246IHRoaXMuZW5hYmxlUmFuZ2VTZWxlY3Rpb24sCiAgICAgIGhpZGRlbldlZWtEYXlzOiB0aGlzLmhpZGRlbldlZWtEYXlzLAogICAgICBsYW5ndWFnZTogdGhpcy5sYW5ndWFnZSwKICAgICAgbG9hZGluZ1RlbXBsYXRlOiB0aGlzLmxvYWRpbmdUZW1wbGF0ZSwKICAgICAgbWF4RGF0ZTogdGhpcy5tYXhEYXRlLAogICAgICBtaW5EYXRlOiB0aGlzLm1pbkRhdGUsCiAgICAgIHJvdW5kUmFuZ2VMaW1pdHM6IHRoaXMucm91bmRSYW5nZUxpbWl0cywKICAgICAgc3R5bGU6IHRoaXMucmVuZGVyU3R5bGUsCiAgICAgIHdlZWtTdGFydDogdGhpcy53ZWVrU3RhcnQsCiAgICAgIHN0YXJ0WWVhcjogdGhpcy55ZWFyLAogICAgICAvLyBFdmVudHMKICAgICAgY2xpY2tEYXk6IGZ1bmN0aW9uIGNsaWNrRGF5KGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMuJGVtaXQoJ2NsaWNrLWRheScsIGUpOwogICAgICB9LAogICAgICBkYXlDb250ZXh0TWVudTogZnVuY3Rpb24gZGF5Q29udGV4dE1lbnUoZSkgewogICAgICAgIHJldHVybiBfdGhpcy4kZW1pdCgnZGF5LWNvbnRleHQtbWVudScsIGUpOwogICAgICB9LAogICAgICBtb3VzZU9uRGF5OiBmdW5jdGlvbiBtb3VzZU9uRGF5KGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMuJGVtaXQoJ21vdXNlLW9uLWRheScsIGUpOwogICAgICB9LAogICAgICBtb3VzZU91dERheTogZnVuY3Rpb24gbW91c2VPdXREYXkoZSkgewogICAgICAgIHJldHVybiBfdGhpcy4kZW1pdCgnbW91c2Utb3V0LWRheScsIGUpOwogICAgICB9LAogICAgICByZW5kZXJFbmQ6IGZ1bmN0aW9uIHJlbmRlckVuZChlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLiRlbWl0KCdyZW5kZXItZW5kJywgZSk7CiAgICAgIH0sCiAgICAgIHNlbGVjdFJhbmdlOiBmdW5jdGlvbiBzZWxlY3RSYW5nZShlKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLiRlbWl0KCdzZWxlY3QtcmFuZ2UnLCBlKTsKICAgICAgfSwKICAgICAgeWVhckNoYW5nZWQ6IGZ1bmN0aW9uIHllYXJDaGFuZ2VkKGUpIHsKICAgICAgICByZXR1cm4gX3RoaXMuJGVtaXQoJ3llYXItY2hhbmdlZCcsIGUpOwogICAgICB9CiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBhbGxQcm9wczogZnVuY3Rpb24gYWxsUHJvcHMoKSB7CiAgICAgIHJldHVybiAiXG4gICAgICAgICAgICAgICAgIi5jb25jYXQodGhpcy5hbGxvd092ZXJsYXAsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5hbHdheXNIYWxmRGF5LCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMuY29udGV4dE1lbnVJdGVtcywgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLmN1c3RvbURheVJlbmRlcmVyLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMuY3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMuZGF0YVNvdXJjZSwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLmRpc2FibGVkRGF5cywgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLmRpc2FibGVkV2Vla0RheXMsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5kaXNwbGF5RGlzYWJsZWREYXRhU291cmNlLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMuZGlzcGxheUhlYWRlciwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLmRpc3BsYXlXZWVrTnVtYmVyLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMuZW5hYmxlQ29udGV4dE1lbnUsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5lbmFibGVSYW5nZVNlbGVjdGlvbiwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLmhpZGRlbldlZWtEYXlzLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMubGFuZ3VhZ2UsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5sb2FkaW5nVGVtcGxhdGUsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5tYXhEYXRlLCAiXG4gICAgICAgICAgICAgICAgIikuY29uY2F0KHRoaXMubWluRGF0ZSwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLnJvdW5kUmFuZ2VMaW1pdHMsICJcbiAgICAgICAgICAgICAgICAiKS5jb25jYXQodGhpcy5yZW5kZXJTdHlsZSwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLndlZWtTdGFydCwgIlxuICAgICAgICAgICAgICAgICIpLmNvbmNhdCh0aGlzLnllYXIsICJcbiAgICAgICAgICAgICIpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFsbG93T3ZlcmxhcDogZnVuY3Rpb24gYWxsb3dPdmVybGFwKHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldEFsbG93T3ZlcmxhcCh2YWwpOwogICAgfSwKICAgIGFsd2F5c0hhbGZEYXk6IGZ1bmN0aW9uIGFsd2F5c0hhbGZEYXkodmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0QWx3YXlzSGFsZkRheSh2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgY29udGV4dE1lbnVJdGVtczogZnVuY3Rpb24gY29udGV4dE1lbnVJdGVtcyh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXRDb250ZXh0TWVudUl0ZW1zKHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICBjdXN0b21EYXlSZW5kZXJlcjogZnVuY3Rpb24gY3VzdG9tRGF5UmVuZGVyZXIodmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0Q3VzdG9tRGF5UmVuZGVyZXIodmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIGN1c3RvbURhdGFTb3VyY2VSZW5kZXJlcjogZnVuY3Rpb24gY3VzdG9tRGF0YVNvdXJjZVJlbmRlcmVyKHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldEN1c3RvbURhdGFTb3VyY2VSZW5kZXJlcih2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgZGF0YVNvdXJjZTogZnVuY3Rpb24gZGF0YVNvdXJjZSh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXREYXRhU291cmNlKHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICBkaXNhYmxlZERheXM6IGZ1bmN0aW9uIGRpc2FibGVkRGF5cyh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXREaXNhYmxlZERheXModmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIGRpc2FibGVkV2Vla0RheXM6IGZ1bmN0aW9uIGRpc2FibGVkV2Vla0RheXModmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0RGlzYWJsZWRXZWVrRGF5cyh2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZTogZnVuY3Rpb24gZGlzcGxheURpc2FibGVkRGF0YVNvdXJjZSh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXREaXNwbGF5RGlzYWJsZWREYXRhU291cmNlKHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICBkaXNwbGF5SGVhZGVyOiBmdW5jdGlvbiBkaXNwbGF5SGVhZGVyKHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldERpc3BsYXlIZWFkZXIodmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIGRpc3BsYXlXZWVrTnVtYmVyOiBmdW5jdGlvbiBkaXNwbGF5V2Vla051bWJlcih2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXREaXNwbGF5V2Vla051bWJlcih2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgZW5hYmxlQ29udGV4dE1lbnU6IGZ1bmN0aW9uIGVuYWJsZUNvbnRleHRNZW51KHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldEVuYWJsZUNvbnRleHRNZW51KHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICBlbmFibGVSYW5nZVNlbGVjdGlvbjogZnVuY3Rpb24gZW5hYmxlUmFuZ2VTZWxlY3Rpb24odmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0RW5hYmxlUmFuZ2VTZWxlY3Rpb24odmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIGhpZGRlbldlZWtEYXlzOiBmdW5jdGlvbiBoaWRkZW5XZWVrRGF5cyh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXRIaWRkZW5XZWVrRGF5cyh2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgbGFuZ3VhZ2U6IGZ1bmN0aW9uIGxhbmd1YWdlKHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldExhbmd1YWdlKHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICBsb2FkaW5nVGVtcGxhdGU6IGZ1bmN0aW9uIGxvYWRpbmdUZW1wbGF0ZSh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXRMb2FkaW5nVGVtcGxhdGUodmFsLCB0cnVlKTsKICAgIH0sCiAgICBtYXhEYXRlOiBmdW5jdGlvbiBtYXhEYXRlKHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldE1heERhdGUodmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIG1pbkRhdGU6IGZ1bmN0aW9uIG1pbkRhdGUodmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0TWluRGF0ZSh2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgcm91bmRSYW5nZUxpbWl0czogZnVuY3Rpb24gcm91bmRSYW5nZUxpbWl0cyh2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXRSb3VuZFJhbmdlTGltaXRzKHZhbCwgdHJ1ZSk7CiAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gdHJ1ZTsKICAgIH0sCiAgICByZW5kZXJTdHlsZTogZnVuY3Rpb24gcmVuZGVyU3R5bGUodmFsKSB7CiAgICAgIHRoaXMuY2FsZW5kYXIuc2V0U3R5bGUodmFsLCB0cnVlKTsKICAgICAgdGhpcy5zaG91bGRSZW5kZXIgPSB0cnVlOwogICAgfSwKICAgIHdlZWtTdGFydDogZnVuY3Rpb24gd2Vla1N0YXJ0KHZhbCkgewogICAgICB0aGlzLmNhbGVuZGFyLnNldFdlZWtTdGFydCh2YWwsIHRydWUpOwogICAgICB0aGlzLnNob3VsZFJlbmRlciA9IHRydWU7CiAgICB9LAogICAgeWVhcjogZnVuY3Rpb24geWVhcih2YWwpIHsKICAgICAgdGhpcy5jYWxlbmRhci5zZXRZZWFyKHZhbCk7CiAgICB9LAogICAgYWxsUHJvcHM6IGZ1bmN0aW9uIGFsbFByb3BzKHZhbCkgewogICAgICBpZiAodGhpcy5zaG91bGRSZW5kZXIpIHsKICAgICAgICB0aGlzLmNhbGVuZGFyLnJlbmRlcigpOwogICAgICAgIHRoaXMuc2hvdWxkUmVuZGVyID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGxvY2FsZXM6IEpzQ2FsZW5kYXIubG9jYWxlcyAvLyBNYXAgdGhlICJsb2NhbGVzIiBwcm9wZXJ0eSB0byB0aGUganMteWVhci1jYWxlbmRhciAibG9jYWxlcyIgcHJvcGVydHksIGluIG9yZGVyIHRvIG1ha2UgdGhlIGxvY2FsZSBmaWxlcyBjb21wYXRpYmxlCgp9OwoKZnVuY3Rpb24gbm9ybWFsaXplQ29tcG9uZW50KHRlbXBsYXRlLCBzdHlsZSwgc2NyaXB0LCBzY29wZUlkLCBpc0Z1bmN0aW9uYWxUZW1wbGF0ZSwgbW9kdWxlSWRlbnRpZmllcgovKiBzZXJ2ZXIgb25seSAqLwosIHNoYWRvd01vZGUsIGNyZWF0ZUluamVjdG9yLCBjcmVhdGVJbmplY3RvclNTUiwgY3JlYXRlSW5qZWN0b3JTaGFkb3cpIHsKICBpZiAodHlwZW9mIHNoYWRvd01vZGUgIT09ICdib29sZWFuJykgewogICAgY3JlYXRlSW5qZWN0b3JTU1IgPSBjcmVhdGVJbmplY3RvcjsKICAgIGNyZWF0ZUluamVjdG9yID0gc2hhZG93TW9kZTsKICAgIHNoYWRvd01vZGUgPSBmYWxzZTsKICB9IC8vIFZ1ZS5leHRlbmQgY29uc3RydWN0b3IgZXhwb3J0IGludGVyb3AuCgoKICB2YXIgb3B0aW9ucyA9IHR5cGVvZiBzY3JpcHQgPT09ICdmdW5jdGlvbicgPyBzY3JpcHQub3B0aW9ucyA6IHNjcmlwdDsgLy8gcmVuZGVyIGZ1bmN0aW9ucwoKICBpZiAodGVtcGxhdGUgJiYgdGVtcGxhdGUucmVuZGVyKSB7CiAgICBvcHRpb25zLnJlbmRlciA9IHRlbXBsYXRlLnJlbmRlcjsKICAgIG9wdGlvbnMuc3RhdGljUmVuZGVyRm5zID0gdGVtcGxhdGUuc3RhdGljUmVuZGVyRm5zOwogICAgb3B0aW9ucy5fY29tcGlsZWQgPSB0cnVlOyAvLyBmdW5jdGlvbmFsIHRlbXBsYXRlCgogICAgaWYgKGlzRnVuY3Rpb25hbFRlbXBsYXRlKSB7CiAgICAgIG9wdGlvbnMuZnVuY3Rpb25hbCA9IHRydWU7CiAgICB9CiAgfSAvLyBzY29wZWRJZAoKCiAgaWYgKHNjb3BlSWQpIHsKICAgIG9wdGlvbnMuX3Njb3BlSWQgPSBzY29wZUlkOwogIH0KCiAgdmFyIGhvb2s7CgogIGlmIChtb2R1bGVJZGVudGlmaWVyKSB7CiAgICAvLyBzZXJ2ZXIgYnVpbGQKICAgIGhvb2sgPSBmdW5jdGlvbiBob29rKGNvbnRleHQpIHsKICAgICAgLy8gMi4zIGluamVjdGlvbgogICAgICBjb250ZXh0ID0gY29udGV4dCB8fCAvLyBjYWNoZWQgY2FsbAogICAgICB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5zc3JDb250ZXh0IHx8IC8vIHN0YXRlZnVsCiAgICAgIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LiR2bm9kZSAmJiB0aGlzLnBhcmVudC4kdm5vZGUuc3NyQ29udGV4dDsgLy8gZnVuY3Rpb25hbAogICAgICAvLyAyLjIgd2l0aCBydW5Jbk5ld0NvbnRleHQ6IHRydWUKCiAgICAgIGlmICghY29udGV4dCAmJiB0eXBlb2YgX19WVUVfU1NSX0NPTlRFWFRfXyAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBjb250ZXh0ID0gX19WVUVfU1NSX0NPTlRFWFRfXzsKICAgICAgfSAvLyBpbmplY3QgY29tcG9uZW50IHN0eWxlcwoKCiAgICAgIGlmIChzdHlsZSkgewogICAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3JTU1IoY29udGV4dCkpOwogICAgICB9IC8vIHJlZ2lzdGVyIGNvbXBvbmVudCBtb2R1bGUgaWRlbnRpZmllciBmb3IgYXN5bmMgY2h1bmsgaW5mZXJlbmNlCgoKICAgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dC5fcmVnaXN0ZXJlZENvbXBvbmVudHMpIHsKICAgICAgICBjb250ZXh0Ll9yZWdpc3RlcmVkQ29tcG9uZW50cy5hZGQobW9kdWxlSWRlbnRpZmllcik7CiAgICAgIH0KICAgIH07IC8vIHVzZWQgYnkgc3NyIGluIGNhc2UgY29tcG9uZW50IGlzIGNhY2hlZCBhbmQgYmVmb3JlQ3JlYXRlCiAgICAvLyBuZXZlciBnZXRzIGNhbGxlZAoKCiAgICBvcHRpb25zLl9zc3JSZWdpc3RlciA9IGhvb2s7CiAgfSBlbHNlIGlmIChzdHlsZSkgewogICAgaG9vayA9IHNoYWRvd01vZGUgPyBmdW5jdGlvbiAoKSB7CiAgICAgIHN0eWxlLmNhbGwodGhpcywgY3JlYXRlSW5qZWN0b3JTaGFkb3codGhpcy4kcm9vdC4kb3B0aW9ucy5zaGFkb3dSb290KSk7CiAgICB9IDogZnVuY3Rpb24gKGNvbnRleHQpIHsKICAgICAgc3R5bGUuY2FsbCh0aGlzLCBjcmVhdGVJbmplY3Rvcihjb250ZXh0KSk7CiAgICB9OwogIH0KCiAgaWYgKGhvb2spIHsKICAgIGlmIChvcHRpb25zLmZ1bmN0aW9uYWwpIHsKICAgICAgLy8gcmVnaXN0ZXIgZm9yIGZ1bmN0aW9uYWwgY29tcG9uZW50IGluIHZ1ZSBmaWxlCiAgICAgIHZhciBvcmlnaW5hbFJlbmRlciA9IG9wdGlvbnMucmVuZGVyOwoKICAgICAgb3B0aW9ucy5yZW5kZXIgPSBmdW5jdGlvbiByZW5kZXJXaXRoU3R5bGVJbmplY3Rpb24oaCwgY29udGV4dCkgewogICAgICAgIGhvb2suY2FsbChjb250ZXh0KTsKICAgICAgICByZXR1cm4gb3JpZ2luYWxSZW5kZXIoaCwgY29udGV4dCk7CiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICAvLyBpbmplY3QgY29tcG9uZW50IHJlZ2lzdHJhdGlvbiBhcyBiZWZvcmVDcmVhdGUgaG9vawogICAgICB2YXIgZXhpc3RpbmcgPSBvcHRpb25zLmJlZm9yZUNyZWF0ZTsKICAgICAgb3B0aW9ucy5iZWZvcmVDcmVhdGUgPSBleGlzdGluZyA/IFtdLmNvbmNhdChleGlzdGluZywgaG9vaykgOiBbaG9va107CiAgICB9CiAgfQoKICByZXR1cm4gc2NyaXB0Owp9Cgp2YXIgbm9ybWFsaXplQ29tcG9uZW50XzEgPSBub3JtYWxpemVDb21wb25lbnQ7Ci8qIHNjcmlwdCAqLwoKdmFyIF9fdnVlX3NjcmlwdF9fID0gc2NyaXB0OwovKiB0ZW1wbGF0ZSAqLwoKdmFyIF9fdnVlX3JlbmRlcl9fID0gZnVuY3Rpb24gX192dWVfcmVuZGVyX18oKSB7CiAgdmFyIF92bSA9IHRoaXM7CgogIHZhciBfaCA9IF92bS4kY3JlYXRlRWxlbWVudDsKCiAgdmFyIF9jID0gX3ZtLl9zZWxmLl9jIHx8IF9oOwoKICByZXR1cm4gX2MoImRpdiIpOwp9OwoKdmFyIF9fdnVlX3N0YXRpY1JlbmRlckZuc19fID0gW107Cl9fdnVlX3JlbmRlcl9fLl93aXRoU3RyaXBwZWQgPSB0cnVlOwovKiBzdHlsZSAqLwoKdmFyIF9fdnVlX2luamVjdF9zdHlsZXNfXyA9IHVuZGVmaW5lZDsKLyogc2NvcGVkICovCgp2YXIgX192dWVfc2NvcGVfaWRfXyA9IHVuZGVmaW5lZDsKLyogbW9kdWxlIGlkZW50aWZpZXIgKi8KCnZhciBfX3Z1ZV9tb2R1bGVfaWRlbnRpZmllcl9fID0gdW5kZWZpbmVkOwovKiBmdW5jdGlvbmFsIHRlbXBsYXRlICovCgp2YXIgX192dWVfaXNfZnVuY3Rpb25hbF90ZW1wbGF0ZV9fID0gZmFsc2U7Ci8qIHN0eWxlIGluamVjdCAqLwoKLyogc3R5bGUgaW5qZWN0IFNTUiAqLwoKdmFyIHZZZWFyQ2FsZW5kYXIgPSBub3JtYWxpemVDb21wb25lbnRfMSh7CiAgcmVuZGVyOiBfX3Z1ZV9yZW5kZXJfXywKICBzdGF0aWNSZW5kZXJGbnM6IF9fdnVlX3N0YXRpY1JlbmRlckZuc19fCn0sIF9fdnVlX2luamVjdF9zdHlsZXNfXywgX192dWVfc2NyaXB0X18sIF9fdnVlX3Njb3BlX2lkX18sIF9fdnVlX2lzX2Z1bmN0aW9uYWxfdGVtcGxhdGVfXywgX192dWVfbW9kdWxlX2lkZW50aWZpZXJfXywgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwptb2R1bGUuZXhwb3J0cyA9IHZZZWFyQ2FsZW5kYXI7"},{"version":3,"sources":["C:/wamp64/www/smartpoint/smartpoint/src/models/v-year-calendar.js"],"names":["commonjsGlobal","globalThis","window","global","self","unwrapExports","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","module","exports","jsYearCalendar","factory","_exports","defineProperty","value","_typeof","obj","Symbol","iterator","constructor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_defineProperty","NodeList","forEach","callback","thisArg","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","s","el","document","documentElement","contains","parentElement","parentNode","nodeType","Calendar","element","options","arguments","undefined","HTMLElement","querySelector","Error","classList","add","_initializeEvents","_initializeOptions","setYear","startYear","opt","isNaN","parseInt","Date","getFullYear","minDate","maxDate","language","locales","allowOverlap","displayWeekNumber","displayDisabledDataSource","displayHeader","alwaysHalfDay","enableRangeSelection","disabledDays","Array","disabledWeekDays","hiddenWeekDays","roundRangeLimits","dataSource","style","enableContextMenu","contextMenuItems","customDayRenderer","customDataSourceRenderer","weekStart","loadingTemplate","_dataSource","_initializeDatasourceColors","yearChanged","addEventListener","renderEnd","clickDay","dayContextMenu","selectRange","mouseOnDay","mouseOutDay","_fetchDataSource","getDataSource","result","then","color","colors","render","isLoading","firstChild","removeChild","_renderHeader","_renderLoading","_renderBody","_renderDataSource","_applyEvents","months","opacity","display","transition","setTimeout","_triggerEvent","currentYear","header","createElement","headerTable","prevDiv","prevIcon","innerHTML","appendChild","prev2YearDiv","textContent","toString","prevYearDiv","yearDiv","nextYearDiv","next2YearDiv","nextDiv","nextIcon","monthsDiv","m","monthDiv","dataset","monthId","_nbCols","concat","firstDate","table","thead","titleRow","titleCell","setAttribute","headerRow","weekNumberCell","weekShort","d","headerCell","daysMin","_isHidden","currentDate","getTime","lastDate","getDay","setDate","getDate","row","currentThursday","getWeekNumber","cell","_isDisabled","cellContent","container","minHeight","loading","spinner","bounce","_this","querySelectorAll","month","monthData","startDate","endDate","push","day","nextDate","dayData","_renderDataSourceDay","elt","events","parent","weight","boxShadow","backgroundColor","currentTime","startHalfDay","otherColor","background","endHalfDay","_this2","e","currentTarget","marginLeft","visibility","cells","stopPropagation","date","_getDate","getEvents","preventDefault","_openContextMenu","which","isThereFreeSlot","_mouseDown","_rangeStart","_rangeEnd","_refreshRange","newDate","getMonth","oldValue","getEventsOnRange","_responsiveInterval","clearInterval","setInterval","calendarSize","offsetWidth","monthSize","className","remove","_this3","_getElementPosition","top","left","offsetTop","offsetLeft","offsetParent","_this4","contextMenu","body","eventItem","paddingLeft","eventItemContent","text","name","icon","_renderContextMenuItems","children","position","right","getBoundingClientRect","_checkContextMenuItemsPosition","closeContextMenu","event","type","removeEventListener","items","evt","subMenu","visible","menuItem","menuItemContent","click","index","menus","menu","htmlMenu","year","eventName","parameters","Event","createEvent","initEvent","calendar","dispatchEvent","workingDate","setHours","week1","Math","round","_this5","after","some","getYear","_this6","parsedYear","eventResult","preventRendering","getMinDate","setMinDate","getMaxDate","setMaxDate","getStyle","setStyle","getAllowOverlap","setAllowOverlap","getDisplayWeekNumber","setDisplayWeekNumber","getDisplayHeader","setDisplayHeader","getDisplayDisabledDataSource","setDisplayDisabledDataSource","getAlwaysHalfDay","setAlwaysHalfDay","getEnableRangeSelection","setEnableRangeSelection","getDisabledDays","setDisabledDays","getDisabledWeekDays","setDisabledWeekDays","getHiddenWeekDays","setHiddenWeekDays","getRoundRangeLimits","setRoundRangeLimits","getEnableContextMenu","setEnableContextMenu","getContextMenuItems","setContextMenuItems","getCustomDayRenderer","setCustomDayRenderer","getCustomDataSourceRenderer","setCustomDataSourceRenderer","getLanguage","setLanguage","setDataSource","_this7","getWeekStart","setWeekStart","getLoadingTemplate","setLoadingTemplate","addEvent","en","days","daysShort","monthsShort","JsCalendar","styleInject","css","ref","insertAt","head","getElementsByTagName","insertBefore","styleSheet","cssText","createTextNode","css_248z","script","data","shouldRender","mounted","$el","renderStyle","$emit","computed","allProps","watch","val","normalizeComponent","template","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","staticRenderFns","_compiled","functional","_scopeId","hook","context","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","originalRender","renderWithStyleInjection","h","existing","beforeCreate","normalizeComponent_1","__vue_script__","__vue_render__","_vm","_h","$createElement","_c","_self","__vue_staticRenderFns__","_withStripped","__vue_inject_styles__","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","vYearCalendar"],"mappings":"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","sourcesContent":["'use strict';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar jsYearCalendar = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n  {\n    factory(exports);\n  }\n})(typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : commonjsGlobal, function (_exports) {\n\n  Object.defineProperty(_exports, \"__esModule\", {\n    value: true\n  });\n  _exports[\"default\"] = void 0;\n\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  /* =========================================================\n   * JS year calendar v1.0.0\n   * Repo: https://github.com/year-calendar/js-year-calendar\n   * =========================================================\n   * Created by Paul David-Sivelle\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this file except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   * http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   * ========================================================= */\n  // NodeList forEach() polyfill\n  if (typeof NodeList !== \"undefined\" && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = function (callback, thisArg) {\n      thisArg = thisArg || window;\n\n      for (var i = 0; i < this.length; i++) {\n        callback.call(thisArg, this[i], i, this);\n      }\n    };\n  } // Element closest() polyfill\n\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.matches) {\n    var prototype = Element.prototype;\n    Element.prototype.matches = prototype.msMatchesSelector || prototype.webkitMatchesSelector;\n  }\n\n  if (typeof Element !== \"undefined\" && !Element.prototype.closest) {\n    Element.prototype.closest = function (s) {\n      var el = this;\n      if (!document.documentElement.contains(el)) return null;\n\n      do {\n        if (el.matches(s)) return el;\n        el = el.parentElement || el.parentNode;\n      } while (el !== null && el.nodeType == 1);\n\n      return null;\n    };\n  }\n  /**\n   * Calendar instance.\n   */\n\n\n  var Calendar = /*#__PURE__*/function () {\n    /**\n     * Fired when a day is clicked.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\n     *   console.log(\"Click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\n     * })\n     * ```\n     */\n\n    /**\n     * Fired when a day is right clicked.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('clickDay', function(e) {\n     *   console.log(\"Right click on day: \" + e.date + \" (\" + e.events.length + \" events)\");\n     * })\n     * ```\n     */\n\n    /**\n     * Fired when the mouse enter in a day.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('mouseOnDay', function(e) {\n     *   console.log(\"Mouse enter in a day: \" + e.date + \" (\" + e.events.length + \" events)\");\n     * })\n     * ```\n     */\n\n    /**\n     * Fired when the mouse leave a day.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('mouseOutDay', function(e) {\n     *   console.log(\"Mouse leave a day: \" + e.date + \" (\" + e.events.length + \" events)\");\n     * })\n     * ```\n     */\n\n    /**\n     * Fired when the calendar rendering is ended.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('renderEnd', function(e) {\n     *   console.log(\"Render end for year: \" + e.currentYear);\n     * })\n     * ```\n     */\n\n    /**\n     * Fired when a date range is selected.\n     * \n     * Don't forget to enable the `enableRangeSelection` option to be able to use the range selection functionality.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('selectRange', function(e) {\n     *   console.log(\"Select the range: \" + e.startDate + \" - \" + e.endDate);\n     * })\n     * ```\n     */\n\n    /**\n     * Triggered after the changing the current year.\n     * @event\n     * @example\n     * ```\n     * \n     * document.querySelector('.calendar').addEventListener('yearChanged', function(e) {\n     *   console.log(\"New year selected: \" + e.currentYear);\n     * })\n     * ```\n     */\n\n    /**\n     * Create a new calendar.\n     * @param element The element (or the selector to an element) in which the calendar should be created.\n     * @param options [Optional] The options used to customize the calendar\n     */\n    function Calendar(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Calendar);\n\n      _defineProperty(this, \"element\", void 0);\n\n      _defineProperty(this, \"options\", void 0);\n\n      _defineProperty(this, \"_dataSource\", void 0);\n\n      _defineProperty(this, \"_mouseDown\", void 0);\n\n      _defineProperty(this, \"_rangeStart\", void 0);\n\n      _defineProperty(this, \"_rangeEnd\", void 0);\n\n      _defineProperty(this, \"_responsiveInterval\", void 0);\n\n      _defineProperty(this, \"_nbCols\", void 0);\n\n      _defineProperty(this, \"clickDay\", void 0);\n\n      _defineProperty(this, \"dayContextMenu\", void 0);\n\n      _defineProperty(this, \"mouseOnDay\", void 0);\n\n      _defineProperty(this, \"mouseOutDay\", void 0);\n\n      _defineProperty(this, \"renderEnd\", void 0);\n\n      _defineProperty(this, \"selectRange\", void 0);\n\n      _defineProperty(this, \"yearChanged\", void 0);\n\n      if (element instanceof HTMLElement) {\n        this.element = element;\n      } else if (typeof element === \"string\") {\n        this.element = document.querySelector(element);\n      } else {\n        throw new Error(\"The element parameter should be a DOM node or a selector\");\n      }\n\n      this.element.classList.add('calendar');\n\n      this._initializeEvents(options);\n\n      this._initializeOptions(options);\n\n      this.setYear(this.options.startYear);\n    }\n\n    _createClass(Calendar, [{\n      key: \"_initializeOptions\",\n      value: function _initializeOptions(opt) {\n        if (opt == null) {\n          opt = {};\n        }\n\n        this.options = {\n          startYear: !isNaN(parseInt(opt.startYear)) ? parseInt(opt.startYear) : new Date().getFullYear(),\n          minDate: opt.minDate instanceof Date ? opt.minDate : null,\n          maxDate: opt.maxDate instanceof Date ? opt.maxDate : null,\n          language: opt.language != null && Calendar.locales[opt.language] != null ? opt.language : 'en',\n          allowOverlap: opt.allowOverlap != null ? opt.allowOverlap : true,\n          displayWeekNumber: opt.displayWeekNumber != null ? opt.displayWeekNumber : false,\n          displayDisabledDataSource: opt.displayDisabledDataSource != null ? opt.displayDisabledDataSource : false,\n          displayHeader: opt.displayHeader != null ? opt.displayHeader : true,\n          alwaysHalfDay: opt.alwaysHalfDay != null ? opt.alwaysHalfDay : false,\n          enableRangeSelection: opt.enableRangeSelection != null ? opt.enableRangeSelection : false,\n          disabledDays: opt.disabledDays instanceof Array ? opt.disabledDays : [],\n          disabledWeekDays: opt.disabledWeekDays instanceof Array ? opt.disabledWeekDays : [],\n          hiddenWeekDays: opt.hiddenWeekDays instanceof Array ? opt.hiddenWeekDays : [],\n          roundRangeLimits: opt.roundRangeLimits != null ? opt.roundRangeLimits : false,\n          dataSource: opt.dataSource instanceof Array || typeof opt.dataSource === \"function\" ? opt.dataSource : [],\n          style: opt.style == 'background' || opt.style == 'border' || opt.style == 'custom' ? opt.style : 'border',\n          enableContextMenu: opt.enableContextMenu != null ? opt.enableContextMenu : false,\n          contextMenuItems: opt.contextMenuItems instanceof Array ? opt.contextMenuItems : [],\n          customDayRenderer: typeof opt.customDayRenderer === \"function\" ? opt.customDayRenderer : null,\n          customDataSourceRenderer: typeof opt.customDataSourceRenderer === \"function\" ? opt.customDataSourceRenderer : null,\n          weekStart: !isNaN(parseInt(opt.weekStart)) ? parseInt(opt.weekStart) : 1,//null,\n          loadingTemplate: typeof opt.loadingTemplate === \"string\" || opt.loadingTemplate instanceof HTMLElement ? opt.loadingTemplate : null\n        };\n\n        if (this.options.dataSource instanceof Array) {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n        }\n      }\n    }, {\n      key: \"_initializeEvents\",\n      value: function _initializeEvents(opt) {\n        if (opt == null) {\n          opt = [];\n        }\n\n        if (opt.yearChanged) {\n          this.element.addEventListener('yearChanged', opt.yearChanged);\n        }\n\n        if (opt.renderEnd) {\n          this.element.addEventListener('renderEnd', opt.renderEnd);\n        }\n\n        if (opt.clickDay) {\n          this.element.addEventListener('clickDay', opt.clickDay);\n        }\n\n        if (opt.dayContextMenu) {\n          this.element.addEventListener('dayContextMenu', opt.dayContextMenu);\n        }\n\n        if (opt.selectRange) {\n          this.element.addEventListener('selectRange', opt.selectRange);\n        }\n\n        if (opt.mouseOnDay) {\n          this.element.addEventListener('mouseOnDay', opt.mouseOnDay);\n        }\n\n        if (opt.mouseOutDay) {\n          this.element.addEventListener('mouseOutDay', opt.mouseOutDay);\n        }\n      }\n    }, {\n      key: \"_fetchDataSource\",\n      value: function _fetchDataSource(callback) {\n        if (typeof this.options.dataSource === \"function\") {\n          var getDataSource = this.options.dataSource;\n\n          if (getDataSource.length == 2) {\n            // 2 parameters, means callback method\n            getDataSource(this.options.startYear, callback);\n          } else {\n            // 1 parameter, means synchronous or promise method\n            var result = getDataSource(this.options.startYear);\n\n            if (result instanceof Array) {\n              callback(result);\n            } else {\n              result.then(callback);\n            }\n          }\n        } else {\n          callback(this.options.dataSource);\n        }\n      }\n    }, {\n      key: \"_initializeDatasourceColors\",\n      value: function _initializeDatasourceColors() {\n        for (var i = 0; i < this._dataSource.length; i++) {\n          if (this._dataSource[i].color == null) {\n            this._dataSource[i].color = Calendar.colors[i % Calendar.colors.length];\n          }\n        }\n      }\n      /**\n          * Renders the calendar.\n          */\n\n    }, {\n      key: \"render\",\n      value: function render() {\n        var isLoading = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n        // Clear the calendar (faster method)\n        while (this.element.firstChild) {\n          this.element.removeChild(this.element.firstChild);\n        }\n\n        if (this.options.displayHeader) {\n          this._renderHeader();\n        }\n\n        if (isLoading) {\n          this._renderLoading();\n        } else {\n          this._renderBody();\n\n          this._renderDataSource();\n\n          this._applyEvents(); // Fade animation\n\n\n          var months = this.element.querySelector('.months-container');\n          months.style.opacity = '0';\n          months.style.display = 'block';\n          months.style.transition = 'opacity 0.5s';\n          setTimeout(function () {\n            months.style.opacity = '1';\n            setTimeout(function () {\n              return months.style.transition = '';\n            }, 500);\n          }, 0);\n\n          this._triggerEvent('renderEnd', {\n            currentYear: this.options.startYear\n          });\n        }\n      }\n    }, {\n      key: \"_renderHeader\",\n      value: function _renderHeader() {\n        var header = document.createElement('div');\n        header.classList.add('calendar-header');\n        var headerTable = document.createElement('table');\n        var prevDiv = document.createElement('th');\n        prevDiv.classList.add('prev');\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevDiv.classList.add('disabled');\n        }\n\n        var prevIcon = document.createElement('span');\n        prevIcon.innerHTML = \"&lsaquo;\";\n        prevDiv.appendChild(prevIcon);\n        headerTable.appendChild(prevDiv);\n        var prev2YearDiv = document.createElement('th');\n        prev2YearDiv.classList.add('year-title');\n        prev2YearDiv.classList.add('year-neighbor2');\n        prev2YearDiv.textContent = (this.options.startYear - 2).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 2, 11, 31)) {\n          prev2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prev2YearDiv);\n        var prevYearDiv = document.createElement('th');\n        prevYearDiv.classList.add('year-title');\n        prevYearDiv.classList.add('year-neighbor');\n        prevYearDiv.textContent = (this.options.startYear - 1).toString();\n\n        if (this.options.minDate != null && this.options.minDate > new Date(this.options.startYear - 1, 11, 31)) {\n          prevYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(prevYearDiv);\n        var yearDiv = document.createElement('th');\n        yearDiv.classList.add('year-title');\n        yearDiv.textContent = this.options.startYear.toString();\n        headerTable.appendChild(yearDiv);\n        var nextYearDiv = document.createElement('th');\n        nextYearDiv.classList.add('year-title');\n        nextYearDiv.classList.add('year-neighbor');\n        nextYearDiv.textContent = (this.options.startYear + 1).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextYearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(nextYearDiv);\n        var next2YearDiv = document.createElement('th');\n        next2YearDiv.classList.add('year-title');\n        next2YearDiv.classList.add('year-neighbor2');\n        next2YearDiv.textContent = (this.options.startYear + 2).toString();\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 2, 0, 1)) {\n          next2YearDiv.classList.add('disabled');\n        }\n\n        headerTable.appendChild(next2YearDiv);\n        var nextDiv = document.createElement('th');\n        nextDiv.classList.add('next');\n\n        if (this.options.maxDate != null && this.options.maxDate < new Date(this.options.startYear + 1, 0, 1)) {\n          nextDiv.classList.add('disabled');\n        }\n\n        var nextIcon = document.createElement('span');\n        nextIcon.innerHTML = \"&rsaquo;\";\n        nextDiv.appendChild(nextIcon);\n        headerTable.appendChild(nextDiv);\n        header.appendChild(headerTable);\n        this.element.appendChild(header);\n      }\n    }, {\n      key: \"_renderBody\",\n      value: function _renderBody() {\n        var monthsDiv = document.createElement('div');\n        monthsDiv.classList.add('months-container');\n\n        for (var m = 0; m < 12; m++) {\n          /* Container */\n          var monthDiv = document.createElement('div');\n          monthDiv.classList.add('month-container');\n          monthDiv.dataset.monthId = m.toString();\n\n          if (this._nbCols) {\n            monthDiv.classList.add(\"month-\".concat(this._nbCols));\n          }\n\n          var firstDate = new Date(this.options.startYear, m, 1);\n          var table = document.createElement('table');\n          table.classList.add('month');\n          /* Month header */\n\n          var thead = document.createElement('thead');\n          var titleRow = document.createElement('tr');\n          var titleCell = document.createElement('th');\n          titleCell.classList.add('month-title');\n          titleCell.setAttribute('colspan', this.options.displayWeekNumber ? '8' : '7');\n          titleCell.textContent = Calendar.locales[this.options.language].months[m];\n          titleRow.appendChild(titleCell);\n          thead.appendChild(titleRow);\n          var headerRow = document.createElement('tr');\n\n          if (this.options.displayWeekNumber) {\n            var weekNumberCell = document.createElement('th');\n            weekNumberCell.classList.add('week-number');\n            weekNumberCell.textContent = Calendar.locales[this.options.language].weekShort;\n            headerRow.appendChild(weekNumberCell);\n          }\n\n          var weekStart = this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n          var d = weekStart;\n\n          do {\n            var headerCell = document.createElement('th');\n            headerCell.classList.add('day-header');\n            headerCell.textContent = Calendar.locales[this.options.language].daysMin[d];\n\n            if (this._isHidden(d)) {\n              headerCell.classList.add('hidden');\n            }\n\n            headerRow.appendChild(headerCell);\n            d++;\n            if (d >= 7) d = 0;\n          } while (d != weekStart);\n\n          thead.appendChild(headerRow);\n          table.appendChild(thead);\n          /* Days */\n\n          var currentDate = new Date(firstDate.getTime());\n          var lastDate = new Date(this.options.startYear, m + 1, 0);\n\n          while (currentDate.getDay() != weekStart) {\n            currentDate.setDate(currentDate.getDate() - 1);\n          }\n\n          while (currentDate <= lastDate) {\n            var row = document.createElement('tr');\n\n            if (this.options.displayWeekNumber) {\n              var weekNumberCell = document.createElement('td');\n              var currentThursday = new Date(currentDate.getTime()); // Week number is computed based on the thursday\n\n              currentThursday.setDate(currentThursday.getDate() - weekStart + 4);\n              weekNumberCell.classList.add('week-number');\n              weekNumberCell.textContent = this.getWeekNumber(currentThursday).toString();\n              row.appendChild(weekNumberCell);\n            }\n\n            do {\n              var cell = document.createElement('td');\n              cell.classList.add('day');\n\n              if (this._isHidden(currentDate.getDay())) {\n                cell.classList.add('hidden');\n              }\n\n              if (currentDate < firstDate) {\n                cell.classList.add('old');\n              } else if (currentDate > lastDate) {\n                cell.classList.add('new');\n              } else {\n                if (this._isDisabled(currentDate)) {\n                  cell.classList.add('disabled');\n                }\n\n                var cellContent = document.createElement('div');\n                cellContent.classList.add('day-content');\n                cellContent.textContent = currentDate.getDate().toString();\n                cell.appendChild(cellContent);\n\n                if (this.options.customDayRenderer) {\n                  this.options.customDayRenderer(cellContent, currentDate);\n                }\n              }\n\n              row.appendChild(cell);\n              currentDate.setDate(currentDate.getDate() + 1);\n            } while (currentDate.getDay() != weekStart);\n\n            table.appendChild(row);\n          }\n\n          monthDiv.appendChild(table);\n          monthsDiv.appendChild(monthDiv);\n        }\n\n        this.element.appendChild(monthsDiv);\n      }\n    }, {\n      key: \"_renderLoading\",\n      value: function _renderLoading() {\n        var container = document.createElement('div');\n        container.classList.add('calendar-loading-container');\n        container.style.minHeight = this._nbCols * 200 + 'px';\n        var loading = document.createElement('div');\n        loading.classList.add('calendar-loading');\n\n        if (this.options.loadingTemplate) {\n          if (typeof this.options.loadingTemplate === \"string\") {\n            loading.innerHTML = this.options.loadingTemplate;\n          } else if (this.options.loadingTemplate instanceof HTMLElement) {\n            loading.appendChild(this.options.loadingTemplate);\n          }\n        } else {\n          var spinner = document.createElement('div');\n          spinner.classList.add('calendar-spinner');\n\n          for (var i = 1; i <= 3; i++) {\n            var bounce = document.createElement('div');\n            bounce.classList.add(\"bounce\".concat(i));\n            spinner.appendChild(bounce);\n          }\n\n          loading.appendChild(spinner);\n        }\n\n        container.appendChild(loading);\n        this.element.appendChild(container);\n      }\n    }, {\n      key: \"_renderDataSource\",\n      value: function _renderDataSource() {\n        var _this = this;\n\n        if (this._dataSource != null && this._dataSource.length > 0) {\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n            var firstDate = new Date(_this.options.startYear, monthId, 1);\n            var lastDate = new Date(_this.options.startYear, monthId + 1, 1);\n\n            if ((_this.options.minDate == null || lastDate > _this.options.minDate) && (_this.options.maxDate == null || firstDate <= _this.options.maxDate)) {\n              var monthData = [];\n\n              for (var i = 0; i < _this._dataSource.length; i++) {\n                if (!(_this._dataSource[i].startDate >= lastDate) || _this._dataSource[i].endDate < firstDate) {\n                  monthData.push(_this._dataSource[i]);\n                }\n              }\n\n              if (monthData.length > 0) {\n                month.querySelectorAll('.day-content').forEach(function (day) {\n                  var currentDate = new Date(_this.options.startYear, monthId, parseInt(day.textContent));\n                  var nextDate = new Date(_this.options.startYear, monthId, currentDate.getDate() + 1);\n                  var dayData = [];\n\n                  if ((_this.options.minDate == null || currentDate >= _this.options.minDate) && (_this.options.maxDate == null || currentDate <= _this.options.maxDate)) {\n                    for (var i = 0; i < monthData.length; i++) {\n                      if (monthData[i].startDate < nextDate && monthData[i].endDate >= currentDate) {\n                        dayData.push(monthData[i]);\n                      }\n                    }\n\n                    if (dayData.length > 0 && (_this.options.displayDisabledDataSource || !_this._isDisabled(currentDate))) {\n                      _this._renderDataSourceDay(day, currentDate, dayData);\n                    }\n                  }\n                });\n              }\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_renderDataSourceDay\",\n      value: function _renderDataSourceDay(elt, currentDate, events) {\n        var parent = elt.parentElement;\n\n        switch (this.options.style) {\n          case 'border':\n            var weight = 0;\n\n            if (events.length == 1) {\n              weight = 4;\n            } else if (events.length <= 3) {\n              weight = 2;\n            } else {\n              parent.style.boxShadow = 'inset 0 -4px 0 0 black';\n            }\n\n            if (weight > 0) {\n              var boxShadow = '';\n\n              for (var i = 0; i < events.length; i++) {\n                if (boxShadow != '') {\n                  boxShadow += \",\";\n                }\n\n                boxShadow += \"inset 0 -\".concat((i + 1) * weight, \"px 0 0 \").concat(events[i].color);\n              }\n\n              parent.style.boxShadow = boxShadow;\n            }\n\n            break;\n\n          case 'background':\n            parent.style.backgroundColor = events[events.length - 1].color;\n            var currentTime = currentDate.getTime();\n\n            if (events[events.length - 1].startDate.getTime() == currentTime) {\n              parent.classList.add('day-start');\n\n              if (events[events.length - 1].startHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].startDate.getTime() != currentTime || !events[i].startHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(-45deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-left');\n              }\n            } else if (events[events.length - 1].endDate.getTime() == currentTime) {\n              parent.classList.add('day-end');\n\n              if (events[events.length - 1].endHalfDay || this.options.alwaysHalfDay) {\n                parent.classList.add('day-half'); // Find color for other half\n\n                var otherColor = 'transparent';\n\n                for (var i = events.length - 2; i >= 0; i--) {\n                  if (events[i].endDate.getTime() != currentTime || !events[i].endHalfDay && !this.options.alwaysHalfDay) {\n                    otherColor = events[i].color;\n                    break;\n                  }\n                }\n\n                parent.style.background = \"linear-gradient(135deg, \".concat(events[events.length - 1].color, \", \").concat(events[events.length - 1].color, \" 49%, \").concat(otherColor, \" 51%, \").concat(otherColor, \")\");\n              } else if (this.options.roundRangeLimits) {\n                parent.classList.add('round-right');\n              }\n            }\n\n            break;\n\n          case 'custom':\n            if (this.options.customDataSourceRenderer) {\n              this.options.customDataSourceRenderer.call(this, elt, currentDate, events);\n            }\n\n            break;\n        }\n      }\n    }, {\n      key: \"_applyEvents\",\n      value: function _applyEvents() {\n        var _this2 = this;\n\n        if (this.options.displayHeader) {\n          /* Header buttons */\n          this.element.querySelectorAll('.year-neighbor, .year-neighbor2').forEach(function (element) {\n            element.addEventListener('click', function (e) {\n              if (!e.currentTarget.classList.contains('disabled')) {\n                _this2.setYear(parseInt(e.currentTarget.textContent));\n              }\n            });\n          });\n          this.element.querySelector('.calendar-header .prev').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear - 1);\n                }, 50);\n              }, 100);\n            }\n          });\n          this.element.querySelector('.calendar-header .next').addEventListener('click', function (e) {\n            if (!e.currentTarget.classList.contains('disabled')) {\n              var months = _this2.element.querySelector('.months-container');\n\n              months.style.transition = 'margin-left 0.1s';\n              months.style.marginLeft = '-100%';\n              setTimeout(function () {\n                months.style.visibility = 'hidden';\n                months.style.transition = '';\n                months.style.marginLeft = '0';\n                setTimeout(function () {\n                  _this2.setYear(_this2.options.startYear + 1);\n                }, 50);\n              }, 100);\n            }\n          });\n        }\n\n        var cells = this.element.querySelectorAll('.day:not(.old):not(.new):not(.disabled)');\n        cells.forEach(function (cell) {\n          /* Click on date */\n          cell.addEventListener('click', function (e) {\n            e.stopPropagation();\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('clickDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Click right on date */\n\n          cell.addEventListener('contextmenu', function (e) {\n            if (_this2.options.enableContextMenu) {\n              e.preventDefault();\n\n              if (_this2.options.contextMenuItems.length > 0) {\n                _this2._openContextMenu(e.currentTarget);\n              }\n            }\n\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('dayContextMenu', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n          /* Range selection */\n\n          if (_this2.options.enableRangeSelection) {\n            cell.addEventListener('mousedown', function (e) {\n              if (e.which == 1) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (_this2.options.allowOverlap || _this2.isThereFreeSlot(currentDate)) {\n                  _this2._mouseDown = true;\n                  _this2._rangeStart = _this2._rangeEnd = currentDate;\n\n                  _this2._refreshRange();\n                }\n              }\n            });\n            cell.addEventListener('mouseenter', function (e) {\n              if (_this2._mouseDown) {\n                var currentDate = _this2._getDate(e.currentTarget);\n\n                if (!_this2.options.allowOverlap) {\n                  var newDate = new Date(_this2._rangeStart.getTime());\n\n                  if (newDate < currentDate) {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() + 1);\n\n                    while (newDate < currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, false)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() + 1);\n                      nextDate.setDate(nextDate.getDate() + 1);\n                    }\n                  } else {\n                    var nextDate = new Date(newDate.getFullYear(), newDate.getMonth(), newDate.getDate() - 1);\n\n                    while (newDate > currentDate) {\n                      if (!_this2.isThereFreeSlot(nextDate, true)) {\n                        break;\n                      }\n\n                      newDate.setDate(newDate.getDate() - 1);\n                      nextDate.setDate(nextDate.getDate() - 1);\n                    }\n                  }\n\n                  currentDate = newDate;\n                }\n\n                var oldValue = _this2._rangeEnd;\n                _this2._rangeEnd = currentDate;\n\n                if (oldValue.getTime() != _this2._rangeEnd.getTime()) {\n                  _this2._refreshRange();\n                }\n              }\n            });\n          }\n          /* Hover date */\n\n\n          cell.addEventListener('mouseenter', function (e) {\n            if (!_this2._mouseDown) {\n              var date = _this2._getDate(e.currentTarget);\n\n              _this2._triggerEvent('mouseOnDay', {\n                element: e.currentTarget,\n                date: date,\n                events: _this2.getEvents(date)\n              });\n            }\n          });\n          cell.addEventListener('mouseleave', function (e) {\n            var date = _this2._getDate(e.currentTarget);\n\n            _this2._triggerEvent('mouseOutDay', {\n              element: e.currentTarget,\n              date: date,\n              events: _this2.getEvents(date)\n            });\n          });\n        });\n\n        if (this.options.enableRangeSelection) {\n          // Release range selection\n          window.addEventListener('mouseup', function (e) {\n            if (_this2._mouseDown) {\n              _this2._mouseDown = false;\n\n              _this2._refreshRange();\n\n              var minDate = _this2._rangeStart < _this2._rangeEnd ? _this2._rangeStart : _this2._rangeEnd;\n              var maxDate = _this2._rangeEnd > _this2._rangeStart ? _this2._rangeEnd : _this2._rangeStart;\n\n              _this2._triggerEvent('selectRange', {\n                startDate: minDate,\n                endDate: maxDate,\n                events: _this2.getEventsOnRange(minDate, new Date(maxDate.getFullYear(), maxDate.getMonth(), maxDate.getDate() + 1))\n              });\n            }\n          });\n        }\n        /* Responsive management */\n\n\n        if (this._responsiveInterval) {\n          clearInterval(this._responsiveInterval);\n          this._responsiveInterval = null;\n        }\n\n        this._responsiveInterval = setInterval(function () {\n          if (_this2.element.querySelector('.month') == null) {\n            return;\n          }\n\n          var calendarSize = _this2.element.offsetWidth;\n          var monthSize = _this2.element.querySelector('.month').offsetWidth + 10;\n          _this2._nbCols = null;\n\n          if (monthSize * 6 < calendarSize) {\n            _this2._nbCols = 2;\n          } else if (monthSize * 4 < calendarSize) {\n            _this2._nbCols = 3;\n          } else if (monthSize * 3 < calendarSize) {\n            _this2._nbCols = 4;\n          } else if (monthSize * 2 < calendarSize) {\n            _this2._nbCols = 6;\n          } else {\n            _this2._nbCols = 12;\n          }\n\n          _this2.element.querySelectorAll('.month-container').forEach(function (month) {\n            if (!month.classList.contains(\"month-\".concat(_this2._nbCols))) {\n              ['month-2', 'month-3', 'month-4', 'month-6', 'month-12'].forEach(function (className) {\n                month.classList.remove(className);\n              });\n              month.classList.add(\"month-\".concat(_this2._nbCols));\n            }\n          });\n        }, 300);\n      }\n    }, {\n      key: \"_refreshRange\",\n      value: function _refreshRange() {\n        var _this3 = this;\n\n        this.element.querySelectorAll('td.day.range').forEach(function (day) {\n          return day.classList.remove('range');\n        });\n        this.element.querySelectorAll('td.day.range-start').forEach(function (day) {\n          return day.classList.remove('range-start');\n        });\n        this.element.querySelectorAll('td.day.range-end').forEach(function (day) {\n          return day.classList.remove('range-end');\n        });\n\n        if (this._mouseDown) {\n          var minDate = this._rangeStart < this._rangeEnd ? this._rangeStart : this._rangeEnd;\n          var maxDate = this._rangeEnd > this._rangeStart ? this._rangeEnd : this._rangeStart;\n          this.element.querySelectorAll('.month-container').forEach(function (month) {\n            var monthId = parseInt(month.dataset.monthId);\n\n            if (minDate.getMonth() <= monthId && maxDate.getMonth() >= monthId) {\n              month.querySelectorAll('td.day:not(.old):not(.new)').forEach(function (day) {\n                var date = _this3._getDate(day);\n\n                if (date >= minDate && date <= maxDate) {\n                  day.classList.add('range');\n\n                  if (date.getTime() == minDate.getTime()) {\n                    day.classList.add('range-start');\n                  }\n\n                  if (date.getTime() == maxDate.getTime()) {\n                    day.classList.add('range-end');\n                  }\n                }\n              });\n            }\n          });\n        }\n      }\n    }, {\n      key: \"_getElementPosition\",\n      value: function _getElementPosition(element) {\n        var top = 0,\n            left = 0;\n\n        do {\n          top += element.offsetTop || 0;\n          left += element.offsetLeft || 0;\n          element = element.offsetParent;\n        } while (element);\n\n        return {\n          top: top,\n          left: left\n        };\n      }\n    }, {\n      key: \"_openContextMenu\",\n      value: function _openContextMenu(elt) {\n        var _this4 = this;\n\n        var contextMenu = document.querySelector('.calendar-context-menu');\n\n        if (contextMenu !== null) {\n          contextMenu.style.display = 'none'; // Clear the context menu (faster method)\n\n          while (contextMenu.firstChild) {\n            contextMenu.removeChild(contextMenu.firstChild);\n          }\n        } else {\n          contextMenu = document.createElement('div');\n          contextMenu.classList.add('calendar-context-menu');\n          document.body.appendChild(contextMenu);\n        }\n\n        var date = this._getDate(elt);\n\n        var events = this.getEvents(date);\n\n        for (var i = 0; i < events.length; i++) {\n          var eventItem = document.createElement('div');\n          eventItem.classList.add('item');\n          eventItem.style.paddingLeft = '4px';\n          eventItem.style.boxShadow = \"inset 4px 0 0 0 \".concat(events[i].color);\n          var eventItemContent = document.createElement('div');\n          eventItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = events[i].name;\n          eventItemContent.appendChild(text);\n          var icon = document.createElement('span');\n          icon.classList.add('arrow');\n          icon.innerHTML = \"&rsaquo;\";\n          eventItemContent.appendChild(icon);\n          eventItem.appendChild(eventItemContent);\n\n          this._renderContextMenuItems(eventItem, this.options.contextMenuItems, events[i]);\n\n          contextMenu.appendChild(eventItem);\n        }\n\n        if (contextMenu.children.length > 0) {\n          var position = this._getElementPosition(elt);\n\n          contextMenu.style.left = position.left + 25 + 'px';\n          contextMenu.style.right = '';\n          contextMenu.style.top = position.top + 25 + 'px';\n          contextMenu.style.display = 'block';\n\n          if (contextMenu.getBoundingClientRect().right > document.body.offsetWidth) {\n            contextMenu.style.left = '';\n            contextMenu.style.right = '0';\n          } // Launch the position check once the whole context menu tree will be rendered\n\n\n          setTimeout(function () {\n            return _this4._checkContextMenuItemsPosition();\n          }, 0);\n\n          var closeContextMenu = function closeContextMenu(event) {\n            if (event.type !== 'click' || !contextMenu.contains(event.target)) {\n              contextMenu.style.display = 'none';\n              window.removeEventListener('click', closeContextMenu);\n              window.removeEventListener('resize', closeContextMenu);\n              window.removeEventListener('scroll', closeContextMenu);\n            }\n          };\n\n          window.addEventListener('click', closeContextMenu);\n          window.addEventListener('resize', closeContextMenu);\n          window.addEventListener('scroll', closeContextMenu);\n        }\n      }\n    }, {\n      key: \"_renderContextMenuItems\",\n      value: function _renderContextMenuItems(parent, items, evt) {\n        var subMenu = document.createElement('div');\n        subMenu.classList.add('submenu');\n\n        for (var i = 0; i < items.length; i++) {\n          if (items[i].visible === false || typeof items[i].visible === \"function\" && !items[i].visible(evt)) {\n            continue;\n          }\n\n          var menuItem = document.createElement('div');\n          menuItem.classList.add('item');\n          var menuItemContent = document.createElement('div');\n          menuItemContent.classList.add('content');\n          var text = document.createElement('span');\n          text.classList.add('text');\n          text.textContent = items[i].text;\n          menuItemContent.appendChild(text);\n\n          if (items[i].click) {\n            (function (index) {\n              menuItemContent.addEventListener('click', function () {\n                document.querySelector('.calendar-context-menu').style.display = 'none';\n                items[index].click(evt);\n              });\n            })(i);\n          }\n\n          menuItem.appendChild(menuItemContent);\n\n          if (items[i].items && items[i].items.length > 0) {\n            var icon = document.createElement('span');\n            icon.classList.add('arrow');\n            icon.innerHTML = \"&rsaquo;\";\n            menuItemContent.appendChild(icon);\n\n            this._renderContextMenuItems(menuItem, items[i].items, evt);\n          }\n\n          subMenu.appendChild(menuItem);\n        }\n\n        if (subMenu.children.length > 0) {\n          parent.appendChild(subMenu);\n        }\n      }\n    }, {\n      key: \"_checkContextMenuItemsPosition\",\n      value: function _checkContextMenuItemsPosition() {\n        var menus = document.querySelectorAll('.calendar-context-menu .submenu');\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n          htmlMenu.style.display = 'block';\n          htmlMenu.style.visibility = 'hidden';\n        });\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n\n          if (htmlMenu.getBoundingClientRect().right > document.body.offsetWidth) {\n            htmlMenu.classList.add('open-left');\n          } else {\n            htmlMenu.classList.remove('open-left');\n          }\n        });\n        menus.forEach(function (menu) {\n          var htmlMenu = menu;\n          htmlMenu.style.display = '';\n          htmlMenu.style.visibility = '';\n        });\n      }\n    }, {\n      key: \"_getDate\",\n      value: function _getDate(elt) {\n        var day = elt.querySelector('.day-content').textContent;\n        var month = elt.closest('.month-container').dataset.monthId;\n        var year = this.options.startYear;\n        return new Date(year, month, day);\n      }\n    }, {\n      key: \"_triggerEvent\",\n      value: function _triggerEvent(eventName, parameters) {\n        var event = null;\n\n        if (typeof Event === \"function\") {\n          event = new Event(eventName);\n        } else {\n          event = document.createEvent('Event');\n          event.initEvent(eventName, false, false);\n        }\n\n        event.calendar = this;\n\n        for (var i in parameters) {\n          event[i] = parameters[i];\n        }\n\n        this.element.dispatchEvent(event);\n        return event;\n      }\n    }, {\n      key: \"_isDisabled\",\n      value: function _isDisabled(date) {\n        if (this.options.minDate != null && date < this.options.minDate || this.options.maxDate != null && date > this.options.maxDate) {\n          return true;\n        }\n\n        if (this.options.disabledWeekDays.length > 0) {\n          for (var d = 0; d < this.options.disabledWeekDays.length; d++) {\n            if (date.getDay() == this.options.disabledWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        if (this.options.disabledDays.length > 0) {\n          for (var d = 0; d < this.options.disabledDays.length; d++) {\n            if (date.getTime() == this.options.disabledDays[d].getTime()) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n    }, {\n      key: \"_isHidden\",\n      value: function _isHidden(day) {\n        if (this.options.hiddenWeekDays.length > 0) {\n          for (var d = 0; d < this.options.hiddenWeekDays.length; d++) {\n            if (day == this.options.hiddenWeekDays[d]) {\n              return true;\n            }\n          }\n        }\n\n        return false;\n      }\n      /**\n          * Gets the week number for a specified date.\n          *\n          * @param date The specified date.\n          */\n\n    }, {\n      key: \"getWeekNumber\",\n      value: function getWeekNumber(date) {\n        // Algorithm from https://weeknumber.net/how-to/javascript\n        var workingDate = new Date(date.getTime());\n        workingDate.setHours(0, 0, 0, 0); // Thursday in current week decides the year.\n\n        workingDate.setDate(workingDate.getDate() + 3 - (workingDate.getDay() + 6) % 7); // January 4 is always in week 1.\n\n        var week1 = new Date(workingDate.getFullYear(), 0, 4); // Adjust to Thursday in week 1 and count number of weeks from date to week1.\n\n        return 1 + Math.round(((workingDate.getTime() - week1.getTime()) / 86400000 - 3 + (week1.getDay() + 6) % 7) / 7);\n      }\n      /**\n          * Gets the data source elements for a specified day.\n          *\n          * @param date The specified day.\n          */\n\n    }, {\n      key: \"getEvents\",\n      value: function getEvents(date) {\n        return this.getEventsOnRange(date, new Date(date.getFullYear(), date.getMonth(), date.getDate() + 1));\n      }\n      /**\n          * Gets the data source elements for a specified range of days.\n          *\n          * @param startDate The beginning of the day range (inclusive).\n       * @param endDate The end of the day range (non inclusive).\n          */\n\n    }, {\n      key: \"getEventsOnRange\",\n      value: function getEventsOnRange(startDate, endDate) {\n        var events = [];\n\n        if (this._dataSource && startDate && endDate) {\n          for (var i = 0; i < this._dataSource.length; i++) {\n            if (this._dataSource[i].startDate < endDate && this._dataSource[i].endDate >= startDate) {\n              events.push(this._dataSource[i]);\n            }\n          }\n        }\n\n        return events;\n      }\n      /**\n          * Check if there is no event on the first part, last part or on the whole specified day.\n          *\n          * @param date The specified day.\n          * @param after Whether to check for a free slot on the first part (if `false`) or the last part (if `true`) of the day. If `null`, this will check on the whole day.\n       * \n       * Usefull only if using the `alwaysHalfDay` option of the calendar, or the `startHalfDay` or `endHalfDay` option of the datasource.\n          */\n\n    }, {\n      key: \"isThereFreeSlot\",\n      value: function isThereFreeSlot(date) {\n        var _this5 = this;\n\n        var after = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var events = this.getEvents(date);\n\n        if (after === true) {\n          return !events.some(function (evt) {\n            return !_this5.options.alwaysHalfDay && !evt.endHalfDay || evt.endDate > date;\n          });\n        } else if (after === false) {\n          return !events.some(function (evt) {\n            return !_this5.options.alwaysHalfDay && !evt.startHalfDay || evt.startDate < date;\n          });\n        } else {\n          return this.isThereFreeSlot(date, false) || this.isThereFreeSlot(date, true);\n        }\n      }\n      /**\n          * Gets the year displayed on the calendar.\n          */\n\n    }, {\n      key: \"getYear\",\n      value: function getYear() {\n        return this.options.startYear;\n      }\n      /**\n          * Sets the year displayed on the calendar.\n          *\n          * @param year The year to displayed on the calendar.\n          */\n\n    }, {\n      key: \"setYear\",\n      value: function setYear(year) {\n        var _this6 = this;\n\n        var parsedYear = parseInt(year);\n\n        if (!isNaN(parsedYear)) {\n          this.options.startYear = parsedYear; // Clear the calendar (faster method)\n\n          while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n          }\n\n          if (this.options.displayHeader) {\n            this._renderHeader();\n          }\n\n          var eventResult = this._triggerEvent('yearChanged', {\n            currentYear: this.options.startYear,\n            preventRendering: false\n          });\n\n          if (typeof this.options.dataSource === \"function\") {\n            this.render(true);\n\n            this._fetchDataSource(function (dataSource) {\n              _this6._dataSource = dataSource;\n\n              _this6._initializeDatasourceColors();\n\n              _this6.render(false);\n            });\n          } else {\n            if (!eventResult.preventRendering) {\n              this.render();\n            }\n          }\n        }\n      }\n      /**\n          * Gets the minimum date of the calendar.\n          */\n\n    }, {\n      key: \"getMinDate\",\n      value: function getMinDate() {\n        return this.options.minDate;\n      }\n      /**\n          * Sets the minimum date of the calendar.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param minDate The minimum date to set.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setMinDate\",\n      value: function setMinDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.minDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\n          * Gets the maximum date of the calendar.\n          */\n\n    }, {\n      key: \"getMaxDate\",\n      value: function getMaxDate() {\n        return this.options.maxDate;\n      }\n      /**\n          * Sets the maximum date of the calendar. \n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param maxDate The maximum date to set.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setMaxDate\",\n      value: function setMaxDate(date) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (date instanceof Date || date === null) {\n          this.options.maxDate = date;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\n          * Gets the current style used for displaying data source.\n          */\n\n    }, {\n      key: \"getStyle\",\n      value: function getStyle() {\n        return this.options.style;\n      }\n      /**\n          * Sets the style to use for displaying data source. \n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param style The style to use for displaying data source (\"background\", \"border\" or \"custom\").\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setStyle\",\n      value: function setStyle(style) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.style = style == 'background' || style == 'border' || style == 'custom' ? style : 'border';\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\n          */\n\n    }, {\n      key: \"getAllowOverlap\",\n      value: function getAllowOverlap() {\n        return this.options.allowOverlap;\n      }\n      /**\n          * Sets a value indicating whether the user can select a range which overlapping an other element present in the datasource.\n          *\n          * @param allowOverlap Indicates whether the user can select a range which overlapping an other element present in the datasource.\n          */\n\n    }, {\n      key: \"setAllowOverlap\",\n      value: function setAllowOverlap(allowOverlap) {\n        this.options.allowOverlap = allowOverlap;\n      }\n      /**\n          * Gets a value indicating whether the weeks number are displayed.\n          */\n\n    }, {\n      key: \"getDisplayWeekNumber\",\n      value: function getDisplayWeekNumber() {\n        return this.options.displayWeekNumber;\n      }\n      /**\n          * Sets a value indicating whether the weeks number are displayed.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param  displayWeekNumber Indicates whether the weeks number are displayed.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDisplayWeekNumber\",\n      value: function setDisplayWeekNumber(displayWeekNumber) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayWeekNumber = displayWeekNumber;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the calendar header is displayed.\n          */\n\n    }, {\n      key: \"getDisplayHeader\",\n      value: function getDisplayHeader() {\n        return this.options.displayHeader;\n      }\n      /**\n          * Sets a value indicating whether the calendar header is displayed.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param displayHeader Indicates whether the calendar header is displayed.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDisplayHeader\",\n      value: function setDisplayHeader(displayHeader) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayHeader = displayHeader;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the data source must be rendered on disabled days.\n          */\n\n    }, {\n      key: \"getDisplayDisabledDataSource\",\n      value: function getDisplayDisabledDataSource() {\n        return this.options.displayDisabledDataSource;\n      }\n      /**\n          * Sets a value indicating whether the data source must be rendered on disabled days.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param displayDisabledDataSource Indicates whether the data source must be rendered on disabled days.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDisplayDisabledDataSource\",\n      value: function setDisplayDisabledDataSource(displayDisabledDataSource) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.displayDisabledDataSource = displayDisabledDataSource;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\n          */\n\n    }, {\n      key: \"getAlwaysHalfDay\",\n      value: function getAlwaysHalfDay() {\n        return this.options.alwaysHalfDay;\n      }\n      /**\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as half selected day.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param alwaysHalfDay Indicates whether the beginning and the end of each range should be displayed as half selected day.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setAlwaysHalfDay\",\n      value: function setAlwaysHalfDay(alwaysHalfDay) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.alwaysHalfDay = alwaysHalfDay;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the user can make range selection.\n          */\n\n    }, {\n      key: \"getEnableRangeSelection\",\n      value: function getEnableRangeSelection() {\n        return this.options.enableRangeSelection;\n      }\n      /**\n          * Sets a value indicating whether the user can make range selection.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param enableRangeSelection Indicates whether the user can make range selection.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setEnableRangeSelection\",\n      value: function setEnableRangeSelection(enableRangeSelection) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableRangeSelection = enableRangeSelection;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the disabled days.\n          */\n\n    }, {\n      key: \"getDisabledDays\",\n      value: function getDisabledDays() {\n        return this.options.disabledDays;\n      }\n      /**\n          * Sets the disabled days.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param disableDays The disabled days to set.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDisabledDays\",\n      value: function setDisabledDays(disabledDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledDays = disabledDays instanceof Array ? disabledDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the disabled days of the week.\n          */\n\n    }, {\n      key: \"getDisabledWeekDays\",\n      value: function getDisabledWeekDays() {\n        return this.options.disabledWeekDays;\n      }\n      /**\n          * Sets the disabled days of the week.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param disabledWeekDays The disabled days of the week to set.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDisabledWeekDays\",\n      value: function setDisabledWeekDays(disabledWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.disabledWeekDays = disabledWeekDays instanceof Array ? disabledWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the hidden days of the week.\n          */\n\n    }, {\n      key: \"getHiddenWeekDays\",\n      value: function getHiddenWeekDays() {\n        return this.options.hiddenWeekDays;\n      }\n      /**\n          * Sets the hidden days of the week.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param hiddenWeekDays The hidden days of the week to set.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setHiddenWeekDays\",\n      value: function setHiddenWeekDays(hiddenWeekDays) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.hiddenWeekDays = hiddenWeekDays instanceof Array ? hiddenWeekDays : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\n          */\n\n    }, {\n      key: \"getRoundRangeLimits\",\n      value: function getRoundRangeLimits() {\n        return this.options.roundRangeLimits;\n      }\n      /**\n          * Sets a value indicating whether the beginning and the end of each range should be displayed as rounded cells.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param roundRangeLimits Indicates whether the beginning and the end of each range should be displayed as rounded cells. \n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setRoundRangeLimits\",\n      value: function setRoundRangeLimits(roundRangeLimits) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.roundRangeLimits = roundRangeLimits;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets a value indicating whether the default context menu must be displayed when right clicking on a day.\n          */\n\n    }, {\n      key: \"getEnableContextMenu\",\n      value: function getEnableContextMenu() {\n        return this.options.enableContextMenu;\n      }\n      /**\n          * Sets a value indicating whether the default context menu must be displayed when right clicking on a day. \n          * \n       * This method causes a refresh of the calendar.\n          * \n          * @param enableContextMenu Indicates whether the default context menu must be displayed when right clicking on a day.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setEnableContextMenu\",\n      value: function setEnableContextMenu(enableContextMenu) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.enableContextMenu = enableContextMenu;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the context menu items.\n          */\n\n    }, {\n      key: \"getContextMenuItems\",\n      value: function getContextMenuItems() {\n        return this.options.contextMenuItems;\n      }\n      /**\n          * Sets new context menu items.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param contextMenuItems The new context menu items.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setContextMenuItems\",\n      value: function setContextMenuItems(contextMenuItems) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.contextMenuItems = contextMenuItems instanceof Array ? contextMenuItems : [];\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the custom day renderer.\n          */\n\n    }, {\n      key: \"getCustomDayRenderer\",\n      value: function getCustomDayRenderer() {\n        return this.options.customDayRenderer;\n      }\n      /**\n          * Sets the custom day renderer.\n       * \n       * This method causes a refresh of the calendar.\n       *\n       * @param handler The function used to render the days. This function is called during render for each day.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setCustomDayRenderer\",\n      value: function setCustomDayRenderer(customDayRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDayRenderer = typeof customDayRenderer === \"function\" ? customDayRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the custom data source renderer.\n          */\n\n    }, {\n      key: \"getCustomDataSourceRenderer\",\n      value: function getCustomDataSourceRenderer() {\n        return this.options.customDataSourceRenderer;\n      }\n      /**\n          * Sets the custom data source renderer. Works only with the style set to \"custom\".\n       * \n       * This method causes a refresh of the calendar.\n       *\n       * @param handler The function used to render the data source. This function is called during render for each day containing at least one event.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setCustomDataSourceRenderer\",\n      value: function setCustomDataSourceRenderer(customDataSourceRenderer) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.customDataSourceRenderer = typeof customDataSourceRenderer === \"function\" ? customDataSourceRenderer : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the language used for calendar rendering.\n          */\n\n    }, {\n      key: \"getLanguage\",\n      value: function getLanguage() {\n        return this.options.language;\n      }\n      /**\n          * Sets the language used for calendar rendering.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param language The language to use for calendar redering.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setLanguage\",\n      value: function setLanguage(language) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        if (language != null && Calendar.locales[language] != null) {\n          this.options.language = language;\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\n          * Gets the current data source.\n          */\n\n    }, {\n      key: \"getDataSource\",\n      value: function getDataSource() {\n        return this.options.dataSource;\n      }\n      /**\n          * Sets a new data source.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param dataSource The new data source.\n       * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setDataSource\",\n      value: function setDataSource(dataSource) {\n        var _this7 = this;\n\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.dataSource = dataSource instanceof Array || typeof dataSource === \"function\" ? dataSource : [];\n\n        if (typeof this.options.dataSource === \"function\") {\n          this.render(true);\n\n          this._fetchDataSource(function (dataSource) {\n            _this7._dataSource = dataSource;\n\n            _this7._initializeDatasourceColors();\n\n            _this7.render(false);\n          });\n        } else {\n          this._dataSource = this.options.dataSource;\n\n          this._initializeDatasourceColors();\n\n          if (!preventRendering) {\n            this.render();\n          }\n        }\n      }\n      /**\n          * Gets the starting day of the week.\n          */\n\n    }, {\n      key: \"getWeekStart\",\n      value: function getWeekStart() {\n        return this.options.weekStart ? this.options.weekStart : Calendar.locales[this.options.language].weekStart;\n      }\n      /**\n          * Sets the starting day of the week.\n       * \n       * This method causes a refresh of the calendar.\n          *\n          * @param weekStart The starting day of the week. This option overrides the parameter define in the language file.\n          * @param preventRedering Indicates whether the rendering should be prevented after the property update.\n          */\n\n    }, {\n      key: \"setWeekStart\",\n      value: function setWeekStart(weekStart) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n        this.options.weekStart = !isNaN(parseInt(weekStart)) ? parseInt(weekStart) : null;\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n      /**\n          * Gets the loading template.\n          */\n\n    }, {\n      key: \"getLoadingTemplate\",\n      value: function getLoadingTemplate() {\n        return this.options.loadingTemplate;\n      }\n      /**\n          * Sets the loading template.\n          *\n          * @param loadingTemplate The loading template.\n          */\n\n    }, {\n      key: \"setLoadingTemplate\",\n      value: function setLoadingTemplate(loadingTemplate) {\n        this.options.loadingTemplate = typeof loadingTemplate === \"string\" || loadingTemplate instanceof HTMLElement ? loadingTemplate : null;\n      }\n      /**\n       * \n          * Add a new element to the data source.\n       * \n       * This method causes a refresh of the calendar.\n          * \n          * @param element The element to add.\n       * @param preventRendering Indicates whether the calendar shouldn't be refreshed once the event added.\n          */\n\n    }, {\n      key: \"addEvent\",\n      value: function addEvent(evt) {\n        var preventRendering = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n        this._dataSource.push(evt);\n\n        if (!preventRendering) {\n          this.render();\n        }\n      }\n    }]);\n\n    return Calendar;\n  }();\n\n  _exports[\"default\"] = Calendar;\n\n  _defineProperty(Calendar, \"locales\", {\n    en: {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      weekShort: 'W',\n      weekStart: 0\n    }\n  });\n\n  _defineProperty(Calendar, \"colors\", ['#2C8FC9', '#9CB703', '#F5BB00', '#FF4A32', '#B56CE2', '#45A597']);\n\n  if ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") {\n    window.Calendar = Calendar;\n    document.addEventListener(\"DOMContentLoaded\", function () {\n      document.querySelectorAll('[data-provide=\"calendar\"]').forEach(function (element) {\n        return new Calendar(element);\n      });\n    });\n  }\n});\n});\n\nvar JsCalendar = unwrapExports(jsYearCalendar);\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"/* =========================================================\\n * JS year calendar v0.1.0\\n * Repo: https://github.com/year-calendar/js-year-calendar\\n * =========================================================\\n * Created by Paul David-Sivelle\\n *\\n * Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n *\\n * Unless required by applicable law or agreed to in writing, software\\n * distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n * See the License for the specific language governing permissions and\\n * limitations under the License.\\n * ========================================================= */\\n/* Main */\\n.calendar {\\n  padding: 4px;\\n  -webkit-border-radius: 4px;\\n  -moz-border-radius: 4px;\\n  border-radius: 4px;\\n  direction: ltr;\\n  overflow-x: hidden;\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -khtml-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  /* Header */\\n  /* Months */\\n  /* Loading */\\n}\\n.calendar:after {\\n  /* Apply the right height on the calendar div, even if the months elements are floating  */\\n  clear: both;\\n  content: \\\"\\\";\\n  display: block;\\n}\\n.calendar .calendar-rtl {\\n  direction: rtl;\\n}\\n.calendar .calendar-rtl .calendar-rtl table tr td span {\\n  float: right;\\n}\\n.calendar table {\\n  margin: auto;\\n  border-spacing: 0;\\n}\\n.calendar table td,\\n.calendar table th {\\n  text-align: center;\\n  width: 20px;\\n  height: 20px;\\n  border: none;\\n  padding: 4px 5px;\\n  font-size: 12px;\\n}\\n.calendar .calendar-header {\\n  width: 100%;\\n  margin-bottom: 20px;\\n  border: 1px solid #ddd;\\n}\\n.calendar .calendar-header table {\\n  width: 100%;\\n}\\n.calendar .calendar-header table th {\\n  font-size: 22px;\\n  padding: 5px 10px;\\n  cursor: pointer;\\n}\\n.calendar .calendar-header table th:hover {\\n  background: #eeeeee;\\n}\\n.calendar .calendar-header table th.disabled,\\n.calendar .calendar-header table th.disabled:hover {\\n  background: none;\\n  cursor: default;\\n  color: white;\\n}\\n.calendar .calendar-header table th.prev,\\n.calendar .calendar-header table th.next {\\n  width: 20px;\\n}\\n.calendar .calendar-header .year-title {\\n  font-weight: bold;\\n  text-align: center;\\n  height: 20px;\\n  width: auto;\\n}\\n.calendar .calendar-header .year-neighbor {\\n  opacity: 0.4;\\n}\\n@media (max-width: 991px) {\\n  .calendar .calendar-header .year-neighbor {\\n    display: none;\\n  }\\n}\\n.calendar .calendar-header .year-neighbor2 {\\n  opacity: 0.2;\\n}\\n@media (max-width: 767px) {\\n  .calendar .calendar-header .year-neighbor2 {\\n    display: none;\\n  }\\n}\\n.calendar .months-container {\\n  width: 100%;\\n  display: none;\\n}\\n.calendar .months-container .month-container {\\n  float: left;\\n  text-align: center;\\n  height: 200px;\\n  padding: 0;\\n}\\n.calendar .months-container .month-container.month-2 {\\n  width: 16.66666667%;\\n}\\n.calendar .months-container .month-container.month-3 {\\n  width: 25%;\\n}\\n.calendar .months-container .month-container.month-4 {\\n  width: 33.33333333%;\\n}\\n.calendar .months-container .month-container.month-6 {\\n  width: 50%;\\n}\\n.calendar .months-container .month-container.month-12 {\\n  width: 100%;\\n}\\n.calendar table.month th.month-title {\\n  font-size: 16px;\\n  padding-bottom: 5px;\\n}\\n.calendar table.month th.day-header {\\n  font-size: 14px;\\n}\\n.calendar table.month tr td,\\n.calendar table.month tr th {\\n  padding: 0;\\n}\\n.calendar table.month tr td.hidden,\\n.calendar table.month tr th.hidden {\\n  display: none;\\n}\\n.calendar table.month td.week-number {\\n  cursor: default;\\n  font-weight: bold;\\n  border-right: 1px solid #eee;\\n  padding: 5px;\\n}\\n.calendar table.month td.day.round-left {\\n  -webkit-border-radius: 8px 0 0 8px;\\n  -moz-border-radius: 8px 0 0 8px;\\n  border-radius: 8px 0 0 8px;\\n}\\n.calendar table.month td.day.round-right {\\n  webkit-border-radius: 0 8px 8px 0 ;\\n  -moz-border-radius: 0 8px 8px 0;\\n  border-radius: 0 8px 8px 0;\\n}\\n.calendar table.month td.day .day-content {\\n  -webkit-border-radius: 4px;\\n  -moz-border-radius: 4px;\\n  border-radius: 4px;\\n  padding: 5px 6px;\\n}\\n.calendar table.month td.old,\\n.calendar table.month td.new,\\n.calendar table.month td.old:hover,\\n.calendar table.month td.new:hover {\\n  background: none;\\n  cursor: default;\\n}\\n.calendar table.month td.disabled,\\n.calendar table.month td.disabled:hover {\\n  color: #dddddd;\\n}\\n.calendar table.month td.disabled .day-content:hover,\\n.calendar table.month td.disabled:hover .day-content:hover {\\n  background: none;\\n  cursor: default;\\n}\\n.calendar table.month td.range .day-content {\\n  background: rgba(0, 0, 0, 0.2);\\n  -webkit-border-radius: 0;\\n  -moz-border-radius: 0;\\n  border-radius: 0;\\n}\\n.calendar table.month td.range.range-start .day-content {\\n  border-top-left-radius: 4px;\\n  border-bottom-left-radius: 4px;\\n}\\n.calendar table.month td.range.range-end .day-content {\\n  border-top-right-radius: 4px;\\n  border-bottom-right-radius: 4px;\\n}\\n.calendar .calendar-loading-container {\\n  position: relative;\\n  text-align: center;\\n  min-height: 200px;\\n}\\n.calendar .calendar-loading-container .calendar-loading {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translateX(-50%) translateY(-50%);\\n}\\n.calendar .calendar-spinner {\\n  margin: 20px auto;\\n  width: 80px;\\n  text-align: center;\\n}\\n.calendar .calendar-spinner > div {\\n  width: 16px;\\n  height: 16px;\\n  margin: 5px;\\n  background-color: #333;\\n  border-radius: 100%;\\n  display: inline-block;\\n  -webkit-animation: sk-bouncedelay 1s infinite ease-in-out both;\\n  animation: sk-bouncedelay 1s infinite ease-in-out both;\\n}\\n.calendar .calendar-spinner > div.bounce1 {\\n  -webkit-animation-delay: -0.32s;\\n  animation-delay: -0.32s;\\n}\\n.calendar .calendar-spinner > div.bounce2 {\\n  -webkit-animation-delay: -0.16s;\\n  animation-delay: -0.16s;\\n}\\n/* Context menu */\\n.calendar-context-menu,\\n.calendar-context-menu .submenu {\\n  border: 1px solid #ddd;\\n  background-color: white;\\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\\n  -webkit-box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);\\n  position: absolute;\\n  display: none;\\n}\\n.calendar-context-menu .item {\\n  position: relative;\\n}\\n.calendar-context-menu .item .content {\\n  padding: 10px 30px;\\n  cursor: pointer;\\n  display: display: table-cell; text-align: center;  \\n  width: 100%;\\n  white-space: nowrap;\\n}\\n.calendar-context-menu .item .content:hover {\\n  background: #eee;\\n}\\n.calendar-context-menu .item .content .text {\\n  display: table-cell;\\n}\\n.calendar-context-menu .item .content .arrow {\\n  display: table-cell;\\n  padding-left: 10px;\\n  text-align: right;\\n}\\n.calendar-context-menu .item .submenu {\\n  top: -1px;\\n  /* Compensate for the border */\\n}\\n.calendar-context-menu .item .submenu:not(.open-left) {\\n  left: 100%;\\n}\\n.calendar-context-menu .item .submenu.open-left {\\n  right: 100%;\\n}\\n.calendar-context-menu .item:hover > .submenu {\\n  display: block;\\n}\\n.table-striped .calendar table.month tr td,\\n.table-striped .calendar table.month tr th {\\n  background-color: transparent;\\n}\\ntable.month td.day .day-content:hover {\\n  background: rgba(0, 0, 0, 0.2);\\n  cursor: pointer;\\n}\\n@-webkit-keyframes sk-bouncedelay {\\n  0%,\\n  80%,\\n  100% {\\n    -webkit-transform: scale(0);\\n  }\\n  40% {\\n    -webkit-transform: scale(1);\\n  }\\n}\\n@keyframes sk-bouncedelay {\\n  0%,\\n  80%,\\n  100% {\\n    -webkit-transform: scale(0);\\n    transform: scale(0);\\n  }\\n  40% {\\n    -webkit-transform: scale(1);\\n    transform: scale(1);\\n  }\\n}\\n\";\nstyleInject(css_248z);\n\n//\nvar script = {\n  name: 'Calendar',\n  props: ['allowOverlap', 'alwaysHalfDay', 'contextMenuItems', 'customDayRenderer', 'customDataSourceRenderer', 'dataSource', 'disabledDays', 'disabledWeekDays', 'displayDisabledDataSource', 'displayHeader', 'displayWeekNumber', 'enableContextMenu', 'enableRangeSelection', 'hiddenWeekDays', 'language', 'loadingTemplate', 'maxDate', 'minDate', 'roundRangeLimits', 'renderStyle', 'weekStart', 'year'],\n  data: function data() {\n    return {\n      shouldRender: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.calendar = new JsCalendar(this.$el, {\n      // Options\n      allowOverlap: this.allowOverlap,\n      alwaysHalfDay: this.alwaysHalfDay,\n      contextMenuItems: this.contextMenuItems,\n      customDayRenderer: this.customDayRenderer,\n      customDataSourceRenderer: this.customDataSourceRenderer,\n      dataSource: this.dataSource,\n      disabledDays: this.disabledDays,\n      disabledWeekDays: this.disabledWeekDays,\n      displayDisabledDataSource: this.displayDisabledDataSource,\n      displayHeader: this.displayHeader,\n      displayWeekNumber: this.displayWeekNumber,\n      enableContextMenu: this.enableContextMenu,\n      enableRangeSelection: this.enableRangeSelection,\n      hiddenWeekDays: this.hiddenWeekDays,\n      language: this.language,\n      loadingTemplate: this.loadingTemplate,\n      maxDate: this.maxDate,\n      minDate: this.minDate,\n      roundRangeLimits: this.roundRangeLimits,\n      style: this.renderStyle,\n      weekStart: this.weekStart,\n      startYear: this.year,\n      // Events\n      clickDay: function clickDay(e) {\n        return _this.$emit('click-day', e);\n      },\n      dayContextMenu: function dayContextMenu(e) {\n        return _this.$emit('day-context-menu', e);\n      },\n      mouseOnDay: function mouseOnDay(e) {\n        return _this.$emit('mouse-on-day', e);\n      },\n      mouseOutDay: function mouseOutDay(e) {\n        return _this.$emit('mouse-out-day', e);\n      },\n      renderEnd: function renderEnd(e) {\n        return _this.$emit('render-end', e);\n      },\n      selectRange: function selectRange(e) {\n        return _this.$emit('select-range', e);\n      },\n      yearChanged: function yearChanged(e) {\n        return _this.$emit('year-changed', e);\n      }\n    });\n  },\n  computed: {\n    allProps: function allProps() {\n      return \"\\n                \".concat(this.allowOverlap, \"\\n                \").concat(this.alwaysHalfDay, \"\\n                \").concat(this.contextMenuItems, \"\\n                \").concat(this.customDayRenderer, \"\\n                \").concat(this.customDataSourceRenderer, \"\\n                \").concat(this.dataSource, \"\\n                \").concat(this.disabledDays, \"\\n                \").concat(this.disabledWeekDays, \"\\n                \").concat(this.displayDisabledDataSource, \"\\n                \").concat(this.displayHeader, \"\\n                \").concat(this.displayWeekNumber, \"\\n                \").concat(this.enableContextMenu, \"\\n                \").concat(this.enableRangeSelection, \"\\n                \").concat(this.hiddenWeekDays, \"\\n                \").concat(this.language, \"\\n                \").concat(this.loadingTemplate, \"\\n                \").concat(this.maxDate, \"\\n                \").concat(this.minDate, \"\\n                \").concat(this.roundRangeLimits, \"\\n                \").concat(this.renderStyle, \"\\n                \").concat(this.weekStart, \"\\n                \").concat(this.year, \"\\n            \");\n    }\n  },\n  watch: {\n    allowOverlap: function allowOverlap(val) {\n      this.calendar.setAllowOverlap(val);\n    },\n    alwaysHalfDay: function alwaysHalfDay(val) {\n      this.calendar.setAlwaysHalfDay(val, true);\n      this.shouldRender = true;\n    },\n    contextMenuItems: function contextMenuItems(val) {\n      this.calendar.setContextMenuItems(val, true);\n      this.shouldRender = true;\n    },\n    customDayRenderer: function customDayRenderer(val) {\n      this.calendar.setCustomDayRenderer(val, true);\n      this.shouldRender = true;\n    },\n    customDataSourceRenderer: function customDataSourceRenderer(val) {\n      this.calendar.setCustomDataSourceRenderer(val, true);\n      this.shouldRender = true;\n    },\n    dataSource: function dataSource(val) {\n      this.calendar.setDataSource(val, true);\n      this.shouldRender = true;\n    },\n    disabledDays: function disabledDays(val) {\n      this.calendar.setDisabledDays(val, true);\n      this.shouldRender = true;\n    },\n    disabledWeekDays: function disabledWeekDays(val) {\n      this.calendar.setDisabledWeekDays(val, true);\n      this.shouldRender = true;\n    },\n    displayDisabledDataSource: function displayDisabledDataSource(val) {\n      this.calendar.setDisplayDisabledDataSource(val, true);\n      this.shouldRender = true;\n    },\n    displayHeader: function displayHeader(val) {\n      this.calendar.setDisplayHeader(val, true);\n      this.shouldRender = true;\n    },\n    displayWeekNumber: function displayWeekNumber(val) {\n      this.calendar.setDisplayWeekNumber(val, true);\n      this.shouldRender = true;\n    },\n    enableContextMenu: function enableContextMenu(val) {\n      this.calendar.setEnableContextMenu(val, true);\n      this.shouldRender = true;\n    },\n    enableRangeSelection: function enableRangeSelection(val) {\n      this.calendar.setEnableRangeSelection(val, true);\n      this.shouldRender = true;\n    },\n    hiddenWeekDays: function hiddenWeekDays(val) {\n      this.calendar.setHiddenWeekDays(val, true);\n      this.shouldRender = true;\n    },\n    language: function language(val) {\n      this.calendar.setLanguage(val, true);\n      this.shouldRender = true;\n    },\n    loadingTemplate: function loadingTemplate(val) {\n      this.calendar.setLoadingTemplate(val, true);\n    },\n    maxDate: function maxDate(val) {\n      this.calendar.setMaxDate(val, true);\n      this.shouldRender = true;\n    },\n    minDate: function minDate(val) {\n      this.calendar.setMinDate(val, true);\n      this.shouldRender = true;\n    },\n    roundRangeLimits: function roundRangeLimits(val) {\n      this.calendar.setRoundRangeLimits(val, true);\n      this.shouldRender = true;\n    },\n    renderStyle: function renderStyle(val) {\n      this.calendar.setStyle(val, true);\n      this.shouldRender = true;\n    },\n    weekStart: function weekStart(val) {\n      this.calendar.setWeekStart(val, true);\n      this.shouldRender = true;\n    },\n    year: function year(val) {\n      this.calendar.setYear(val);\n    },\n    allProps: function allProps(val) {\n      if (this.shouldRender) {\n        this.calendar.render();\n        this.shouldRender = false;\n      }\n    }\n  },\n  locales: JsCalendar.locales // Map the \"locales\" property to the js-year-calendar \"locales\" property, in order to make the locale files compatible\n\n};\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nvar normalizeComponent_1 = normalizeComponent;\n\n/* script */\nvar __vue_script__ = script;\n/* template */\n\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n\n  var _h = _vm.$createElement;\n\n  var _c = _vm._self._c || _h;\n\n  return _c(\"div\");\n};\n\nvar __vue_staticRenderFns__ = [];\n__vue_render__._withStripped = true;\n/* style */\n\nvar __vue_inject_styles__ = undefined;\n/* scoped */\n\nvar __vue_scope_id__ = undefined;\n/* module identifier */\n\nvar __vue_module_identifier__ = undefined;\n/* functional template */\n\nvar __vue_is_functional_template__ = false;\n/* style inject */\n\n/* style inject SSR */\n\nvar vYearCalendar = normalizeComponent_1({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, undefined, undefined);\n\nmodule.exports = vYearCalendar;\n"]}]}